Actor HLEGONSoundLoop : HLCounter { inventory.maxamount 999 }
Actor HLEGONSpriteChoose : HLCounter {}
Actor HLEGONSpriteLoop : HLCounter {}
Actor HLEGONByteIncr : HLCounter {}
Actor "E.G.O.N." : HLWeapon
{
	Weapon.Slotnumber 7
	Weapon.SelectionOrder 500
	Inventory.Pickupmessage "You got the E.G.O.N.!"
	Inventory.Pickupsound "halflife/egon_pickup"
	Weapon.AmmoType "Cell"
    Weapon.AmmoUse 0
    Weapon.AmmoGive 40
	+WEAPON.NOAUTOAIM
	-WEAPON.NOALERT
	Inventory.RestrictedTo "HalfLifePlayer"	
	states
	{
	Spawn:
		HW70 Z -1
		stop
	Select:
		TNT1 A 0 A_TakeInventory("freeman_fistselected",1)	
		TNT1 A 0 A_TakeInventory("freeman_pistolselected",1)	
		TNT1 A 0 A_TakeInventory("freeman_slot1selected",1)	
		TNT1 A 0 A_TakeInventory("freeman_slot2selected",1)	
		TNT1 A 0 A_TakeInventory("freeman_slot3selected",1)	
		TNT1 A 0 A_TakeInventory("freeman_slot4selected",1)	
		TNT1 A 0 A_TakeInventory("freeman_slot5selected",1)	
		TNT1 A 0 A_TakeInventory("freeman_slot6selected",1)	
		TNT1 A 0 A_GiveInventory("freeman_slot7selected",1)
	SelectLoop:	
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
		TNT1 A 1 A_Raise
		loop
	Deselect:
		TNT1 A 0 A_TakeInventory("freeman_slot7selected",1)
	DeselectLoop:	
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		loop
	Ready:
		TNT1 A 0 A_PlayWeaponSound("halflife/weaponselect")
		HW70 AABBCCDDEEFFGGHHIIJJKLMNOP 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
		goto WIdle
	WIdle:
		HW72 A 2 A_WeaponReady
		TNT1 A 0 A_Jump(4,"WIdle")
		TNT1 A 0 A_Jump(3,"WIdle")
		TNT1 A 0 A_Jump(2,"WIdle")
		TNT1 A 0 A_Jump(1,"Idle1")
		loop
	Idle1:
		HW75 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 A_WeaponReady
		HW76 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 A_WeaponReady
		HW77 ABCDEFGHI 2 A_WeaponReady		
		Goto WIdle
	Fire:
		TNT1 A 0 A_TakeInventory("HLEGONSpriteLoop",999)
		TNT1 A 0 A_TakeInventory("HLEGONSpriteChoose",999)
		TNT1 A 0 A_TakeInventory("HLEGONSoundLoop",999)
		TNT1 A 0 A_TakeInventory("HLEGONByteIncr",999)
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		goto Nope
		HW72 A 0 A_PlaySound("halflife/egon_start",CHAN_WEAPON)
		HW72 A 1 A_Jump(256,"Style1","Style2","Style3")
		goto Style1
	Style1:
		TNT1 A 0 A_Jump(128,"Style2","Style3")
		TNT1 A 0 A_GiveInventory("HLEGONSpriteChoose",1)
		goto Hold
	Style2:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("HLEGONSpriteChoose",2)
		goto Hold
	Style3:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("HLEGONSpriteChoose",3)
		goto Hold
	Hold:
		TNT1 A 0 A_JumpIfInventory("Cell",1,"HoldFire")
		goto Cooldown
	HoldFire:
		TNT1 A 0 //Radius_Quake(1,2,0,1,0)
		TNT1 A 0 A_TakeInventory("Cell",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"HoldFireCoop")
		//TNT1 A 0 A_FireBullets(0,0,1,random(31,35),"HLEgonKillerPuff",FBF_NORANDOM|FBF_NORANDOMPUFFZ)
		TNT1 A 0 A_FireCustomMissile("HLEgonKiller",0,0,2,6)
		goto ChooseSprite
	HoldFireCoop:	
		TNT1 A 0 A_FireCustomMissile("HLEgonKiller_Coop",0,0,2,6)
		goto ChooseSprite
	ChooseSprite:
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteChoose",3,"HoldStyleC")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteChoose",2,"HoldStyleB")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteChoose",1,"HoldStyleA")
		goto WIdle
		
	HoldStyleA:
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",13,"HoldStyleA_N")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",12,"HoldStyleA_M")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",11,"HoldStyleA_L")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",10,"HoldStyleA_K")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",9,"HoldStyleA_J")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",8,"HoldStyleA_I")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",7,"HoldStyleA_H")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",6,"HoldStyleA_G")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",5,"HoldStyleA_F")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",4,"HoldStyleA_E")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",3,"HoldStyleA_D")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",2,"HoldStyleA_C")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",1,"HoldStyleA_B")
		goto HoldStyleA_A
	HoldStyleA_A:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_B:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_C:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_D:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_E:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_F:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_G:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_H:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_I:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_J:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_K:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_L:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_M:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleA_N:
		HW72 A 2 bright
		goto HoldCheck
	HoldStyleB:
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",13,"HoldStyleB_N")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",12,"HoldStyleB_M")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",11,"HoldStyleB_L")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",10,"HoldStyleB_K")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",9,"HoldStyleB_J")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",8,"HoldStyleB_I")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",7,"HoldStyleB_H")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",6,"HoldStyleB_G")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",5,"HoldStyleB_F")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",4,"HoldStyleB_E")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",3,"HoldStyleB_D")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",2,"HoldStyleB_C")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",1,"HoldStyleB_B")
		goto HoldStyleB_A
	HoldStyleB_A:
		HW74 A 2 bright
		goto HoldCheck
	HoldStyleB_B:
		HW74 B 2 bright
		goto HoldCheck
	HoldStyleB_C:
		HW74 C 2 bright
		goto HoldCheck
	HoldStyleB_D:
		HW74 D 2 bright
		goto HoldCheck
	HoldStyleB_E:
		HW74 E 2 bright
		goto HoldCheck
	HoldStyleB_F:
		HW74 F 2 bright
		goto HoldCheck
	HoldStyleB_G:
		HW74 G 2 bright
		goto HoldCheck
	HoldStyleB_H:
		HW74 H 2 bright
		goto HoldCheck
	HoldStyleB_I:
		HW74 I 2 bright
		goto HoldCheck
	HoldStyleB_J:
		HW74 J 2 bright
		goto HoldCheck
	HoldStyleB_K:
		HW74 K 2 bright
		goto HoldCheck
	HoldStyleB_L:
		HW74 LM 1 bright
		goto HoldCheck
	HoldStyleB_M:
		HW74 NO 1 bright
		goto HoldCheck
	HoldStyleB_N:
		HW74 PQ 1 bright
		goto HoldCheck
	HoldStyleC:
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",13,"HoldStyleC_N")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",12,"HoldStyleC_M")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",11,"HoldStyleC_L")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",10,"HoldStyleC_K")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",9,"HoldStyleC_J")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",8,"HoldStyleC_I")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",7,"HoldStyleC_H")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",6,"HoldStyleC_G")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",5,"HoldStyleC_F")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",4,"HoldStyleC_E")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",3,"HoldStyleC_D")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",2,"HoldStyleC_C")
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",1,"HoldStyleC_B")
		goto HoldStyleC_A
	HoldStyleC_A:
		HW73 A 2 bright
		goto HoldCheck
	HoldStyleC_B:
		HW73 B 2 bright
		goto HoldCheck
	HoldStyleC_C:
		HW73 C 2 bright
		goto HoldCheck
	HoldStyleC_D:
		HW73 D 2 bright
		goto HoldCheck
	HoldStyleC_E:
		HW73 E 2 bright
		goto HoldCheck
	HoldStyleC_F:
		HW73 F 2 bright
		goto HoldCheck
	HoldStyleC_G:
		HW73 G 2 bright
		goto HoldCheck
	HoldStyleC_H:
		HW73 H 2 bright
		goto HoldCheck
	HoldStyleC_I:
		HW73 I 2 bright
		goto HoldCheck
	HoldStyleC_J:
		HW73 J 2 bright
		goto HoldCheck
	HoldStyleC_K:
		HW73 K 2 bright
		goto HoldCheck
	HoldStyleC_L:
		HW73 LM 1 bright
		goto HoldCheck
	HoldStyleC_M:
		HW73 NO 1 bright
		goto HoldCheck
	HoldStyleC_N:
		HW73 PQ 1 bright
		goto HoldCheck
	HoldCheck:
		TNT1 A 0 A_GiveInventory("HLEGONSpriteLoop",1)
		TNT1 A 0 A_JumpIfInventory("HLEGONSpriteLoop",14,2)
		TNT1 A 0 A_Jump(256,2)
		TNT1 A 0 A_TakeInventory("HLEGONSpriteLoop",999)
		TNT1 A 0 A_GiveInventory("HLEGONSoundLoop",1)
		TNT1 A 0 A_JumpIfInventory("HLEGONSoundLoop",65,2)
		TNT1 A 0 A_Jump(256,3)
		TNT1 A 0 A_PlaySound("halflife/egon_loop",CHAN_WEAPON)
		TNT1 A 0 A_TakeInventory("HLEGONSoundLoop",999)
		TNT1 A 0 A_GiveInventory("HLEGONByteIncr",7)
		TNT1 A 0 A_JumpIfInventory("HLEGONByteIncr",255,2)
		TNT1 A 0 A_Jump(256,2)
		TNT1 A 0 A_TakeInventory("HLEGONByteIncr",999)
		TNT1 A 0 A_Refire
		goto Cooldown
	Cooldown:
		TNT1 A 0 A_TakeInventory("HLEGONSpriteLoop",999)
		TNT1 A 0 A_TakeInventory("HLEGONSpriteChoose",999)
		TNT1 A 0 A_TakeInventory("HLEGONSoundLoop",999)
		TNT1 A 0 A_TakeInventory("HLEGONByteIncr",999)
		TNT1 A 0 A_ClearRefire
		TNT1 A 0 A_PlaySound("halflife/egon_cooldown",CHAN_WEAPON)
		TNT1 A 0 A_Jump(70,"Recharge")
		HW72 A 36
		goto WIdle
	Recharge:
		HW78 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		HW79 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		HW80 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		HW81 ABC 1
		Goto WIdle
	Nope:
		HW72 A 22 A_PlaySound("halflife/weaponempty",6)
		goto WIdle
	}
}

Actor HLEgonKiller : FastProjectile
{
	PROJECTILE
	+EXTREMEDEATH
	+SKYEXPLODE
	+DONTSPLASH
	+NOTIMEFREEZE
	+BLOODLESSIMPACT
	+NOBLOODDECALS
	+EXPLODEONWATER
	+CANNOTPUSH
	+NODAMAGETHRUST	
	Speed 300
	Radius 5
	Height 10
	Damagetype "HLEgon"
	Damage (35)
	States
	{
	Spawn:
		TNT1 A 1
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("HLEgonPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		TNT1 A 2 ACS_ExecuteWithResult(2678,1)
		stop
	}
}

Actor HLEgonKiller_Coop : HLEgonKiller { Species "Player" +THRUSPECIES +DONTHARMCLASS +DONTHARMSPECIES +MTHRUSPECIES }

Actor HLEgonKillerPuff
{
	+ALWAYSPUFF
	+PUFFONACTORS
	+PUFFGETSOWNER
	+NOGRAVITY
	-RANDOMIZE
	+NOBLOCKMAP
	+BLOODLESSIMPACT
	+NOBLOODDECALS
	-BLOODSPLATTER
	+EXPLODEONWATER
	+SKYEXPLODE
	+CANNOTPUSH
	+NODAMAGETHRUST
	+EXTREMEDEATH
	+NOTIMEFREEZE
	Radius 5
	Height 10
	Damagetype "HLEgon"
	states
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("HLEgonPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		TNT1 A 2 ACS_ExecuteWithResult(678,2)
		stop
	}
}

Actor HLEgonPuff
{
	+NOINTERACTION
	+NOBLOCKMAP
	+CLIENTSIDEONLY
	+NOGRAVITY
	-SOLID
	renderstyle add
	scale 0.85
	states
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 Radius_Quake(2,2,0,3,0)
		TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5","Spawn6","Spawn7","Spawn8")
		goto Spawn1
	Spawn1:
		HP71 A 2 bright
		stop
	Spawn2:
		HP71 B 2 bright
		stop
	Spawn3:
		HP71 C 2 bright
		stop
	Spawn4:
		HP71 D 2 bright
		stop
	Spawn5:
		HP71 E 2 bright
		stop
	Spawn6:
		HP71 F 2 bright
		stop
	Spawn7:
		HP71 G 2 bright
		stop
	Spawn8:
		HP71 H 2 bright
		stop
	}
}

Actor HLEgonParticle
{
	+NOINTERACTION
	+NOBLOCKMAP
	+CLIENTSIDEONLY
	+NOGRAVITY
	+NOCLIP
	-SOLID
	+FORCEXYBILLBOARD
	renderstyle add
	scale 0.4
	alpha 0.8
	states
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5","Spawn6","Spawn7","Spawn8")
		goto Spawn1
	Spawn1:
		HP75 A 2 bright
		stop
	Spawn2:
		HP75 B 2 bright
		stop
	Spawn3:
		HP75 C 2 bright
		stop
	Spawn4:
		HP75 D 2 bright
		stop
	Spawn5:
		HP75 E 2 bright
		stop
	Spawn6:
		HP75 F 2 bright
		stop
	Spawn7:
		HP75 G 2 bright
		stop
	Spawn8:
		HP75 H 2 bright
		stop
	}
}

Actor HLEgonParticleHelix
{
	+NOINTERACTION
	+NOBLOCKMAP
	//+CLIENTSIDEONLY
	+NOGRAVITY
	+NOCLIP
	-SOLID
	+FORCEXYBILLBOARD
	+NOTIMEFREEZE
	renderstyle add
	scale 0.06
	alpha 0.8
	states
	{
	Spawn:
		TNT1 A 0
		HP75 A 2 bright
		stop
	}
}

Actor freeman_slot7selected : Inventory
{
	Inventory.MaxAmount 1
	+INVENTORY.IGNORESKILL
	+INVENTORY.UNDROPPABLE
	-INVENTORY.INVBAR
}

Actor HLGluonBeamEffect 
{
	Alpha 0.5
	+NOINTERACTION
	States
	{
		Spawn:
			TNT1 A 0
			NULL A 2
			stop
	}
}