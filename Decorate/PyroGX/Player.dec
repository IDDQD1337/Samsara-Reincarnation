Actor DescentPyroGX : PlayerPawn
{
	//+NOGRAVITY
	+DONTFALL
	+NOBLOOD
	Player.DisplayName "PyroGX"
	Player.SoundClass "Pyro-GX"
	Player.StartItem "DescentClass", 1
	Player.StartItem "IsSamsaraClass", 1
	Player.StartItem "DescentLaser"
	Player.StartItem "Clip", 50
	Player.StartItem "DescentWeapon"
	Player.StartItem "DescentWeaponPadUp"
	Player.StartItem "DescentWeaponPadDown"
	Player.ColorRange 112,127
	Species "Player"
	Speed 1
	Health 100
	Radius 16
	Height 56
	Mass 100
	States
	{
		Spawn:
			DS00 A -1
			Stop
		Spawn:
			DS00 A -1
			Stop
		Melee:
		Missile:
			DS00 A 15
			Goto Spawn
		Pain:
			DS00 A 15 A_Pain
			Goto Spawn
        Pain.DoomDamageTypeStunner:
            TNT1 A 0 A_JumpIfInventory("PowerSamsaraDoomguyStrStunnerSpeedDebuff",1,"Pain") // ensure the timer doesn't reset when you are already slowed
            TNT1 A 0 A_GiveInventory("SamsaraDoomguyStrStunnerSpeedDebuff") // slows down, but not stopped completely
            goto Pain
		XDeath:
		Death:
			DS00 A 0 A_PlayerScream
			DS00 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 5 A_SpawnItemEx("DescentSmallExplosion",random(-10,10),random(-10,10),32+random(-10,10))
			DS00 A 0 A_SpawnItemEx("DescentPyroGXDebris1",0,0,32,frandom(4,8),0,frandom(-8,8),random(0,359),SXF_TRANSFERTRANSLATION)
			DS00 A 0 A_SpawnItemEx("DescentPyroGXDebris2",0,0,32,frandom(4,8),0,frandom(-8,8),random(0,359),SXF_TRANSFERTRANSLATION)
			DS00 A 0 A_SpawnItemEx("DescentPyroGXDebris3",0,0,32,frandom(4,8),0,frandom(-8,8),random(0,359),SXF_TRANSFERTRANSLATION)
			DS00 A 0 A_SpawnItemEx("DescentPyroGXDebris4",0,0,32,frandom(4,8),0,frandom(-8,8),random(0,359),SXF_TRANSFERTRANSLATION)
			DS00 A 0 A_SpawnItemEx("DescentPyroGXDebris5",0,0,32,frandom(4,8),0,frandom(-8,8),random(0,359),SXF_TRANSFERTRANSLATION)
			TNT1 A -1
			Stop
	}
}

Actor DescentPyroGXDebris1
{
	Projectile
	Damage (0)
	Speed 0
	Height 8
	Radius 4
	+BLOODLESSIMPACT
	+NOGRAVITY
	+SKYEXPLODE
	var int user_rotX;
	var int user_rotY;
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_SetUserVar("user_rotX",frandom(2.5,5.0)*(1-2*random(0,1)))
			TNT1 A 0 A_SetUserVar("user_rotY",frandom(2.5,5.0)*(1-2*random(0,1)))
		SpawnLoop:
			DS00 A 0 A_SetPitch(pitch+user_rotX)
			DS00 A 1 A_SetPitch(pitch+user_rotY)
			Loop
		Death:
			TNT1 A 0 A_Jump(256,"Explosion1","Explosion2","Explosion3","Explosion4")
		Explosion1:
			TNT1 A 1 A_SpawnItemEx("DescentBigExplosion1")
			Stop
		Explosion2:
			TNT1 A 1 A_SpawnItemEx("DescentBigExplosion2")
			Stop
		Explosion3:
			TNT1 A 1 A_SpawnItemEx("DescentBigExplosion3")
			Stop
		Explosion4:
			TNT1 A 1 A_SpawnItemEx("DescentBigExplosion4")
			Stop
	}
}

Actor DescentPyroGXDebris2 : DescentPyroGXDebris1 {}
Actor DescentPyroGXDebris3 : DescentPyroGXDebris1 {}
Actor DescentPyroGXDebris4 : DescentPyroGXDebris1 {}
Actor DescentPyroGXDebris5 : DescentPyroGXDebris1 {}

Actor DescentRamPuff
{
	+NOGRAVITY
	+NOINTERACTION
	States
	{
		Spawn:
		Crash:
			TNT1 A 0 NoDelay A_Playsound("Descent/Player/HitWall",CHAN_BODY)
			TNT1 A 1
			Stop
	}
}

Actor DescentRamPuffCoop : DescentRamPuff { Species "Player" +THRUSPECIES +MTHRUSPECIES }
