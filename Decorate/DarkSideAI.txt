// These actors are mostly used in ReMixer when Jerec kills a player while downed. He'll
// spawn an evil version of the character the player has selected and in cooperative games,
// they'll fight the players using the slain player's color. It can also be used for promotional
// material and other random stuff, which is why it's been moved here instead of staying in ReMixer.

// Doom classes
Actor Doom_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was fragged by a corrupted Doomguy."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	CameraHeight 40
	+FLOORCLIP	
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doomguy"
    painsound "DarkSideAI/Doomguy/Pain"
    deathsound "DarkSideAI/Doomguy/Death"
    activesound "DarkSideAI/Doomguy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
	Spawn:
		DGUY A 5 A_Look
		loop
	See:
		DGUY AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DGUY E 1 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/shotgf")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 7, 5, "DoomBulletPuff")
		DGUY E 26 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/pistol")  
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuff")
		DGUY E 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		DGUY G 4 A_Pain
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
        DGUY H 10
		DGUY I 10 A_Scream		
		DGUY J 10 A_NoBlocking
		DGUY KLM 10
		DGUY N -1
		stop
    Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_PlaySound("DarkSideAI/Doomguy/Burn", CHAN_VOICE)
        DBRN ABCDE 5 Bright
        DBRN FFGHHIIJJK 3 Bright
        DBRN LMNOP 5 Bright
        DBRN QR 4 Bright
        DBRN STU 6
        DBRN V -1
        stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DGUY O 5
        DGUY P 5 A_PlaySound("DarkSideAI/Doomguy/XDeath", CHAN_VOICE)
        DGUY Q 5 A_NoBlocking
        DGUY RSTUV 5
        DGUY W -1
        Stop
	Death.DukeExplosive:
		TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")		
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	DukeGibStart:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("DukeGib_ColorSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(96, 2)
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}	
}

Actor Doom64_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o witnessed the horrors of Doom64guy's corruption."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	Scale 0.75
	-FRIENDLY
	+FLOORCLIP	
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doom 64 Guy"
    painsound "DarkSideAI/Doom64guy/Pain"
    deathsound "DarkSideAI/Doom64guy/Death"
    activesound "DarkSideAI/Doom64guy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		64DG A 5 A_Look
		loop
	See:
		64DG AAAAABBBBBCCCCCDDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		64DG E 1 A_FaceTarget
		64DG F 0 A_PlayWeaponSound("doom64guy/shotgf")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 7, 5, "Doom64BulletPuff")
		64DG E 26 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuff")
		64DG R 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuff")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuff")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuff")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuff")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")  
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuff")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		64DG G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		64DG H 11
		64DG I 11 A_Scream
		64DG J 11 A_NoBlocking
		64DG KL 11
		64DG M -1
        Stop
    Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		64DF A 0
		64DF A 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF A 1 A_PlaySound("DarkSideAI/Doom64guy/Burn", CHAN_BODY)
		64DF AAAA 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(11,37),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF B 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(10,32),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF B 1 A_NoBlocking
		64DF BBBB 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(10,32),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF C 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF CCCC 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF D 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF DDDD 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF E 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF EEEE 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF F 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFF 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 4 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 5 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 6 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF F -1
        stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		64DG N 6 A_PlaySound("DarkSideAI/Doom64guy/XDeath", CHAN_VOICE)
		64DG O 6
		64DG P 6 A_NoBlocking
		64DG QRSTU 6
		64DG V -1
        Stop
	Death.DukeExplosive:
		TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")		
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	DukeGibStart:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("DukeGib_ColorSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(96, 2)
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor DoomStronghold_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o couldn't penetrate Doomguy's twisted defenses."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	CameraHeight 40
	+FLOORCLIP	
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doomguy (Stronghold)"
    painsound "DarkSideAI/Doomguy/Pain"
    deathsound "DarkSideAI/Doomguy/Death"
    activesound "DarkSideAI/Doomguy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
	Spawn:
		DGUY A 5 A_Look
		loop
	See:
		DGUY AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DGUY E 1 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/asgfir")  
		DGUY F 2 Bright A_CustomBulletAttack(3.1, 2.6, 7, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 14 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/asgfir")
		DGUY F 2 Bright A_CustomBulletAttack(3.1, 2.6, 7, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 14 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chnglp")  
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		DGUY G 4 A_Pain
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
        DGUY H 10
		DGUY I 10 A_Scream		
		DGUY J 10 A_NoBlocking
		DGUY KLM 10
		DGUY N -1
		stop
    Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_PlaySound("DarkSideAI/Doomguy/Burn", CHAN_VOICE)
        DBRN ABCDE 5 Bright
        DBRN FFGHHIIJJK 3 Bright
        DBRN LMNOP 5 Bright
        DBRN QR 4 Bright
        DBRN STU 6
        DBRN V -1
        stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DGUY O 5
        DGUY P 5 A_PlaySound("DarkSideAI/Doomguy/XDeath", CHAN_VOICE)
        DGUY Q 5 A_NoBlocking
        DGUY RSTUV 5
        DGUY W -1
        Stop
	Death.DukeExplosive:
		TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")		
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	DukeGibStart:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("DukeGib_ColorSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(96, 2)
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}	
}

// Chex Quest
Actor Chex_AI : SamsaraMonsterDarkSideAINoBlood
{
	obituary "A misguided Fred Chexter zorched %o out of this world."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	+FLOORCLIP	
	-FRIENDLY
	+DONTGIB
    BloodType "ChexBlood"
	BloodColor "White"
	Maxstepheight 8
	cameraheight 45
	Tag "Fred Chexter"
    painsound "DarkSideAI/Chexter/Pain"
    deathsound "DarkSideAI/Chexter/Death"
    activesound "DarkSideAI/Chexter/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		CHEX A 5 A_Look
		Loop
	See:
		CHEX AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CHEX E 1 A_FaceTarget
		CHEX F 0 A_PlayWeaponSound("chex/shotgf")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 7, 5, "ChexPuff")
		CHEX E 20 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/pistol")  
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuff")
		CHEX E 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		CHEX G 4 A_Pain
		goto See
	Death:	
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		CHEX H 10
		CHEX I 10 A_Scream
		CHEX J 10 A_NoBlocking
		CHEX KLM 10
		CHEX N 20
		CHEX X -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		FLEE A 3
		TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		FLEE B 20 A_PlaySound("chex/munch",0,1.0)
		FLEE C 5 A_PlaySound("chex/boop",0,0.7)
		FLEE B 5
		FLEE D 10
		TNT1 A 0 A_PlaySound("DarkSideAI/Chexter/XDeath",0,0.7)
		FLEE EFGH 5
		TNT1 A -1
        stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		CWBN A 3 A_PlaySound("DarkSideAI/Chexter/Burn", CHAN_VOICE)
		CWBN BCDEFGHI 3
		CWBN J 20
		CWBN J 0 A_PlaySoundEx("chex/burndeath2","body",0,0)
		CWBN KMNOP 3
		CWBN Q -1
		stop		
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Heretic
Actor Corvus_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was slain by a heretical Corvus."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	+FLOORCLIP	
	-FRIENDLY
	Maxstepheight 8
	cameraheight 45
	Tag "Corvus"
    painsound "DarkSideAI/Corvus/Pain"
    deathsound "DarkSideAI/Corvus/Death"
    activesound "DarkSideAI/Corvus/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		CORV A 5 A_Look
		loop
	See:
		CORV AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CORV E 1 A_FaceTarget
		CORV F 0 Bright A_CustomMissile("CrossbowFX1B",32, 0, 0)
		CORV F 0 Bright A_CustomMissile("CrossbowFX3B",32, 0, 4.5)
		CORV F 2 Bright A_CustomMissile("CrossbowFX3B",32, 0, -4.5)
		CORV E 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")  
		CORV F 2 Bright A_CustomBulletAttack(3.6,0,1,random(17,30),"BlasterPuff2")
		CORV E 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		CORV G 4 A_Pain
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		CORV H 6
		CORV I 6 A_Scream
		CORV JK 6
		CORV L 6 A_NoBlocking
		CORV MNO 6
		CORV P -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		CORV Q 5 A_PlaySound("DarkSideAI/Corvus/XDeath", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("BloodySkull2",0,0,46,random(-1,1),random(-1,1),5)
		CORV R 5 A_NoBlocking
		CORV STUVWX 5
		CORV Y -1
		Stop
    Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		CRVB A 5 BRIGHT A_PlaySound("DarkSideAI/Corvus/Burn", CHAN_VOICE)
		CRVB B 4 BRIGHT
		CRVB C 5 BRIGHT
		CRVB D 4 BRIGHT
		CRVB E 5 BRIGHT
		CRVB F 4 BRIGHT
		CRVB G 5 BRIGHT
		CRVB H 4 BRIGHT
		CRVB I 5 BRIGHT
		CRVB J 4 BRIGHT
		CRVB K 5 BRIGHT
		CRVB L 4 BRIGHT
		CRVB M 5 BRIGHT
		CRVB N 4 BRIGHT
		CRVB O 5 BRIGHT A_NoBlocking
		CRVB P 4 BRIGHT
		CRVB Q 5 BRIGHT
		CRVB R 4 BRIGHT
		TNT1 A -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Wolfenstein Classes
Actor Blaskowicz_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was shot by a rouge B.J. Blazkowicz."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	+FLOORCLIP	
	-FRIENDLY
	Maxstepheight 8
	cameraheight 45
	Tag "B.J. Blazkowicz"
    painsound "DarkSideAI/Blazkowicz/Pain"
    deathsound "DarkSideAI/Blazkowicz/Death"
    activesound "DarkSideAI/Blazkowicz/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		BJBL A 5 A_Look
		loop
	See:
		BJBL AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/pistol")  
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuff2Bloodless")
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 12 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		TNT1 A 0 A_MonsterRefire(20,"See")
		goto Missile+1
	FireSlot4:
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_MonsterRefire(20,"See")
		goto FireSlot4	
	Pain:
		BJBL G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 G 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		BJBL G 8 A_Scream
		BJBL H 8 A_NoBlocking
		BJBL I 8
		BJBL JKL 8
		BJBL M -1
		stop
	XDeath:	
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		BJGB A 5 A_PlaySound("DarkSideAI/Blazkowicz/Death", CHAN_VOICE)
		BJGB B 5 A_NoBlocking
		BJGB C 5
		BJGB DEFGHI 4
		BJGB J -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Blaskowicz_SOD_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o confused an evil B.J. Blazkowicz for an ally."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	+FLOORCLIP	
	-FRIENDLY
	Maxstepheight 8
	cameraheight 45
	Tag "B.J. Blazkowicz (Lost Missions)"
    painsound "DarkSideAI/Blazkowicz/Pain"
    deathsound "DarkSideAI/Blazkowicz/Death"
    activesound "DarkSideAI/Blazkowicz/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		BJBL A 5 A_Look
		loop
	See:
		BJBL AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/pistol2")  
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuff2Bloodless")
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 12 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		TNT1 A 0 A_MonsterRefire(20,"See")
		goto Missile+1
	FireSlot4:
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")  
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffBloodless")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL E 0 A_MonsterRefire(20,"See")
		goto FireSlot4	
	Pain:
		BJBL G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 G 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		BJBL G 8 A_Scream
		BJBL H 8 A_NoBlocking
		BJBL I 8
		BJBL JKL 8
		BJBL M -1
		stop
	XDeath:	
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		BJGB A 5 A_PlaySound("DarkSideAI/Blazkowicz/Death", CHAN_VOICE)
		BJGB B 5 A_NoBlocking
		BJGB C 5
		BJGB DEFGHI 4
		BJGB J -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Blaskowicz_Totenkopf_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was de-nazified by a corrupted B.J. Blazkowicz."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	+FLOORCLIP	
	-FRIENDLY
	Maxstepheight 8
	cameraheight 45
	Tag "B.J. Blazkowicz (Castle Totenkopf SDL)"
    painsound "DarkSideAI/Blazkowicz/Pain"
    deathsound "DarkSideAI/BlazkowiczTK/Death"
    activesound "DarkSideAI/Blazkowicz/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		TK61 A 5 A_Look
		loop
	See:
		TK61 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot3")
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")  
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")  
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")  
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")  
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")  
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 8 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		TNT1 A 0 A_MonsterRefire(20,"See")
		goto Missile+1
	FireSlot3:
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")  
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_MonsterRefire(20,"See")
		goto FireSlot3	
	Pain:
		TNT1 A 0 A_Jump(128,2)
		TK61 I 4 A_Pain
		Goto See
		TK61 J 4 A_Pain
		Goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		TK61 K 8 A_Scream
		TK61 L 8 A_NoBlocking
		TK61 M 8
		TK61 N 8
		TK61 O -1
		stop
	XDeath:	
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TK61 P 5 A_PlaySound("DarkSideAI/BlazkowiczTK/Death", CHAN_VOICE)
		TK61 Q 5 A_NoBlocking
		TK61 R 5
		TK61 STUVWX 4
		TK61 Y -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Hexen Classes
Actor Parias_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o's neck was snapped by an unholy Parias."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	-FRIENDLY
	+FLOORCLIP	
	Maxstepheight 8
	cameraheight 45
	Tag "Parias"
    painsound "DarkSideAI/Parias/Pain"
    deathsound "DarkSideAI/Parias/Death"
    activesound "DarkSideAI/Parias/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		CLER A 5 A_Look
		loop
	See:
		CLER AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(164, "FireSlot4")
		CLER E 0 Bright A_PlayWeaponSound("Hexen/FrostFang/Fire")
		CLER E 12 A_FaceTarget
		CLER F 0 Bright A_CustomMissile("FrostFangBall", 32, 4, 0, CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("FrostFangBall", 32, -4, 0, CMF_AIMDIRECTION)
		CLER E 20 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")  
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		CLER H 4
		CLER H 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")		
		CLER I 6
		CLER J 6 A_Scream
		CLER KL 6
		CLER M 6 A_NoBlocking
		CLER NOP 6
		CLER Q -1
		Stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")		
		CLER R 5 A_PlaySound("DarkSideAI/Parias/XDeath", CHAN_VOICE)
		CLER S 5
		CLER T 5 A_NoBlocking
		CLER UVWXYZ 5
		CLER [ -1
		Stop
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		CLFR Z 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		CLFR Z 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		CLFR Z 0 A_PlayWeaponSound("misc/freeze")
		CLFR Z 70 A_UnsetSolid
		CLFR Z 0 A_IceGuyDie
		CLFR Z 1 A_IceGuyDie
		TNT1 A 0
		stop
    Burn:
        CBRN C 5 BRIGHT A_PlaySound("DarkSideAI/Parias/Burn", CHAN_BODY)
        CBRN D 4 BRIGHT
        CBRN G 5 BRIGHT
        CBRN H 4 BRIGHT A_Scream
        CBRN I 5 BRIGHT
        CBRN J 4 BRIGHT
        CBRN K 5 BRIGHT
        CBRN L 4 BRIGHT
        CBRN M 5 BRIGHT
        CBRN N 4 BRIGHT
        CBRN O 5 BRIGHT
        CBRN P 4 BRIGHT
        CBRN Q 5 BRIGHT
        CBRN R 4 BRIGHT
        CBRN S 5 BRIGHT A_NoBlocking
        CBRN T 4 BRIGHT
        CBRN U 5 BRIGHT
        CBRN V 4 BRIGHT
        TNT1 A 8
        Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Daedolon_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was poisoned by Daedolon's evil magic."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	-FRIENDLY
	+FLOORCLIP	
	Maxstepheight 8
	cameraheight 45
	Tag "Daedolon"
    painsound "DarkSideAI/Daedolon/Pain"
    deathsound "DarkSideAI/Daedolon/Death"
    activesound "DarkSideAI/Daedolon/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		MGE2 A 5 A_Look
		loop
	See:
		MGE2 AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(208, "FireSlot2")
		MGE2 E 1 A_FaceTarget
		MGE2 F 0 A_PlayWeaponSound("MageWandFire") 
		MGE2 F 2 Bright A_CustomMissile("MageWandMissile2",32)
		MGE2 E 11 A_FaceTarget
		MGE2 E 1 A_FaceTarget
		MGE2 F 0 A_PlayWeaponSound("MageWandFire") 
		MGE2 F 2 Bright A_CustomMissile("MageWandMissile2",32)
		MGE2 E 11 A_FaceTarget
		MGE2 E 1 A_FaceTarget
		MGE2 E 1 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		MGE2 E 1 A_FaceTarget
		TNT1 A 0 A_PlayWeaponSound("MageShardsFire")
		TNT1 A 0 A_CustomMissile("FrostMissile",36,6,14,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",34,4,9,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",32,0,5,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",36,-6,-14,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",34,-4,-9,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",32,0,-5,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",38,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",41,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",44,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",30,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",29,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",28,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",42,1,4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",30,1,4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",42,-1,-4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",30,-1,-4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",38)
		MGE2 F 2 Bright 
		MGE2 E 25 A_FaceTarget
		MGE2 E 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		MGE2 G 4
		MGE2 G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")		
		MGE2 H 6
		MGE2 I 6 A_PlaySound("DarkSideAI/Daedolon/Death", CHAN_VOICE)
		MGE2 JK 6
		MGE2 L 6 A_NoBlocking
		MGE2 MN 6
		MGE2 N -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")		
		MGE2 O 5 A_PlaySound("DarkSideAI/Daedolon/XDeath", CHAN_VOICE)
		MGE2 P 5
		MGE2 Q 5 A_NoBlocking
		MGE2 RSTUVW 5
		MGE2 X -1
		Stop	
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		MGE2 Y 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		MGE2 Y 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		MGE2 Y 0 A_PlayWeaponSound("misc/freeze")
		MGE2 Y 70 A_UnsetSolid
		MGE2 Y 0 A_IceGuyDie
		MGE2 Y 1 A_IceGuyDie
		TNT1 A 0
    Burn:
		MFDH E 5 BRIGHT A_PlaySound("DarkSideAI/Daedolon/Burn", CHAN_BODY)
		MFDH F 4 BRIGHT
		CBRN G 5 BRIGHT
		CBRN H 4 BRIGHT A_Scream
		CBRN I 5 BRIGHT
		CBRN J 4 BRIGHT
		CBRN K 5 BRIGHT
		CBRN L 4 BRIGHT
		CBRN M 5 BRIGHT
		CBRN N 4 BRIGHT
		CBRN O 5 BRIGHT
		CBRN P 4 BRIGHT
		CBRN Q 5 BRIGHT
		CBRN R 4 BRIGHT
		CBRN S 5 BRIGHT A_NoBlocking
		CBRN T 4 BRIGHT
		CBRN U 5 BRIGHT
		CBRN V 4 BRIGHT
        TNT1 A 8
        Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Baratus_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o's skull was smashed by a corrupted Baratus."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	monster
	-FRIENDLY
	+FLOORCLIP	
	Maxstepheight 8
	cameraheight 45
	Tag "Baratus"
    painsound "DarkSideAI/Baratus/Pain"
    deathsound "DarkSideAI/Baratus/Death"
    activesound "DarkSideAI/Baratus/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		FGT2 A 5 A_Look
		loop
	See:
		FGT2 AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(208, "FireSlot2")
		FGT2 E 1 A_FaceTarget
		FGT2 E 0 A_PlayWeaponSound("FighterHammerMiss")  
		FGT2 F 2 Bright A_CustomMissile("HammerMissileDM",32)
		FGT2 E 24 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		FGT2 E 1 A_FaceTarget
		FGT2 E 0 A_PlayWeaponSound("FighterHammerMiss")  
		FGT2 F 2 Bright A_CustomMissile("Hexen_FSpearFX2",32)
		FGT2 E 24 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto FireSlot2
	Pain:
		FGT2 G 4
		FGT2 G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")		
		FGT2 H 6
		FGT2 I 6 A_PlaySound("DarkSideAI/Baratus/Death", CHAN_VOICE)
		FGT2 JK 6
		FGT2 L 6 A_NoBlocking
		FGT2 MN 6
		FGT2 N -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")		
		FGT2 O 5 A_PlaySound("DarkSideAI/Baratus/XDeath", CHAN_VOICE)
		FGT2 P 5 A_SpawnItemEx("SamsaraBaratusBloodySkull",0,0,46,random(-1,1),random(-1,1),5)
		FGT2 Q 5 A_NoBlocking
		FGT2 RSTUV 5
		FGT2 W -1
		Stop	
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		FGT2 X 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		FGT2 X 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		FGT2 X 0 A_PlayWeaponSound("misc/freeze")
		FGT2 X 70 A_UnsetSolid
		FGT2 X 0 A_IceGuyDie
		FGT2 X 1 A_IceGuyDie
		TNT1 A 0
    Burn:
		HFDH A 5 BRIGHT A_PlaySound("DarkSideAI/Daedolon/Burn", CHAN_BODY)
		HFDH B 4 BRIGHT
		CBRN G 5 BRIGHT
		CBRN H 4 BRIGHT A_Scream
		CBRN I 5 BRIGHT
		CBRN J 4 BRIGHT
		CBRN K 5 BRIGHT
		CBRN L 4 BRIGHT
		CBRN M 5 BRIGHT
		CBRN N 4 BRIGHT
		CBRN O 5 BRIGHT
		CBRN P 4 BRIGHT
		CBRN Q 5 BRIGHT
		CBRN R 4 BRIGHT
		CBRN S 5 BRIGHT A_NoBlocking
		CBRN T 4 BRIGHT
		CBRN U 5 BRIGHT
		CBRN V 4 BRIGHT
        TNT1 A 8
        Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Duke Nukem 3D Classes
Actor Duke_AI : SamsaraMonsterDarkSideAIColored
{
	obituary "%o was smacked upside the head by a corrupted Duke Nukem."
    scale 0.725
    radius 16
    height 56
    health 1000
    mass 100
    speed 8
	monster
	-FRIENDLY
	+FLOORCLIP	
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	Tag "Duke Nukem"
    painsound "duke/pain100"
    deathsound "DarkSideAI/Duke/Death"
    activesound "duke/bosssee"
	var int user_scalex;
	var int user_scaley;
	BloodType "DukeBlood"
	BloodColor "ff 40 00"
	States
    {	
    Spawn:
		DUKE A 5 A_Look
		loop
	See:
		DUKE AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DUKE E 1 A_FaceTarget
		DUKE V 0 A_PlayWeaponSound("duke/mossberg")  
		DUKE F 2 Bright A_CustomBulletAttack(3.5, 2.5, 7, 10, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 22 A_FaceTarget
		DUKE E 6 A_PlaySound("duke/mosspump")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")  
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_CPOSRefire
		goto FireSlot4
    Pain:
		DUKE A 2 A_Pain
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUK2 A 10
		DUK2 B 10 A_Scream
		DUK2 C 10 A_NoBlocking
		DUK2 DE 10
		DUK2 F -1
		stop
	Death.DukeDamage:
	Death.DukePistol:
		"####" A 0 A_Jump(218,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		"####" A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		"####" A 0 A_Jump(64,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.DukeExplosive:
		"####" A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	DukeGibStart:
		"####" A 0 A_Jump(96,"XDeath")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Ice")
		wait
	Death.DukePlasma:
        "####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Stop
        "####" "#" 1 A_NoBlocking
        "####" "#" 0 A_Jump(218,2)
        "####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
        "####" "#" 0 ACS_NamedExecuteAlways("DN64PlasmaDeath")
        "####" "#" 3 A_SpawnItem("Duke64PlasmaEffectSmall")
        "####" "#" 0 A_GiveInventory("EnemyZorched",1)
        "####" "#" 27 A_Scream
        TNT1 A 1 A_SetTranslucent(1,0)
		TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
        TNT1 A -1
        Stop
	XDeath:
        TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUKE A 5
		TNT1 A 0 A_PlaySound("DarkSideAI/Duke/XDeath", CHAN_VOICE)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs1",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs2",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAA 0 A_SpawnItemEx("DukeJibs3",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs4",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs5",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAAAAA 0 A_SpawnItemEx("DukeJibs6",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_SpawnItemEx("DukeBloodPool_Duke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_VOICE)
		TNT1 A 5 A_NoBlocking
		TNT1 A -1
		Stop
    Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathDuke")
		TNT1 A 5 A_PlaySound("DarkSideAI/Duke/Burn", CHAN_VOICE)
		TNT1 A -1
        stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Duke_LAB_AI : SamsaraMonsterDarkSideAIColored
{
	obituary "A corrupted Duke Nukem left a sandal-print on %o's face."
    scale 0.725
    radius 16
    height 56
    health 1000
    mass 100
    speed 8
	monster
	-FRIENDLY
	+FLOORCLIP	
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	Tag "Duke Nukem (Life's A Beach)"
    painsound "duke/pain100"
    deathsound "DarkSideAI/Duke/Death"
    activesound "duke/bosssee"
	var int user_scalex;
	var int user_scaley;
	BloodType "DukeBlood"
	BloodColor "ff 40 00"
	States
    {	
    Spawn:
		DUKE I 5 A_Look
		loop
	See:
		DUKE IIIIJJJJKKKKLLLL 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DUKE M 1 A_FaceTarget
		DUKE N 0 A_PlayWeaponSound("duke/mossberg2")  
		DUKE N 2 Bright A_CustomBulletAttack(3.5, 2.5, 7, 10, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 22 A_FaceTarget
		DUKE M 6 A_PlaySound("duke/mosspump")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")  
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_CPOSRefire
		goto FireSlot4
    Pain:
		DUKE I 2 A_Pain
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUK2 N 10
		DUK2 O 10 A_Scream
		DUK2 P 10 A_NoBlocking
		DUK2 QR 10
		DUK2 S -1
		stop
	Death.DukeDamage:
	Death.DukePistol:
		"####" A 0 A_Jump(218,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		"####" A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		"####" A 0 A_Jump(64,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.DukeExplosive:
		"####" A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	DukeGibStart:
		"####" A 0 A_Jump(96,"XDeath")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Ice")
		wait
	Death.DukePlasma:
        "####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Stop
        "####" "#" 1 A_NoBlocking
        "####" "#" 0 A_Jump(218,2)
        "####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
        "####" "#" 0 ACS_NamedExecuteAlways("DN64PlasmaDeath")
        "####" "#" 3 A_SpawnItem("Duke64PlasmaEffectSmall")
        "####" "#" 0 A_GiveInventory("EnemyZorched",1)
        "####" "#" 27 A_Scream
        TNT1 A 1 A_SetTranslucent(1,0)
		TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
        TNT1 A -1
        Stop
	XDeath:
        TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUKE I 5
		TNT1 A 0 A_PlaySound("DarkSideAI/Duke/XDeath", CHAN_VOICE)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs1",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs2",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAA 0 A_SpawnItemEx("DukeJibs3",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs4",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs5",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAAAAA 0 A_SpawnItemEx("DukeJibs6",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_SpawnItemEx("DukeBloodPool_Duke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_VOICE)
		TNT1 A 5 A_NoBlocking
		TNT1 A -1
		Stop
    Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathDuke")
		TNT1 A 5 A_PlaySound("DarkSideAI/Duke/Burn", CHAN_VOICE)
		TNT1 A -1
        stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Until Shadowlink or someone else can get the sprites for Duke64, I'll
// skip the Dark Side actor for him for now

// Marathon
Actor SecurityOfficer_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A Pfhor-brainwashed Security Officer terminated %o."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	scale 0.45
	monster
	+FLOORCLIP	
	-FRIENDLY
	Maxstepheight 8
	cameraheight 45
	Gravity 0.25
	Tag "Security Officer"
    painsound "DarkSideAI/SecOff/Pain"
    deathsound "DarkSideAI/SecOff/Death"
    activesound "DarkSideAI/SecOff/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
    Spawn:
		SDSG A 5 A_Look
		loop
	See:
		"####" BBBBBCCCCCDDDDDEEEEE 1 A_FastChase
		Loop
    Missile:
		"####" A 0 A_Jump(48, "FireSlot4")
		SDSG B 1 A_FaceTarget
		SDSG B 0 A_PlayWeaponSound("marathon/shotgun/fire")  
		SDSG FFFFFFFFF 0 A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG F 2 Bright A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG B 8 A_FaceTarget
		SDSG B 0 A_PlayWeaponSound("marathon/shotgun/fire")  
		SDSG GGGGGGGGG 0 A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG G 2 Bright A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG B 12 A_FaceTarget
		SDSG B 0 A_PlayWeaponSound("marathon/shotgun/reload")
		SDSG B 12 A_FaceTarget
		SDSG A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")  
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		"####" Z 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		SOPL N 6 
		SOPL O 6 A_Scream
		SOPL P 6 A_NoBlocking
		SOPL Q 6
		SOPL S 6
		SOPL T -1
		stop
    Burn:
        TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 ThrustThingZ(0, random(4,20), 0, 0)
		TNT1 A 0 A_Recoil(random(1,3))
		TNT1 A 0 A_PlaySound("DarkSideAI/SecOff/Burn", CHAN_VOICE)
		TNT1 A 0 A_UnsetSolid
		SOPL U 5 Bright
    Burn2:
        SOPL U 5 Bright A_CheckFloor("Burn3")
        loop
    Burn3:
        SOPL VWX 7 Bright
        SOPL Y -1
        stop
    Death.MarathonFusion:
    XDeath:
        TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 ThrustThingZ(0, random(8,24), 0, 0)
        TNT1 A 0 A_Recoil(random(1,3))
        TNT1 A 0 A_UnsetSolid
        TNT1 A 0 A_Scream
        SOPL H 5
    XDeath2:
        SOPL H 5 A_CheckFloor("XDeath3")
        loop
    XDeath3:
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
        SOPL I 4 A_PlaySound("DarkSideAI/SecOff/XDeath", CHAN_VOICE)
        SOPL J 4 A_NoBlocking
        SOPL KL 4
        SOPL M -1
        Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop		
	}
}

// Quake
Actor Ranger_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was gibbed by a corrupted Ranger."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	scale 0.27
	monster
	CameraHeight 40
	+FLOORCLIP	
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Gravity 0.75
	Tag "Ranger"
    painsound "DarkSideAI/Ranger/Pain"
    deathsound "DarkSideAI/Ranger/Death"
    activesound "DarkSideAI/Ranger/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
	Spawn:
		PLY1 ABCDE 5 A_Look
		loop
	See:
		PLY2 AAAABBBBCCCCDDDDEEEEFFFF 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/rlfire")  
		PLY3 B 6 Bright A_CustomMissile("QuakeRocket", 32)
		PLY3 CDEF 6 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,-4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,-4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,-4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")  
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		PLY4 A 3 A_Pain
		PLY4 BCDEF 3
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"----" A 0 A_Jump(256,"death1","death2","death3","death4","death5")
	Death1:
		PLY5 A 3
		PLY5 B 3 A_Scream
		PLY5 C 3 A_NoBlocking
		PLY5 DEFGHIJ 3
		PLY5 K -1
		Stop
	Death2:
		PLY6 A 3
		PLY6 B 3 A_Scream
		PLY6 C 3 A_NoBlocking
		PLY6 DEFGH 3
		PLY6 I -1
		Stop
	Death3:
		PLY7 A 3
		PLY7 B 3 A_Scream
		PLY7 C 3 A_NoBlocking
		PLY7 DEFGHIJKLMN 3
		PLY7 O -1
		Stop
	Death4:
		PLY8 A 3
		PLY8 B 3 A_Scream
		PLY8 C 3 A_NoBlocking
		PLY8 DEFGH 3
		PLY8 I -1
		Stop
	Death5:
		PLY9 A 3
		PLY9 B 3 A_Scream
		PLY9 C 3 A_NoBlocking
		PLY9 DEFGH 3
		PLY9 I -1
		Stop
	Death.Drowning:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		"----" A 0 A_Jump(256,"ddrown1","ddrown2","ddrown3","ddrown4","ddrown5")
	ddrown1:
		PLY5 A 3
		PLY5 B 3 A_PlaySound("ranger/drown", CHAN_VOICE)
		PLY5 C 3 A_NoBlocking
		PLY5 DEFGHIJ 3
		PLY5 K -1
		Stop
	ddrown2:
		PLY6 A 3
		PLY6 B 3 A_PlaySound("ranger/drown", CHAN_VOICE)
		PLY6 C 3 A_NoBlocking
		PLY6 DEFGH 3
		PLY6 I -1
		Stop
	ddrown3:
		PLY7 A 3
		PLY7 B 3 A_PlaySound("ranger/drown", CHAN_VOICE)
		PLY7 C 3 A_NoBlocking
		PLY7 DEFGHIJKLMN 3
		PLY7 O -1
		Stop
	ddrown4:
		PLY8 A 3
		PLY8 B 3 A_PlaySound("ranger/drown", CHAN_VOICE)
		PLY8 C 3 A_NoBlocking
		PLY8 DEFGH 3
		PLY8 I -1
		Stop
	ddrown5:
		PLY9 A 3
		PLY9 B 3 A_PlaySound("ranger/drown", CHAN_VOICE)
		PLY9 C 3 A_NoBlocking
		PLY9 DEFGH 3
		PLY9 I -1
		Stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnDebris("Quake_RangerHead")
		TNT1 A 0 A_SpawnItemEx("QuakeGibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("DarkSideAI/Ranger/XDeath", CHAN_VOICE)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
        Stop
	Burn:
		"----" A 1
		"----" A 0 A_Jump(256,"Burn1","Burn2","Burn3","Burn4","Burn5")
	Burn1:
		PLZ5 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ5 B 3 A_PlaySound("*burndeath")
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ5 C 3 A_NoBlocking
		PLZ5 DEFGHIJ 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ5 K -1
        Stop
	Burn2:
		PLZ6 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ6 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ6 C 3 A_NoBlocking
		PLZ6 DEFGH 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ6 I -1
        Stop
	Burn3:
		PLZ7 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ7 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ7 C 3 A_NoBlocking
		PLZ7 DEFGHIJKLMN 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ7 O -1
        Stop
	Burn4:
		PLZ8 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ8 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ8 C 3 A_NoBlocking
		PLZ8 DEFGH 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ8 I -1
        Stop
	Burn5:
		PLZ9 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ9 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ9 C 3 A_NoBlocking
		PLZ9 DEFGH 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ9 I -1
        Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}	
}

// ROTT classes
Actor IPFreeley_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was bazooka'd by a twisted Ian Paul Freeley."
    radius 16
    height 56
    health 1000	
    mass 100
    speed 8
	XScale 0.68
	YScale 0.65
	Gravity 0.8125
	monster
	CameraHeight 40
	+FLOORCLIP	
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Ian Paul Freely"
    painsound "DarkSideAI/Freeley/Pain"
    deathsound "DarkSideAI/Freeley/Death"
    activesound "DarkSideAI/Freeley/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
    {	
	Spawn:
		IPFS A 5 A_Look
		loop
	See:
		IPFW AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
    Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		IPFW A 1 A_FaceTarget
		IPFW A 0 A_PlayWeaponSound("bazooka/shoot")
		IPMS E 2 Bright A_CustomMissile("RottMissileDM", 32)
		IPFW A 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")  
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", CBAF_NORANDOM)
		IPFS B 0 A_CPOSRefire
		goto FireSlot4	
	Pain:
		IPFS A 6 A_Pain
		goto See	
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		IPFD B 4 A_Scream
		IPFD C 4 A_NoBlocking
		IPFD DEFG 4
		IPFD A -1
		stop
    Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItem("BurningSkeleton") 
		TNT1 A -1
        stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0) 
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
        Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:	
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}	
}