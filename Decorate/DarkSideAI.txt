// These actors are mostly used in ReMixer when Jerec kills a player while downed. He'll
// spawn an evil version of the character the player has selected and in cooperative games,
// they'll fight the players using the slain player's color. It can also be used for promotional
// material and other random stuff, which is why it's been moved here instead of staying in ReMixer.

// Doom classes
Actor Doom_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was fragged by a corrupted Doomguy."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doomguy"
	painsound "DarkSideAI/Doomguy/Pain"
	deathsound "DarkSideAI/Doomguy/Death"
	activesound "DarkSideAI/Doomguy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		DGUY A 5 A_Look
		loop
	See:
		DGUY AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DGUY E 1 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/shotgf")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 7, 5, "DoomBulletPuffThruGhost")
		DGUY E 28 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY E 0 A_PlayWeaponSound("doomguy/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "DoomBulletPuffThruGhost")
		DGUY E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		DGUY G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DGUY H 10
		DGUY I 10 A_Scream
		DGUY J 10 A_NoBlocking
		DGUY KLM 10
		DGUY N -1
		stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_PlaySound("DarkSideAI/Doomguy/Burn", CHAN_VOICE)
		DBRN ABCDE 5 Bright
		DBRN FFGHHIIJJK 3 Bright
		DBRN LMNOP 5 Bright
		DBRN QR 4 Bright
		DBRN STU 6
		DBRN V -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DGUY O 5
		DGUY P 5 A_PlaySound("DarkSideAI/Doomguy/XDeath", CHAN_VOICE)
		DGUY Q 5 A_NoBlocking
		DGUY RSTUV 5
		DGUY W -1
		Stop
	Death.DukeExplosive:
		TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	DukeGibStart:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("DukeGib_ColorSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(96, 2)
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Doom64_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o witnessed the horrors of Doom64guy's corruption."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	Scale 0.75
	-FRIENDLY
	+FLOORCLIP
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doom 64 Guy"
	painsound "DarkSideAI/Doom64guy/Pain"
	deathsound "DarkSideAI/Doom64guy/Death"
	activesound "DarkSideAI/Doom64guy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		64DG A 5 A_Look
		loop
	See:
		64DG AAAAABBBBBCCCCCDDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		64DG E 1 A_FaceTarget
		64DG F 0 A_PlayWeaponSound("doom64guy/shotgf")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 7, 5, "Doom64BulletPuffThruGhost")
		64DG E 28 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuffThruGhost")
		64DG R 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuffThruGhost")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuffThruGhost")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuffThruGhost")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuffThruGhost")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_PlayWeaponSound("doom64guy/chngun")
		64DG F 2 Bright A_CustomBulletAttack(5.6, 0, 1, 5, "Doom64BulletPuffThruGhost")
		64DG E 0 A_Jump(8,"See")
		64DG E 2 A_FaceTarget
		64DG E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		64DG G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		64DG H 11
		64DG I 11 A_Scream
		64DG J 11 A_NoBlocking
		64DG KL 11
		64DG M -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		64DF A 0
		64DF A 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF A 1 A_PlaySound("DarkSideAI/Doom64guy/Burn", CHAN_BODY)
		64DF AAAA 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(11,37),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF B 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(10,32),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF B 1 A_NoBlocking
		64DF BBBB 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(10,32),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		64DF C 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF CCCC 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF D 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF DDDD 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF E 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF EEEE 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF F 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFF 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(8,22),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 2 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 3 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 4 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 5 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF FFFFFFFFFFFF 6 A_SpawnItemEx("Doom64GuyBurnFlame",random(-10,10),random(-10,10),random(5,12),random(-1,1),random(-1,1),random(0,2),random(-180,180),32)
		64DF F -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		64DG N 6 A_PlaySound("DarkSideAI/Doom64guy/XDeath", CHAN_VOICE)
		64DG O 6
		64DG P 6 A_NoBlocking
		64DG QRSTU 6
		64DG V -1
		Stop
	Death.DukeExplosive:
		TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	DukeGibStart:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("DukeGib_ColorSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(96, 2)
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor DoomStronghold_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o couldn't penetrate Doomguy's twisted defenses."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doomguy (Stronghold)"
	painsound "DarkSideAI/Doomguy/Pain"
	deathsound "DarkSideAI/Doomguy/Death"
	activesound "DarkSideAI/Doomguy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		DGUY A 5 A_Look
		loop
	See:
		DGUY AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DGUY E 1 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/asgfir")
		DGUY F 2 Bright A_CustomBulletAttack(3.1, 2.6, 7, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 14 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/asgfir")
		DGUY F 2 Bright A_CustomBulletAttack(3.1, 2.6, 7, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 14 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_Jump(8,"See")
		DGUY E 2 A_FaceTarget
		DGUY F 0 A_PlayWeaponSound("doomguy/stronghold/chngun")
		DGUY F 2 Bright A_CustomBulletAttack(4, 2.3, 1, 5, "SamsaraDoomguyStrBulletPuffBallisticThruGhost")
		DGUY E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		DGUY G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DGUY H 10
		DGUY I 10 A_Scream
		DGUY J 10 A_NoBlocking
		DGUY KLM 10
		DGUY N -1
		stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_PlaySound("DarkSideAI/Doomguy/Burn", CHAN_VOICE)
		DBRN ABCDE 5 Bright
		DBRN FFGHHIIJJK 3 Bright
		DBRN LMNOP 5 Bright
		DBRN QR 4 Bright
		DBRN STU 6
		DBRN V -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DGUY O 5
		DGUY P 5 A_PlaySound("DarkSideAI/Doomguy/XDeath", CHAN_VOICE)
		DGUY Q 5 A_NoBlocking
		DGUY RSTUV 5
		DGUY W -1
		Stop
	Death.DukeExplosive:
		TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"Death")
		wait
	DukeGibStart:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("DukeGib_ColorSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(96, 2)
		TNT1 A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTauntDoomguy",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Chex Quest
Actor Chex_AI : SamsaraMonsterDarkSideAINoBlood
{
	obituary "A misguided Fred Chexter zorched %o out of this world."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+DONTGIB
	+NOINFIGHTING
	BloodType "ChexBlood"
	BloodColor "White"
	Maxstepheight 8
	cameraheight 45
	Tag "Fred Chexter"
	painsound "DarkSideAI/Chexter/Pain"
	deathsound "DarkSideAI/Chexter/Death"
	activesound "DarkSideAI/Chexter/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		CHEX A 5 A_Look
		Loop
	See:
		CHEX AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CHEX E 1 A_FaceTarget
		CHEX F 0 A_PlayWeaponSound("chex/shotgf")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 7, 5, "ChexPuffThruGhost")
		CHEX E 25 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_Jump(8,"See")
		CHEX E 2 A_FaceTarget
		CHEX E 0 A_PlayWeaponSound("chex/chngun")
		CHEX F 2 Bright A_CustomBulletAttack(5, 0, 1, 5, "ChexPuffThruGhost")
		CHEX E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		CHEX G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		CHEX H 10
		CHEX I 10 A_Scream
		CHEX J 10 A_NoBlocking
		CHEX KLM 10
		CHEX N 20
		CHEX X -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		FLEE A 3
		TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		FLEE B 20 A_PlaySound("chex/munch",0,1.0)
		FLEE C 5 A_PlaySound("chex/boop",0,0.7)
		FLEE B 5
		FLEE D 10
		TNT1 A 0 A_PlaySound("DarkSideAI/Chexter/XDeath",0,0.7)
		FLEE EFGH 5
		TNT1 A -1
		stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		CWBN A 3 A_PlaySound("DarkSideAI/Chexter/Burn", CHAN_VOICE)
		CWBN BCDEFGHI 3
		CWBN J 20
		CWBN J 0 A_PlaySoundEx("chex/burndeath2","body",0,0)
		CWBN KMNOP 3
		CWBN Q -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		TNT1 AA 0 A_SpawnItemEx("Chexbit1",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit2",random(-20,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit3",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AA 0 A_SpawnItemEx("Chexbit4",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ChexCrumb",random(-16,16),random(-16,16),random(24,54),random(-450,450)/100.00,random(-450,450)/100.00,random(550,850)/100.00,random(-180,180),160)
		TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Heretic
Actor Corvus_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was slain by a heretical Corvus."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Corvus"
	painsound "DarkSideAI/Corvus/Pain"
	deathsound "DarkSideAI/Corvus/Death"
	activesound "DarkSideAI/Corvus/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		CORV A 5 A_Look
		loop
	See:
		CORV AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CORV E 1 A_FaceTarget
		CORV F 0 Bright A_CustomMissile("CrossbowFX1B",32, 0, 0)
		CORV F 0 Bright A_CustomMissile("CrossbowFX3B",32, 0, 4.5)
		CORV F 2 Bright A_CustomMissile("CrossbowFX3B",32, 0, -4.5)
		CORV E 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_Jump(8,"See")
		CORV E 4 A_FaceTarget
		CORV E 0 A_PlayWeaponSound("heretic/dragonclaw")
		CORV F 2 Bright A_CustomBulletAttack(5.6,0,1,random(4,11),"BlasterPuff2")
		CORV E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		CORV G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		CORV H 6
		CORV I 6 A_Scream
		CORV JK 6
		CORV L 6 A_NoBlocking
		CORV MNO 6
		CORV P -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		CORV Q 5 A_PlaySound("DarkSideAI/Corvus/XDeath", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("BloodySkull2",0,0,46,random(-1,1),random(-1,1),5)
		CORV R 5 A_NoBlocking
		CORV STUVWX 5
		CORV Y -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		CRVB A 5 BRIGHT A_PlaySound("DarkSideAI/Corvus/Burn", CHAN_VOICE)
		CRVB B 4 BRIGHT
		CRVB C 5 BRIGHT
		CRVB D 4 BRIGHT
		CRVB E 5 BRIGHT
		CRVB F 4 BRIGHT
		CRVB G 5 BRIGHT
		CRVB H 4 BRIGHT
		CRVB I 5 BRIGHT
		CRVB J 4 BRIGHT
		CRVB K 5 BRIGHT
		CRVB L 4 BRIGHT
		CRVB M 5 BRIGHT
		CRVB N 4 BRIGHT
		CRVB O 5 BRIGHT A_NoBlocking
		CRVB P 4 BRIGHT
		CRVB Q 5 BRIGHT
		CRVB R 4 BRIGHT
		TNT1 A -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Wolfenstein Classes
Actor Blaskowicz_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was shot by a rouge B.J. Blazkowicz."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "B.J. Blazkowicz"
	painsound "DarkSideAI/Blazkowicz/Pain"
	deathsound "DarkSideAI/Blazkowicz/Death"
	activesound "DarkSideAI/Blazkowicz/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		BJBL A 5 A_Look
		loop
	See:
		BJBL AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/pistol")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuff2Bloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuff2Bloodless",128)
		BJBL E 12 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		TNT1 A 0 A_MonsterRefire(20,"See")
		goto Missile+1
	FireSlot4:
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_MonsterRefire(20,"See")
		goto FireSlot4
	Pain:
		BJBL G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 G 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		BJBL G 8 A_Scream
		BJBL H 8 A_NoBlocking
		BJBL I 8
		BJBL JKL 8
		BJBL M -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		BJGB A 5 A_PlaySound("DarkSideAI/Blazkowicz/Death", CHAN_VOICE)
		BJGB B 5 A_NoBlocking
		BJGB C 5
		BJGB DEFGHI 4
		BJGB J -1
		Stop
	/*Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		BJBR A 4 A_Scream
		BJBR B 4 A_NoBlocking
		BJBR CDEFGH 4
		BJBR I -1
		stop*/
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Blaskowicz_SOD_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o confused an evil B.J. Blazkowicz for an ally."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "B.J. Blazkowicz (Lost Missions)"
	painsound "DarkSideAI/Blazkowicz/Pain"
	deathsound "DarkSideAI/Blazkowicz/Death"
	activesound "DarkSideAI/Blazkowicz/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		BJBL A 5 A_Look
		loop
	See:
		BJBL AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/pistol2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuff2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuff2Bloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuff2Bloodless",128)
		BJBL E 12 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		TNT1 A 0 A_MonsterRefire(20,"See")
		goto Missile+1
	FireSlot4:
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_Jump(8,"See")
		BJBL E 1 A_FaceTarget
		BJBL E 0 A_PlayWeaponSound("wolfen/chaingun2")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,7,"BlankPuffThruGhost")
		BJBL F 0 Bright A_CustomBulletAttack(0,0,1,2,"BlankPuffThruGhostBloodless",256)
		BJBL F 2 Bright A_CustomBulletAttack(0,0,1,1,"BlankPuffThruGhostBloodless",128)
		BJBL E 0 A_MonsterRefire(20,"See")
		goto FireSlot4
	Pain:
		BJBL G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 G 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		BJBL G 8 A_Scream
		BJBL H 8 A_NoBlocking
		BJBL I 8
		BJBL JKL 8
		BJBL M -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		BJGB A 5 A_PlaySound("DarkSideAI/Blazkowicz/Death", CHAN_VOICE)
		BJGB B 5 A_NoBlocking
		BJGB C 5
		BJGB DEFGHI 4
		BJGB J -1
		Stop
	/*Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		BJBR A 4 A_Scream
		BJBR B 4 A_NoBlocking
		BJBR CDEFGH 4
		BJBR I -1
		stop*/
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Blaskowicz_Totenkopf_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was de-nazified by a corrupted B.J. Blazkowicz."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "B.J. Blazkowicz (Castle Totenkopf SDL)"
	painsound "DarkSideAI/Blazkowicz/Pain"
	deathsound "DarkSideAI/BlazkowiczTK/Death"
	activesound "DarkSideAI/Blazkowicz/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		TK61 A 5 A_Look
		loop
	See:
		TK61 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot3")
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 2 A_FaceTarget
		TK61 V 0 A_PlayWeaponSound("Totenkopf/atkmauser")
		TK61 G 1 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 8 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		TNT1 A 0 A_MonsterRefire(20,"See")
		goto Missile+1
	FireSlot3:
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_Jump(8,"See")
		TK61 F 2 A_FaceTarget
		TK61 F 0 A_PlayWeaponSound("Totenkopf/atkstg44")
		TK61 G 2 Bright A_CustomMissile("Totenkopf_Tracer_Mauser",32,0,random(-8,8))
		TK61 F 0 A_MonsterRefire(20,"See")
		goto FireSlot3
	Pain:
		TNT1 A 0 A_Jump(128,2)
		TK61 I 4 A_Pain
		Goto See
		TK61 J 4 A_Pain
		Goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		TK61 K 8 A_Scream
		TK61 L 8 A_NoBlocking
		TK61 M 8
		TK61 N 8
		TK61 O -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TK61 P 5 A_PlaySound("DarkSideAI/BlazkowiczTK/Death", CHAN_VOICE)
		TK61 Q 5 A_NoBlocking
		TK61 R 5
		TK61 STUVWX 4
		TK61 Y -1
		Stop
	Death.TotenkopfFire:
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_Scream
		TK13 ABCDABCDABCDABCD 5 Bright
		TK13 EFG 5 Bright
		TK13 H -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Hexen Classes
Actor Parias_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o's neck was snapped by an unholy Parias."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	-FRIENDLY
	+FLOORCLIP
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Parias"
	painsound "DarkSideAI/Parias/Pain"
	deathsound "DarkSideAI/Parias/Death"
	activesound "DarkSideAI/Parias/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		CLER A 5 A_Look
		loop
	See:
		CLER AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(164, "FireSlot4")
		CLER E 0 Bright A_PlayWeaponSound("Hexen/FrostFang/Fire")
		CLER E 12 A_FaceTarget
		CLER F 0 Bright A_CustomMissile("FrostFangBall", 32, 4, 0, CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("FrostFangBall", 32, -4, 0, CMF_AIMDIRECTION)
		CLER E 20 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_Jump(8,"See")
		CLER E 7 A_FaceTarget
		CLER E 0 A_PlayWeaponSound("ClericCStaffFire")
		CLER F 0 Bright A_CustomMissile("CStaffMissile2",32,6,0,CMF_AIMDIRECTION)
		CLER F 2 Bright A_CustomMissile("CStaffMissile2",32,-6,0,CMF_AIMDIRECTION)
		CLER E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		CLER H 4
		CLER H 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		CLER I 6
		CLER J 6 A_Scream
		CLER KL 6
		CLER M 6 A_NoBlocking
		CLER NOP 6
		CLER Q -1
		Stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		CLER R 5 A_PlaySound("DarkSideAI/Parias/XDeath", CHAN_VOICE)
		CLER S 5
		CLER T 5 A_NoBlocking
		CLER UVWXYZ 5
		CLER [ -1
		Stop
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		CLFR Z 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		CLFR Z 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		CLFR Z 0 A_PlayWeaponSound("misc/freeze")
		CLFR Z 70 A_UnsetSolid
		CLFR Z 0 A_IceGuyDie
		CLFR Z 1 A_IceGuyDie
		TNT1 A 0
		stop
	Burn:
		CBRN C 5 BRIGHT A_PlaySound("DarkSideAI/Parias/Burn", CHAN_BODY)
		CBRN D 4 BRIGHT
		CBRN G 5 BRIGHT
		CBRN H 4 BRIGHT A_Scream
		CBRN I 5 BRIGHT
		CBRN J 4 BRIGHT
		CBRN K 5 BRIGHT
		CBRN L 4 BRIGHT
		CBRN M 5 BRIGHT
		CBRN N 4 BRIGHT
		CBRN O 5 BRIGHT
		CBRN P 4 BRIGHT
		CBRN Q 5 BRIGHT
		CBRN R 4 BRIGHT
		CBRN S 5 BRIGHT A_NoBlocking
		CBRN T 4 BRIGHT
		CBRN U 5 BRIGHT
		CBRN V 4 BRIGHT
		TNT1 A 8
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Daedolon_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was poisoned by Daedolon's evil magic."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	-FRIENDLY
	+FLOORCLIP
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Daedolon"
	painsound "DarkSideAI/Daedolon/Pain"
	deathsound "DarkSideAI/Daedolon/Death"
	activesound "DarkSideAI/Daedolon/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		MGE2 A 5 A_Look
		loop
	See:
		MGE2 AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(208, "FireSlot2")
		MGE2 E 1 A_FaceTarget
		MGE2 F 0 A_PlayWeaponSound("MageWandFire")
		MGE2 F 2 Bright A_CustomMissile("MageWandMissile2",32)
		MGE2 E 11 A_FaceTarget
		MGE2 E 1 A_FaceTarget
		MGE2 F 0 A_PlayWeaponSound("MageWandFire")
		MGE2 F 2 Bright A_CustomMissile("MageWandMissile2",32)
		MGE2 E 11 A_FaceTarget
		MGE2 E 1 A_FaceTarget
		MGE2 E 1 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		MGE2 E 1 A_FaceTarget
		TNT1 A 0 A_PlayWeaponSound("MageShardsFire")
		TNT1 A 0 A_CustomMissile("FrostMissile",36,6,14,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",34,4,9,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",32,0,5,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",36,-6,-14,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",34,-4,-9,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",32,0,-5,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",38,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",41,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",44,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",30,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",29,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",28,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",42,1,4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",30,1,4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",42,-1,-4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",30,-1,-4,CMF_AIMDIRECTION)
		TNT1 A 0 A_CustomMissile("FrostMissile",38)
		MGE2 F 2 Bright
		MGE2 E 25 A_FaceTarget
		MGE2 E 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		MGE2 G 4
		MGE2 G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		MGE2 H 6
		MGE2 I 6 A_PlaySound("DarkSideAI/Daedolon/Death", CHAN_VOICE)
		MGE2 JK 6
		MGE2 L 6 A_NoBlocking
		MGE2 MN 6
		MGE2 N -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		MGE2 O 5 A_PlaySound("DarkSideAI/Daedolon/XDeath", CHAN_VOICE)
		MGE2 P 5
		MGE2 Q 5 A_NoBlocking
		MGE2 RSTUVW 5
		MGE2 X -1
		Stop
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		MGE2 Y 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		MGE2 Y 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		MGE2 Y 0 A_PlayWeaponSound("misc/freeze")
		MGE2 Y 70 A_UnsetSolid
		MGE2 Y 0 A_IceGuyDie
		MGE2 Y 1 A_IceGuyDie
		TNT1 A 0
	Burn:
		MFDH E 5 BRIGHT A_PlaySound("DarkSideAI/Daedolon/Burn", CHAN_BODY)
		MFDH F 4 BRIGHT
		CBRN G 5 BRIGHT
		CBRN H 4 BRIGHT A_Scream
		CBRN I 5 BRIGHT
		CBRN J 4 BRIGHT
		CBRN K 5 BRIGHT
		CBRN L 4 BRIGHT
		CBRN M 5 BRIGHT
		CBRN N 4 BRIGHT
		CBRN O 5 BRIGHT
		CBRN P 4 BRIGHT
		CBRN Q 5 BRIGHT
		CBRN R 4 BRIGHT
		CBRN S 5 BRIGHT A_NoBlocking
		CBRN T 4 BRIGHT
		CBRN U 5 BRIGHT
		CBRN V 4 BRIGHT
		TNT1 A 8
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Baratus_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o's skull was smashed by a corrupted Baratus."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	-FRIENDLY
	+FLOORCLIP
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Baratus"
	painsound "DarkSideAI/Baratus/Pain"
	deathsound "DarkSideAI/Baratus/Death"
	activesound "DarkSideAI/Baratus/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		FGT2 A 5 A_Look
		loop
	See:
		FGT2 AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(208, "FireSlot2")
		FGT2 E 1 A_FaceTarget
		FGT2 E 0 A_PlayWeaponSound("FighterHammerMiss")
		FGT2 F 2 Bright A_CustomMissile("HammerMissileDM",32)
		FGT2 E 24 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		FGT2 E 1 A_FaceTarget
		FGT2 E 0 A_PlayWeaponSound("FighterHammerMiss")
		FGT2 F 2 Bright A_CustomMissile("Hexen_FSpearFX2",32)
		FGT2 E 24 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		FGT2 E 1 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto FireSlot2
	Pain:
		FGT2 G 4
		FGT2 G 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		FGT2 H 6
		FGT2 I 6 A_PlaySound("DarkSideAI/Baratus/Death", CHAN_VOICE)
		FGT2 JK 6
		FGT2 L 6 A_NoBlocking
		FGT2 MN 6
		FGT2 N -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		FGT2 O 5 A_PlaySound("DarkSideAI/Baratus/XDeath", CHAN_VOICE)
		FGT2 P 5 A_SpawnItemEx("SamsaraBaratusBloodySkull",0,0,46,random(-1,1),random(-1,1),5)
		FGT2 Q 5 A_NoBlocking
		FGT2 RSTUV 5
		FGT2 W -1
		Stop
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		FGT2 X 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		FGT2 X 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		FGT2 X 0 A_PlayWeaponSound("misc/freeze")
		FGT2 X 70 A_UnsetSolid
		FGT2 X 0 A_IceGuyDie
		FGT2 X 1 A_IceGuyDie
		TNT1 A 0
	Burn:
		HFDH A 5 BRIGHT A_PlaySound("DarkSideAI/Daedolon/Burn", CHAN_BODY)
		HFDH B 4 BRIGHT
		CBRN G 5 BRIGHT
		CBRN H 4 BRIGHT A_Scream
		CBRN I 5 BRIGHT
		CBRN J 4 BRIGHT
		CBRN K 5 BRIGHT
		CBRN L 4 BRIGHT
		CBRN M 5 BRIGHT
		CBRN N 4 BRIGHT
		CBRN O 5 BRIGHT
		CBRN P 4 BRIGHT
		CBRN Q 5 BRIGHT
		CBRN R 4 BRIGHT
		CBRN S 5 BRIGHT A_NoBlocking
		CBRN T 4 BRIGHT
		CBRN U 5 BRIGHT
		CBRN V 4 BRIGHT
		TNT1 A 8
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Duke Nukem 3D Classes
Actor Duke_AI : SamsaraMonsterDarkSideAIColored
{
	obituary "%o was smacked upside the head by a corrupted Duke Nukem."
	scale 0.725
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	-FRIENDLY
	+FLOORCLIP
	+NOINFIGHTING
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	Tag "Duke Nukem"
	painsound "duke/pain100"
	deathsound "DarkSideAI/Duke/Death"
	activesound "duke/bosssee"
	var int user_scalex;
	var int user_scaley;
	BloodType "DukeBlood"
	BloodColor "ff 40 00"
	States
	{
	Spawn:
		DUKE A 5 A_Look
		loop
	See:
		DUKE AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DUKE E 1 A_FaceTarget
		DUKE V 0 A_PlayWeaponSound("duke/mossberg")
		DUKE F 2 Bright A_CustomBulletAttack(3.5, 2.5, 7, 10, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 22 A_FaceTarget
		DUKE E 6 A_PlaySound("duke/mosspump")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_Jump(8,"See")
		DUKE E 2 A_FaceTarget
		DUKE E 0 A_PlayWeaponSound("duke/chaingun")
		DUKE F 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuff", 0, CBAF_NORANDOM)
		DUKE E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		DUKE A 2 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUK2 A 10
		DUK2 B 10 A_Scream
		DUK2 C 10 A_NoBlocking
		DUK2 DE 10
		DUK2 F -1
		stop
	Death.DukeDamage:
	Death.DukePistol:
		"####" A 0 A_Jump(218,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		"####" A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		"####" A 0 A_Jump(64,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.DukeExplosive:
		"####" A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	DukeGibStart:
		"####" A 0 A_Jump(96,"XDeath")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Ice")
		wait
	Death.DukePlasma:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Stop
		"####" "#" 1 A_NoBlocking
		"####" "#" 0 A_Jump(218,2)
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" "#" 0 ACS_NamedExecuteAlways("DN64PlasmaDeath")
		"####" "#" 3 A_SpawnItem("Duke64PlasmaEffectSmall")
		"####" "#" 0 A_GiveInventory("EnemyZorched",1)
		"####" "#" 27 A_Scream
		TNT1 A 1 A_SetTranslucent(1,0)
		TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		TNT1 A -1
		Stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUKE A 5
		TNT1 A 0 A_PlaySound("DarkSideAI/Duke/XDeath", CHAN_VOICE)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs1",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs2",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAA 0 A_SpawnItemEx("DukeJibs3",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs4",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs5",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAAAAA 0 A_SpawnItemEx("DukeJibs6",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_SpawnItemEx("DukeBloodPool_Duke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_VOICE)
		TNT1 A 5 A_NoBlocking
		TNT1 A -1
		Stop
	Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathDuke")
		TNT1 A 5 A_PlaySound("DarkSideAI/Duke/Burn", CHAN_VOICE)
		TNT1 A -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Duke_LAB_AI : SamsaraMonsterDarkSideAIColored
{
	obituary "A corrupted Duke Nukem left a sandal-print on %o's face."
	scale 0.725
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	-FRIENDLY
	+FLOORCLIP
	+NOINFIGHTING
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	Tag "Duke Nukem (Life's A Beach)"
	painsound "duke/pain100"
	deathsound "DarkSideAI/Duke/Death"
	activesound "duke/bosssee"
	var int user_scalex;
	var int user_scaley;
	BloodType "DukeBlood"
	BloodColor "ff 40 00"
	States
	{
	Spawn:
		DUKE I 5 A_Look
		loop
	See:
		DUKE IIIIJJJJKKKKLLLL 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		DUKE M 1 A_FaceTarget
		DUKE N 0 A_PlayWeaponSound("duke/mossberg2")
		DUKE N 2 Bright A_CustomBulletAttack(3.5, 2.5, 7, 10, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 22 A_FaceTarget
		DUKE M 6 A_PlaySound("duke/mosspump")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_Jump(8,"See")
		DUKE M 2 A_FaceTarget
		DUKE M 0 A_PlayWeaponSound("duke/chaingun2")
		DUKE N 2 Bright A_CustomBulletAttack(5.5, 2.5, 1, 15, "DukeBulletPuffBeach", 0, CBAF_NORANDOM)
		DUKE M 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		DUKE I 2 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUK2 N 10
		DUK2 O 10 A_Scream
		DUK2 P 10 A_NoBlocking
		DUK2 QR 10
		DUK2 S -1
		stop
	Death.DukeDamage:
	Death.DukePistol:
		"####" A 0 A_Jump(218,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		"####" A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		"####" A 0 A_Jump(64,"Death")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.DukeExplosive:
		"####" A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	DukeGibStart:
		"####" A 0 A_Jump(96,"XDeath")
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" A -1 A_Jump(256,"Ice")
		wait
	Death.DukePlasma:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Stop
		"####" "#" 1 A_NoBlocking
		"####" "#" 0 A_Jump(218,2)
		"####" "#" 0 A_GiveToTarget("DukeDMTauntDuke",1)
		"####" "#" 0 ACS_NamedExecuteAlways("DN64PlasmaDeath")
		"####" "#" 3 A_SpawnItem("Duke64PlasmaEffectSmall")
		"####" "#" 0 A_GiveInventory("EnemyZorched",1)
		"####" "#" 27 A_Scream
		TNT1 A 1 A_SetTranslucent(1,0)
		TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		TNT1 A -1
		Stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		DUKE I 5
		TNT1 A 0 A_PlaySound("DarkSideAI/Duke/XDeath", CHAN_VOICE)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs1",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs2",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAA 0 A_SpawnItemEx("DukeJibs3",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs4",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AA 0 A_SpawnItemEx("DukeJibs5",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 AAAAAAA 0 A_SpawnItemEx("DukeJibs6",random(-2,2),random(-2,2),random(24,45),random(-3,3),random(-3,3),random(3,10),random(-180,180),32)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_SpawnItemEx("DukeBloodPool_Duke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_VOICE)
		TNT1 A 5 A_NoBlocking
		TNT1 A -1
		Stop
	Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathDuke")
		TNT1 A 5 A_PlaySound("DarkSideAI/Duke/Burn", CHAN_VOICE)
		TNT1 A -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner_Duke", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" A 0 A_GiveToTarget("DukeDMTauntDuke",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Until Shadowlink or someone else can get the sprites for Duke64, I'll
// skip the Dark Side actor for him for now

// Marathon
Actor SecurityOfficer_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A Pfhor-brainwashed Security Officer terminated %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	scale 0.45
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Gravity 0.25
	Tag "Security Officer"
	painsound "DarkSideAI/SecOff/Pain"
	deathsound "DarkSideAI/SecOff/Death"
	activesound "DarkSideAI/SecOff/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		SDSG A 5 A_Look
		loop
	See:
		"####" BBBBBCCCCCDDDDDEEEEE 1 A_FastChase
		Loop
	Missile:
		"####" A 0 A_Jump(48, "FireSlot4")
		SDSG B 1 A_FaceTarget
		SDSG B 0 A_PlayWeaponSound("marathon/shotgun/fire")
		SDSG FFFFFFFFF 0 A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG F 2 Bright A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG B 8 A_FaceTarget
		SDSG B 0 A_PlayWeaponSound("marathon/shotgun/fire")
		SDSG GGGGGGGGG 0 A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG G 2 Bright A_CustomMissile("MarathonShotgunBullet",32,0,random(-4,4))
		SDSG B 12 A_FaceTarget
		SDSG B 0 A_PlayWeaponSound("marathon/shotgun/reload")
		SDSG B 12 A_FaceTarget
		SDSG A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_Jump(8,"See")
		SOPL F 1 A_FaceTarget
		SOPL F 0 A_PlayWeaponSound("marathon/rifle/fire")
		SOPL G 2 Bright A_CustomMissile("MarathonARBullet",32,random(-4,4),random(-4,4))
		SOPL F 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		"####" Z 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		SOPL N 6
		SOPL O 6 A_Scream
		SOPL P 6 A_NoBlocking
		SOPL Q 6
		SOPL S 6
		SOPL T -1
		stop
    Death.MarathonFire:
    Death.MarathonPlasmaFire:
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 ThrustThingZ(0, random(4,20), 0, 0)
		TNT1 A 0 A_Recoil(random(1,3))
		TNT1 A 0 A_PlaySound("DarkSideAI/SecOff/Burn", CHAN_VOICE)
		TNT1 A 0 A_UnsetSolid
		SOPL U 5 Bright
	Burn2:
		SOPL U 5 Bright A_CheckFloor("Burn3")
		loop
	Burn3:
		SOPL VWX 7 Bright
		SOPL Y -1
		stop
	Death.MarathonFusion:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 ThrustThingZ(0, random(8,24), 0, 0)
		TNT1 A 0 A_Recoil(random(1,3))
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_Scream
		SOPL H 5
	XDeath2:
		SOPL H 5 A_CheckFloor("XDeath3")
		loop
	XDeath3:
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		SOPL I 4 A_PlaySound("DarkSideAI/SecOff/XDeath", CHAN_VOICE)
		SOPL J 4 A_NoBlocking
		SOPL KL 4
		SOPL M -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Quake
Actor Ranger_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was gibbed by a corrupted Ranger."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	scale 0.27
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Gravity 0.75
	Tag "Ranger"
	painsound "DarkSideAI/Ranger/Pain"
	deathsound "DarkSideAI/Ranger/Death"
	activesound "DarkSideAI/Ranger/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		PLY1 ABCDE 5 A_Look
		loop
	See:
		PLY2 AAAABBBBCCCCDDDDEEEEFFFF 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/rlfire")
		PLY3 B 6 Bright A_CustomMissile("QuakeRocket", 32)
		PLY3 CDEF 6 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,-4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,-4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,-4)
		PLY3 B 0 A_Jump(8,"See")
		PLY3 A 1 A_FaceTarget
		PLY3 B 0 A_PlayWeaponSound("quakeweps/nailgunfire")
		PLY3 B 2 Bright A_CustomMissile("QuakeNail",32,4)
		PLY3 B 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		PLY4 A 3 A_Pain
		PLY4 BCDEF 3
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"----" A 0 A_Jump(256,"death1","death2","death3","death4","death5")
	Death1:
		PLY5 A 3
		PLY5 B 3 A_Scream
		PLY5 C 3 A_NoBlocking
		PLY5 DEFGHIJ 3
		PLY5 K -1
		Stop
	Death2:
		PLY6 A 3
		PLY6 B 3 A_Scream
		PLY6 C 3 A_NoBlocking
		PLY6 DEFGH 3
		PLY6 I -1
		Stop
	Death3:
		PLY7 A 3
		PLY7 B 3 A_Scream
		PLY7 C 3 A_NoBlocking
		PLY7 DEFGHIJKLMN 3
		PLY7 O -1
		Stop
	Death4:
		PLY8 A 3
		PLY8 B 3 A_Scream
		PLY8 C 3 A_NoBlocking
		PLY8 DEFGH 3
		PLY8 I -1
		Stop
	Death5:
		PLY9 A 3
		PLY9 B 3 A_Scream
		PLY9 C 3 A_NoBlocking
		PLY9 DEFGH 3
		PLY9 I -1
		Stop
	XDeath.QuakeElectric:
	XDeath.NotQuadded:
	XDeath.QuakeExplosive:
	XDeathForRanger:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnDebris("Quake_RangerHead")
		TNT1 A 0 A_SpawnItemEx("QuakeGibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("DarkSideAI/Ranger/XDeath", CHAN_VOICE)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
		Stop
	Burn:
		"----" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"----" A 0 A_Jump(256,"Burn1","Burn2","Burn3","Burn4","Burn5")
	Burn1:
		PLZ5 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ5 B 3 A_PlaySound("*burndeath")
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ5 C 3 A_NoBlocking
		PLZ5 DEFGHIJ 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ5 K -1
		Stop
	Burn2:
		PLZ6 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ6 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ6 C 3 A_NoBlocking
		PLZ6 DEFGH 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ6 I -1
		Stop
	Burn3:
		PLZ7 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ7 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ7 C 3 A_NoBlocking
		PLZ7 DEFGHIJKLMN 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ7 O -1
		Stop
	Burn4:
		PLZ8 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ8 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ8 C 3 A_NoBlocking
		PLZ8 DEFGH 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ8 I -1
		Stop
	Burn5:
		PLZ9 A 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ9 B 3 A_PlaySound("DarkSideAI/Ranger/Burn", CHAN_VOICE)
		TNT1 A 0 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ9 C 3 A_NoBlocking
		PLZ9 DEFGH 3 A_SpawnItemEx("QuakeBurn",random(-10,10),random(-10,10),random(12,42),random(-2,2),random(-2,2),random(0,3),random(-180,180),32)
		PLZ9 I -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// ROTT classes
Actor IPFreeley_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was bazooka'd by a twisted Ian Paul Freeley."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	XScale 0.68
	YScale 0.65
	Gravity 0.8125
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Ian Paul Freely"
	painsound "DarkSideAI/Freeley/Pain"
	deathsound "DarkSideAI/Freeley/Death"
	activesound "DarkSideAI/Freeley/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		IPFS A 5 A_Look
		loop
	See:
		IPFW AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		IPFW A 1 A_FaceTarget
		IPFW A 0 A_PlayWeaponSound("bazooka/shoot")
		IPMS E 2 Bright A_CustomMissile("RottMissileDM", 32)
		IPFW A 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_Jump(8,"See")
		IPFS B 3 A_FaceTarget
		IPFS B 0 A_PlayWeaponSound("mp40/shoot")
		IPFS C 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		IPFS B 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		IPFS A 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		IPFD B 4 A_Scream
		IPFD C 4 A_NoBlocking
		IPFD DEFG 4
		IPFD A -1
		stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItem("BurningSkeleton")
		TNT1 A -1
		stop
	XDeath321:
		TNT1 A 0 A_Jump(128, 2)
		TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
		TNT1 AA 0
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor TaradinoCassatt_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A corrupted Taradino Cassatt showed %o his missile launcher."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	XScale 0.68
	YScale 0.65
	Gravity 0.8125
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Taradino Cassatt"
	painsound "DarkSideAI/Taradino/Pain"
	deathsound "DarkSideAI/Taradino/Death"
	activesound "DarkSideAI/Taradino/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		AL15 A 5 A_Look
		loop
	See:
		AL15 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		AL15 A 1 A_FaceTarget
		AL15 A 0 A_PlayWeaponSound("bazooka/shoot")
		AL15 F 2 Bright A_CustomMissile("RottMissileDM", 32)
		AL15 A 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_Jump(8,"See")
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_Jump(8,"See")
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_Jump(8,"See")
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_Jump(8,"See")
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_Jump(8,"See")
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_Jump(8,"See")
		AL15 O 3 A_FaceTarget
		AL15 O 0 A_PlayWeaponSound("mp40/shoot")
		AL15 P 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL15 O 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		AL15 A 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		AL15 H 4 A_Scream
		AL15 I 4 A_NoBlocking
		AL15 JKLM 4
		AL15 N -1
		stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItem("BurningSkeleton")
		TNT1 A -1
		stop
	XDeath321:
		TNT1 A 0 A_Jump(128, 2)
		TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
		TNT1 AA 0
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor DougWendt_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "An evil Doug Wendt bullet-whored %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	XScale 0.68
	YScale 0.65
	Gravity 0.8125
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Doug Wendt"
	painsound "DarkSideAI/Doug/Pain"
	deathsound "DarkSideAI/Doug/Death"
	activesound "DarkSideAI/Doug/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		AL18 A 5 A_Look
		loop
	See:
		AL18 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		AL18 A 1 A_FaceTarget
		AL18 A 0 A_PlayWeaponSound("bazooka/shoot")
		AL18 H 2 Bright A_CustomMissile("RottMissileDM", 32)
		AL18 A 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_Jump(8,"See")
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_Jump(8,"See")
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_Jump(8,"See")
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_Jump(8,"See")
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_Jump(8,"See")
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_Jump(8,"See")
		AL18 F 3 A_FaceTarget
		AL18 F 0 A_PlayWeaponSound("mp40/shoot")
		AL18 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL18 F 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		AL18 A 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		AL18 J 4 A_Scream
		AL18 K 4 A_NoBlocking
		AL18 LMNO 4
		AL18 P -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItem("BurningSkeleton")
		TNT1 A -1
		stop
	XDeath321:
		TNT1 A 0 A_Jump(128, 2)
		TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
		TNT1 AA 0
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor LoreleiNi_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was H.U.N.T'd down by a twisted Lorelei Ni."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	XScale 0.68
	YScale 0.65
	Gravity 0.8125
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Lorelei Ni"
	painsound "DarkSideAI/Lorelei/Pain"
	deathsound "DarkSideAI/Lorelei/Death"
	activesound "DarkSideAI/Lorelei/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		AL17 A 5 A_Look
		loop
	See:
		AL17 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		AL17 A 1 A_FaceTarget
		AL17 A 0 A_PlayWeaponSound("bazooka/shoot")
		AL17 I 2 Bright A_CustomMissile("RottMissileDM", 32)
		AL17 A 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_Jump(8,"See")
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_Jump(8,"See")
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_Jump(8,"See")
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_Jump(8,"See")
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_Jump(8,"See")
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_Jump(8,"See")
		AL17 F 3 A_FaceTarget
		AL17 F 0 A_PlayWeaponSound("mp40/shoot")
		AL17 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL17 F 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		AL17 A 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		AL17 J 4 A_Scream
		AL17 K 4 A_NoBlocking
		AL17 LMNO 4
		AL17 P -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItem("BurningSkeleton")
		TNT1 A -1
		stop
	XDeath321:
		TNT1 A 0 A_Jump(128, 2)
		TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
		TNT1 AA 0
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor ThiBarret_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o couldn't evade a corrupted Thi Barret."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	XScale 0.68
	YScale 0.65
	Gravity 0.8125
	monster
	CameraHeight 40
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Thi Barret"
	painsound "DarkSideAI/Thi/Pain"
	deathsound "DarkSideAI/Thi/Death"
	activesound "DarkSideAI/Thi/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		AL16 A 5 A_Look
		loop
	See:
		AL16 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		AL16 A 1 A_FaceTarget
		AL16 A 0 A_PlayWeaponSound("bazooka/shoot")
		AL16 I 2 Bright A_CustomMissile("RottMissileDM", 32)
		AL16 A 18 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_Jump(8,"See")
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_Jump(8,"See")
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_Jump(8,"See")
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_Jump(8,"See")
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_Jump(8,"See")
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_Jump(8,"See")
		AL16 F 3 A_FaceTarget
		AL16 F 0 A_PlayWeaponSound("mp40/shoot")
		AL16 G 2 Bright A_CustomBulletAttack(3.6, 3.0, 1, 10, "RottPuff", 0, CBAF_NORANDOM)
		AL16 F 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		AL16 A 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		AL16 J 4 A_Scream
		AL16 K 4 A_NoBlocking
		AL16 LMNO 4
		AL16 P -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItem("BurningSkeleton")
		TNT1 A -1
		stop
	XDeath321:
		TNT1 A 0 A_Jump(128, 2)
		TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
		TNT1 AA 0
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_UnsetSolid
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Blake Stone
Actor Blake_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "A corrupted Blake Stone blasted %o back to the British Isle."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Blake Stone"
	painsound "DarkSideAI/Blake/Pain"
	deathsound "DarkSideAI/Blake/Death"
	activesound "DarkSideAI/Blake/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		BSTN A 5 A_Look
		loop
	See:
		BSTN BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot3")
		BSTN F 2 A_FaceTarget
		BSTN G 3 A_FaceTarget
		BSTN G 0 A_PlayWeaponSound("BPistol/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(0,0,1,32,"BlankPuffBlake")
		BSTN G 23 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot3:
		BSTN F 2 A_FaceTarget
		BSTN G 3 A_FaceTarget
	FireSlot3Continue:
		BSTN G 0 A_PlayWeaponSound("Bpistol2/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(3.2,3.2,3,7,"BlankPuffBlake")
		BSTN G 0 A_Jump(8,"See")
		BSTN G 5 A_FaceTarget
		BSTN G 0 A_PlayWeaponSound("Bpistol2/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(3.2,3.2,3,7,"BlankPuffBlake")
		BSTN G 0 A_Jump(8,"See")
		BSTN G 5 A_FaceTarget
		BSTN G 0 A_PlayWeaponSound("Bpistol2/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(3.2,3.2,3,7,"BlankPuffBlake")
		BSTN G 0 A_Jump(8,"See")
		BSTN G 5 A_FaceTarget
		BSTN G 0 A_PlayWeaponSound("Bpistol2/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(3.2,3.2,3,7,"BlankPuffBlake")
		BSTN G 0 A_Jump(8,"See")
		BSTN G 5 A_FaceTarget
		BSTN G 0 A_PlayWeaponSound("Bpistol2/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(3.2,3.2,3,7,"BlankPuffBlake")
		BSTN G 0 A_Jump(8,"See")
		BSTN G 5 A_FaceTarget
		BSTN G 0 A_PlayWeaponSound("Bpistol2/Fire")
		BSTN H 2 Bright A_CustomBulletAttack(3.2,3.2,3,7,"BlankPuffBlake")
		BSTN G 0 A_Jump(8,"See")
		BSTN G 0 A_CPOSRefire
		goto FireSlot3Continue
	Pain:
		BSTN I 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		BSTN J 5 A_Scream
		BSTN K 5 A_NoBlocking
		BSTN L 5
		BSTN M 4
		BSTN N -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Blood
Actor Caleb_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "Caleb burnt %o to a crisp."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	XScale 0.56
	YScale 0.46
	Tag "Caleb"
	painsound "DarkSideAI/Caleb/Pain"
	deathsound "DarkSideAI/Caleb/Death"
	activesound "DarkSideAI/Caleb/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		CALE M 5 A_Look
		loop
	See:
		CALE AAAABBBBCCCCDDDDEEEEFFFFGGGGHHHHIIIIJJJJKKKKLLLL 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CALE M 2 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("SawnOff/Fire")
		CALE N 2 Bright A_CustomBulletAttack(4.1,1.8,15,5,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 9 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("SawnOff/Fire")
		CALE N 2 Bright A_CustomBulletAttack(4.1,1.8,15,5,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 9 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("SawnOff/Load")
		CALE M 15 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_Jump(8,"See")
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_Jump(8,"See")
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_Jump(8,"See")
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_Jump(8,"See")
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_Jump(8,"See")
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_Jump(8,"See")
		CALE M 1 A_FaceTarget
		CALE M 0 A_PlayWeaponSound("Tommy/Fire")
		CALE N 1 Bright A_CustomBulletAttack(4.6,2,1,9,"ZBBulletPuff",0,CBAF_NORANDOM)
		CALE M 0 A_CPosRefire
		goto FireSlot4
	Pain:
		CALE O 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
	Style1:
		CALE "\" 5
		CALE "\" 5 A_Scream
		CALE "]" 9 A_NoBlocking
		CAL2 A 8
		CAL2 BCD 7
		CAL2 E -1
		Stop
	Style2:
		CALE P 5
		CALE Q 5 A_Scream
		CALE R 5 A_NoBlocking
		CALE S 5
		CALE TUVWXYZ 4
		CALE "[" -1
		Stop
	XDeathForCaleb:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnDebris("CalebHand")
		TNT1 A 0 A_SpawnDebris("CalebLeg")
		TNT1 A 0 A_Jump(128,1,2,3)
		TNT1 AAAAAAA 0 A_Spawndebris("ZBloodOrganDebris2")
		TNT1 A 0 A_SpawnDebris("ZBloodBloodliver")
		TNT1 A 0 A_SpawnDebris("ZBloodOrganDebris")
		TNT1 A 0 A_SpawnDebris("ZBloodEyeGuts")
		TNT1 A 0 A_SpawnDebris("ZBloodHand1")
		TNT1 A 0 A_SpawnDebris("CalebHead")
		TNT1 A 0 A_SpawnDebris("CalebHat")
		TNT1 A 0 A_Jump(128,1,2,3,4,5)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("NashGore_FlyingBlood_Monolith", 0, 0, 0, FRandom(0.1, 6.0) * Random(-1, 1), FRandom(0.1, 6.0) * Random(-1, 1), FRandom((Random(3.0,1.0)), (Random(8.0,6.0))) * FRandom((Random(3,2)), 1), 0, NASHGORE_MONOLITH_BLOODFLAGS1, 64)
		TNT1 A 0 A_PlaySound("Blood/gib5",CHAN_AUTO,1.0,0,ATTN_NORM)
		TNT1 A 5 A_NoBlocking
		TNT1 E -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathCaleb")
		TNT1 A 5 A_Playsound("Caleb/Burn4")
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Strife
Actor StrifeGuy_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A Sigil-controlled Strifeguy sent %o to the heaven."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Strifeguy"
	painsound "DarkSideAI/Strifeguy/Pain"
	deathsound "DarkSideAI/Strifeguy/Death"
	activesound "DarkSideAI/Strifeguy/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		SGUY A 5 A_Look
		loop
	See:
		SGUY AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		SGUY E 0 A_PlayWeaponSound("strife/sigilcharge")
		SGUY E 21 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/sigilcharge")
		SGUY F 2 Bright A_CustomMissile("StrifeSpectralLightningH1",32)
		SGUY E 4 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		SGUY E 1 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_Jump(8,"See")
		SGUY E 2 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_Jump(8,"See")
		SGUY E 2 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_Jump(8,"See")
		SGUY E 2 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_Jump(8,"See")
		SGUY E 2 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_Jump(8,"See")
		SGUY E 2 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_Jump(8,"See")
		SGUY E 2 A_FaceTarget
		SGUY E 0 A_PlayWeaponSound("strife/riflefire")
		SGUY F 1 Bright A_CustomBulletAttack(2.8,0,1,(random(1,3)*4),"StrifeBulletPuff")
		SGUY E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		SGUY Q 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		SGUY H 3
		SGUY I 3 A_Scream
		SGUY J 3 A_NoBlocking
		SGUY KLMNO 4
		SGUY P -1
		stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		SGIB A 5 A_TossGib
		SGIB B 5 A_PlaySound("Strife/GibDead", CHAN_VOICE)
		SGIB C 5 A_NoBlocking
		SGIB DEFG 5 A_TossGib
		SGIB H -1 A_TossGib
		Stop
	XDeath.PunchDagger:
	XDeath.ElectricBolt:
	XDeath.PoisonBolt:
	XDeath.StrifeExplosive:
	XDeath.StrifeSigil:
		TNT1 A -1 A_Jump(256,"XDeath")
		wait
	Death.PhosFire:	
	Death.PhosFireCoop:
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		SBRN A 3 bright
		TNT1 A 0 bright A_PlaySound("DarkSideAI/Strifeguy/Burn", CHAN_VOICE)
		SBRN B 3 bright A_DropFire
		SBRN C 3 bright
		SBRN D 3 bright A_NoBlocking
		SBRN E 5 bright A_DropFire
		SBRN FGH 5 bright
		SBRN I 5 bright A_DropFire
		SBRN JKL 5 bright
		SBRN M 5 bright A_DropFire
		SBRN NOPQPQ 5 bright
		SBRN RSTU 7 bright
		SBRN V -1
		stop
	Crush:
		DIE1 A 0 A_Jump(128,"Crush2")
		DIE1 A 5
		DIE1 A -1
		Stop
	Crush2:
		DIE2 A 5
		DIE2 A -1
		Stop
	Disintegrate:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		SDIS A 5 A_PlaySoundEx("strife/disruptdeath", CHAN_VOICE)
		SDIS BC 5
		SDIS D 5 A_NoBlocking
		SDIS EF 5
		SDIS GHIJ 4
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Eradicator
Actor Eleena_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A corrupted Eleena Brynstaarl clawed %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.56
	Gravity 0.68
	Tag "Elenna Brynstaarl"
	painsound "DarkSideAI/Eleena/Pain"
	deathsound "DarkSideAI/Eleena/Death"
	activesound "DarkSideAI/Eleena/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		ELEE A 5 A_Look
		loop
	See:
		ELEE AAAABBBBCCCCDDDDEEEEFFFF 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		ELEE JK 2 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("sonic/shock")
		ELEE L 2 Bright A_CustomBulletAttack(5.3,4.2,6,Random(9,12),"SonicPuff",0,CBAF_NORANDOM)
		ELEE KJJ 8 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		ELEE K 3 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("eleena/dartfire")
		ELEE K 0 A_CustomMissile("ImpalingDart",32,6,frandom(3.00,7.00))
		ELEE K 0 A_CustomMissile("ImpalingDart",32,-6,frandom(-3.00,-7.00))
		ELEE L 2 Bright A_CustomMissile("ImpalingDart",32,0,frandom(-2.00,2.00))
		ELEE K 0 A_Jump(8,"See")
		ELEE K 3 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("eleena/dartfire")
		ELEE K 0 A_CustomMissile("ImpalingDart",32,6,frandom(3.00,7.00))
		ELEE K 0 A_CustomMissile("ImpalingDart",32,-6,frandom(-3.00,-7.00))
		ELEE L 2 Bright A_CustomMissile("ImpalingDart",32,0,frandom(-2.00,2.00))
		ELEE K 0 A_Jump(8,"See")
		ELEE K 3 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("eleena/dartfire")
		ELEE K 0 A_CustomMissile("ImpalingDart",32,6,frandom(3.00,7.00))
		ELEE K 0 A_CustomMissile("ImpalingDart",32,-6,frandom(-3.00,-7.00))
		ELEE L 2 Bright A_CustomMissile("ImpalingDart",32,0,frandom(-2.00,2.00))
		ELEE K 0 A_Jump(8,"See")
		ELEE K 3 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("eleena/dartfire")
		ELEE K 0 A_CustomMissile("ImpalingDart",32,6,frandom(3.00,7.00))
		ELEE K 0 A_CustomMissile("ImpalingDart",32,-6,frandom(-3.00,-7.00))
		ELEE L 2 Bright A_CustomMissile("ImpalingDart",32,0,frandom(-2.00,2.00))
		ELEE K 0 A_Jump(8,"See")
		ELEE K 3 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("eleena/dartfire")
		ELEE K 0 A_CustomMissile("ImpalingDart",32,6,frandom(3.00,7.00))
		ELEE K 0 A_CustomMissile("ImpalingDart",32,-6,frandom(-3.00,-7.00))
		ELEE L 2 Bright A_CustomMissile("ImpalingDart",32,0,frandom(-2.00,2.00))
		ELEE K 0 A_Jump(8,"See")
		ELEE K 3 A_FaceTarget
		ELEE K 0 A_PlayWeaponSound("eleena/dartfire")
		ELEE K 0 A_CustomMissile("ImpalingDart",32,6,frandom(3.00,7.00))
		ELEE K 0 A_CustomMissile("ImpalingDart",32,-6,frandom(-3.00,-7.00))
		ELEE L 2 Bright A_CustomMissile("ImpalingDart",32,0,frandom(-2.00,2.00))
		ELEE K 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		ELEE S 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		ELEE M 8
		ELEE N 8 A_Scream
		ELEE O 8 A_NoBlocking
		ELEE P 8
		ELEE Q 8
		ELEE R -1
		stop
	XDeathForCatBitch:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TNT1 A 0 A_SpawnItemex("EleGibs1", 0, 0, random(8, 56), random(-4, 4), 0, random(0, 6))
		TNT1 A 0 A_SpawnItemex("EleGibs1", 0, 0, random(8, 56), random(-4, 4), 0, random(0, 6))
		TNT1 A 0 A_SpawnItemex("EleGibs1", 0, 0, random(8, 56), random(-4, 4), 0, random(0, 6))
		TNT1 A 0 A_SpawnItemex("EradBloodDrop",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EradBloodDrop",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EradBloodDrop",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EradBloodDrop",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EleArm",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EleLeg",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EleHead",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_SpawnItemex("EleChest",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		TNT1 A 0 A_PlaySound("Eleena/Gibbed")
		TNT1 A 27 A_NoBlocking
		TNT1 A -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathEleena")
		TNT1 A 5 A_Playsound("DarkSideAI/Eleena/Burn")
		TNT1 A -1
		stop
	Death.DukeDamage:
	Death.DukePistol:
		"####" A 0 A_Jump(218,"Death")
		"####" A 0 A_GiveToTarget("DukeWomenTaunt",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.MightyBoot:
		"####" A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		"####" A 0 A_Jump(64,"Death")
		"####" A 0 A_GiveToTarget("DukeWomenTaunt",1)
		"####" A -1 A_Jump(256,"Death")
		wait
	Death.DukeExplosive:
		"####" A 0 A_JumpIfHealthLower(-3,"DukeGibStart")
	DukeGibStart:
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnDebris("DukeGibs1")
		"####" A 0 A_SpawnDebris("DukeGibs2")
		"####" A 0 A_SpawnDebris("DukeGibs3")
		"####" A 0 A_SpawnDebris("DukeGibs4")
		"####" A 0 A_SpawnDebris("DukeGibs5")
		"####" A 0 A_SpawnDebris("DukeGibs6")
		"####" A 0 A_Jump(128,2)
		"####" A 0 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" A 0 A_PlaySound("duke/enemygib")
		"####" A 0 A_Jump(96,"XDeath")
		"####" A 0 A_GiveToTarget("DukeWomenTaunt",1)
		"####" A -1 A_Jump(256,"XDeath")
		wait
	Death.DukeIce:
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeWomenTaunt",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.DoomDamageTypeIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeWomenTaunt", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeWomenTaunt",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeWomenTaunt", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeWomenTaunt",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Corridor 7
Actor Corridor7_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "An evil Space Seal disintegrated %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Space Seal"
	painsound "DarkSideAI/SpaceSeal/Pain"
	deathsound "DarkSideAI/SpaceSeal/Death"
	activesound "DarkSideAI/SpaceSeal/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		C7PY P 5 A_Look
		loop
	See:
		C7PY AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		C7PY E 2 A_FaceTarget
		C7PY F 2 A_FaceTarget
		C7PY G 0 A_PlayWeaponSound("C7/Shotgun")
		C7PY G 2 Bright A_CustomBulletAttack(5,5,10,Random(2,35),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 29 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		C7PY E 2 A_FaceTarget
		C7PY F 2 A_FaceTarget
	FireSlot2Continue:
		C7PY G 0 A_PlayWeaponSound("C7/Vulcan")
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(1,4),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(3,8),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 2 Bright A_CustomBulletAttack(2,2,3,random(5,16),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 8 A_FaceTarget
		C7PY G 0 A_Jump(8,"See")
		C7PY G 0 A_PlayWeaponSound("C7/Vulcan")
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(1,4),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(3,8),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 2 Bright A_CustomBulletAttack(2,2,3,random(5,16),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 8 A_FaceTarget
		C7PY G 0 A_Jump(8,"See")
		C7PY G 0 A_PlayWeaponSound("C7/Vulcan")
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(1,4),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(3,8),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 2 Bright A_CustomBulletAttack(2,2,3,random(5,16),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 8 A_FaceTarget
		C7PY G 0 A_Jump(8,"See")
		C7PY G 0 A_PlayWeaponSound("C7/Vulcan")
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(1,4),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(3,8),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 2 Bright A_CustomBulletAttack(2,2,3,random(5,16),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 8 A_FaceTarget
		C7PY G 0 A_Jump(8,"See")
		C7PY G 0 A_PlayWeaponSound("C7/Vulcan")
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(1,4),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(3,8),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 2 Bright A_CustomBulletAttack(2,2,3,random(5,16),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 8 A_FaceTarget
		C7PY G 0 A_Jump(8,"See")
		C7PY G 0 A_PlayWeaponSound("C7/Vulcan")
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(1,4),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 0 Bright A_CustomBulletAttack(2,2,3,random(3,8),"BlankPuffBloodless",0,CBAF_NORANDOM)
		C7PY G 2 Bright A_CustomBulletAttack(2,2,3,random(5,16),"BlankPuffC7",0,CBAF_NORANDOM)
		C7PY F 8 A_FaceTarget
		C7PY F 0 A_CPOSRefire
		goto FireSlot2Continue
	Pain:
		C7PY H 6 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		C7PY H 5 A_Scream
		C7PY I 5 A_NoBlocking
		C7PY J 5
		C7PY KLMN 4
		C7PY O -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Rebel Moon Rising
Actor RMR_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "%o's oxygen supply was cut short by an evil LDF Commando."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Scale 0.72
	Maxstepheight 8
	cameraheight 45
	Tag "LDF Commando"
	painsound "DarkSideAI/LDFCommando/Pain"
	deathsound "DarkSideAI/LDFCommando/Death"
	activesound "DarkSideAI/LDFCommando/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		RMZ7 A 5 A_Look
		loop
	See:
		RMZ7 BBBBCCCCDDDDEEEE 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		RMZ7 A 2 A_FaceTarget
		RMZ7 A 0 A_PlayWeaponSound("RMR/ACRSHOT")
		RMZ7 A 3 Bright A_CustomMissile("RMRLaser2",32)
		RMZ7 A 10 A_FaceTarget
		RMZ7 A 0 A_PlayWeaponSound("RMR/ACRSHOT")
		RMZ7 A 3 Bright A_CustomMissile("RMRLaser2",32)
		RMZ7 A 10 A_FaceTarget
		RMZ7 A 0 A_PlayWeaponSound("RMR/ACRSHOT")
		RMZ7 A 3 Bright A_CustomMissile("RMRLaser2",32)
		RMZ7 A 10 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		RMZ7 A 4 A_FaceTarget
		RMZ7 A 1 A_PlayWeaponSound("RMR/SpinningP")
		RMZ7 A 0 Bright A_CustomMissile("RMRSpinningPlasma",32)
		RMZ7 A 0 A_Jump(8,"See")
		RMZ7 A 4 A_FaceTarget
		RMZ7 A 1 A_PlayWeaponSound("RMR/SpinningP")
		RMZ7 A 0 Bright A_CustomMissile("RMRSpinningPlasma",32)
		RMZ7 A 0 A_Jump(8,"See")
		RMZ7 A 4 A_FaceTarget
		RMZ7 A 1 A_PlayWeaponSound("RMR/SpinningP")
		RMZ7 A 0 Bright A_CustomMissile("RMRSpinningPlasma",32)
		RMZ7 A 0 A_Jump(8,"See")
		RMZ7 A 4 A_FaceTarget
		RMZ7 A 1 A_PlayWeaponSound("RMR/SpinningP")
		RMZ7 A 0 Bright A_CustomMissile("RMRSpinningPlasma",32)
		RMZ7 A 0 A_Jump(8,"See")
		RMZ7 A 4 A_FaceTarget
		RMZ7 A 1 A_PlayWeaponSound("RMR/SpinningP")
		RMZ7 A 0 Bright A_CustomMissile("RMRSpinningPlasma",32)
		RMZ7 A 0 A_Jump(8,"See")
		RMZ7 A 4 A_FaceTarget
		RMZ7 A 1 A_PlayWeaponSound("RMR/SpinningP")
		RMZ7 A 0 Bright A_CustomMissile("RMRSpinningPlasma",32)
		RMZ7 A 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		RMZ7 F 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		RMZ7 H 4 A_Scream
		RMZ7 I 4 A_NoBlocking
		RMZ7 J 4
		RMZ7 K 4
		RMZ7 LMNOP 4
		RMZ7 Q -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Dark Forces
Actor Katarn_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "Kyle Katarn showed %o the power of the dark side."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.8
	Tag "Kyle Katarn"
	painsound "DarkSideAI/Katarn/Pain"
	deathsound "DarkSideAI/Katarn/Death"
	activesound "DarkSideAI/Katarn/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		69DG A 5 A_Look
		loop
	See:
		69DG BBBBCCCCDDDDEEEEFFFFGGGG 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		69DG A 2 A_FaceTarget
		69DG T 0 A_PlayWeaponSound("katarn/conshot")
		69DG T 2 Bright A_CustomMissile("concussion_projectile",32,0,frandom(-4.00,4.00),0,frandom(-4,4))
		69DG A 37 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		69DG A 4 A_FaceTarget
		69DG T 1 Bright A_CustomMissile("blaster_laser",32,6,frandom(-2,2),0,frandom(-2,2))
		69DG T 1 A_PlayWeaponSound("katarn/rifshot")
		69DG A 0 A_Jump(8,"See")
		69DG A 4 A_FaceTarget
		69DG T 1 Bright A_CustomMissile("blaster_laser",32,6,frandom(-2,2),0,frandom(-2,2))
		69DG T 1 A_PlayWeaponSound("katarn/rifshot")
		69DG A 0 A_Jump(8,"See")
		69DG A 4 A_FaceTarget
		69DG T 1 Bright A_CustomMissile("blaster_laser",32,6,frandom(-2,2),0,frandom(-2,2))
		69DG T 1 A_PlayWeaponSound("katarn/rifshot")
		69DG A 0 A_Jump(8,"See")
		69DG A 4 A_FaceTarget
		69DG T 1 Bright A_CustomMissile("blaster_laser",32,6,frandom(-2,2),0,frandom(-2,2))
		69DG T 1 A_PlayWeaponSound("katarn/rifshot")
		69DG A 0 A_Jump(8,"See")
		69DG A 4 A_FaceTarget
		69DG T 1 Bright A_CustomMissile("blaster_laser",32,6,frandom(-2,2),0,frandom(-2,2))
		69DG T 1 A_PlayWeaponSound("katarn/rifshot")
		69DG A 0 A_Jump(8,"See")
		69DG A 4 A_FaceTarget
		69DG T 1 Bright A_CustomMissile("blaster_laser",32,6,frandom(-2,2),0,frandom(-2,2))
		69DG T 1 A_PlayWeaponSound("katarn/rifshot")
		69DG A 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		69DG U 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		TNT1 A 0 A_Jump(128,"Style2")
		69DG H 6 A_Scream
		69DG I 6 A_NoBlocking
		69DG J 6
		69DG KL 6
		69DG M -1
		Stop
	Style2:
		69DG N 6 A_Scream
		69DG O 6 A_NoBlocking
		69DG P 6
		69DG Q 6
		69DG RS 6
		69DG S -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// In Pursuit of Greed classes
Actor POGreed_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "%o was smoked by an evil Aldus Kaden."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.42
	Tag "Aldus Kaden"
	painsound "DarkSideAI/Mooman/Pain"
	deathsound "DarkSideAI/Mooman/Death"
	activesound "DarkSideAI/Mooman/Taunt"
	BloodType "IPOGBloodMonster"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		GPL0 B 5 A_Look
		loop
	See:
		GPL0 CCCCBBBBAAAABBBB 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		GPL0 C 10 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/plasmashot")
		GPL0 F 0 A_FaceTarget
		GPL0 F 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-2,-8)
		GPL0 F 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-1,-4)
		GPL0 F 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,0,0)
		GPL0 F 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,1,4)
		GPL0 F 2 Bright A_CustomMissile("PGShotgunPlasmaBall",32,2,8)
		GPL0 C 19 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		GPL0 C 2 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/flameburn")
		GPL0 F 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL0 C 0 A_Jump(8,"See")
		GPL0 C 2 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/flameburn")
		GPL0 F 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL0 C 0 A_Jump(8,"See")
		GPL0 C 2 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/flameburn")
		GPL0 F 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL0 C 0 A_Jump(8,"See")
		GPL0 C 2 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/flameburn")
		GPL0 F 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL0 C 0 A_Jump(8,"See")
		GPL0 C 2 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/flameburn")
		GPL0 F 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL0 C 0 A_Jump(8,"See")
		GPL0 C 2 A_FaceTarget
		GPL0 F 0 A_PlayWeaponSound("greed/flameburn")
		GPL0 F 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL0 C 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		GPL0 F 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		GPL0 G 5 A_Scream
		GPL0 H 5 A_NoBlocking
		GPL0 IJKLM 5
		GPL0 N -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor POGreed2_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "%o couldn't outrun a corrupted Tobias Locke."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.42
	Tag "Tobias Locke"
	painsound "DarkSideAI/Cyborg/Pain"
	deathsound "DarkSideAI/Cyborg/Death"
	activesound "DarkSideAI/Cyborg/Taunt"
	BloodType "IPOGBloodMonster"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		GPL2 B 5 A_Look
		loop
	See:
		GPL2 CCCCBBBBAAAABBBB 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		GPL2 C 10 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/plasmashot")
		GPL2 E 0 A_FaceTarget
		GPL2 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-2,-8)
		GPL2 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-1,-4)
		GPL2 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,0,0)
		GPL2 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,1,4)
		GPL2 E 2 Bright A_CustomMissile("PGShotgunPlasmaBall",32,2,8)
		GPL2 C 19 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		GPL2 C 2 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL2 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL2 C 0 A_Jump(8,"See")
		GPL2 C 2 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL2 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL2 C 0 A_Jump(8,"See")
		GPL2 C 2 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL2 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL2 C 0 A_Jump(8,"See")
		GPL2 C 2 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL2 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL2 C 0 A_Jump(8,"See")
		GPL2 C 2 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL2 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL2 C 0 A_Jump(8,"See")
		GPL2 C 2 A_FaceTarget
		GPL2 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL2 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL2 C 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		GPL2 F 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		GPL2 F 5 A_Scream
		GPL2 G 5 A_NoBlocking
		GPL2 HIJKL 5
		GPL2 M -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor POGreed3_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "%o was skinned alive by a Xith."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.42
	Tag "Xith"
	painsound "DarkSideAI/Lizard/Pain"
	deathsound "DarkSideAI/Lizard/Death"
	activesound "DarkSideAI/Lizard/Taunt"
	BloodType "IPOGBloodMonster"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		GPL3 B 5 A_Look
		loop
	See:
		GPL3 CCCCBBBBAAAABBBB 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		GPL3 C 10 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/plasmashot")
		GPL3 E 0 A_FaceTarget
		GPL3 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-2,-8)
		GPL3 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-1,-4)
		GPL3 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,0,0)
		GPL3 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,1,4)
		GPL3 E 2 Bright A_CustomMissile("PGShotgunPlasmaBall",32,2,8)
		GPL3 C 19 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		GPL3 C 2 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL3 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL3 C 0 A_Jump(8,"See")
		GPL3 C 2 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL3 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL3 C 0 A_Jump(8,"See")
		GPL3 C 2 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL3 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL3 C 0 A_Jump(8,"See")
		GPL3 C 2 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL3 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL3 C 0 A_Jump(8,"See")
		GPL3 C 2 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL3 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL3 C 0 A_Jump(8,"See")
		GPL3 C 2 A_FaceTarget
		GPL3 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL3 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL3 C 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		GPL3 F 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		GPL3 F 5 A_Scream
		GPL3 G 5 A_NoBlocking
		GPL3 HIJ 5
		GPL3 K -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor POGreed4_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "A twisted Specimen 7 killed %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.42
	Tag "Specimen 7"
	painsound "DarkSideAI/Specimen/Pain"
	deathsound "DarkSideAI/Specimen/Death"
	activesound "DarkSideAI/Specimen/Taunt"
	BloodType "IPOGBloodMonster"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		GPL4 B 5 A_Look
		loop
	See:
		GPL4 CCCCBBBBAAAABBBB 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		GPL4 C 10 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/plasmashot")
		GPL4 E 0 A_FaceTarget
		GPL4 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-2,-8)
		GPL4 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-1,-4)
		GPL4 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,0,0)
		GPL4 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,1,4)
		GPL4 E 2 Bright A_CustomMissile("PGShotgunPlasmaBall",32,2,8)
		GPL4 C 19 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		GPL4 C 2 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL4 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL4 C 0 A_Jump(8,"See")
		GPL4 C 2 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL4 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL4 C 0 A_Jump(8,"See")
		GPL4 C 2 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL4 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL4 C 0 A_Jump(8,"See")
		GPL4 C 2 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL4 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL4 C 0 A_Jump(8,"See")
		GPL4 C 2 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL4 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL4 C 0 A_Jump(8,"See")
		GPL4 C 2 A_FaceTarget
		GPL4 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL4 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL4 C 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		GPL4 F 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		GPL4 F 5 A_Scream
		GPL4 G 5 A_NoBlocking
		GPL4 HIJKL 5
		GPL4 M -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor POGreed5_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "An evil Theola Nom dominated %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.42
	Tag "Theola Nom"
	painsound "DarkSideAI/Dominatrix/Pain"
	deathsound "DarkSideAI/Dominatrix/Death"
	activesound "DarkSideAI/Dominatrix/Taunt"
	BloodType "IPOGBloodMonster"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		GPL5 B 5 A_Look
		loop
	See:
		GPL5 CCCCBBBBAAAABBBB 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		GPL5 C 10 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/plasmashot")
		GPL5 E 0 A_FaceTarget
		GPL5 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-2,-8)
		GPL5 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,-1,-4)
		GPL5 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,0,0)
		GPL5 E 0 Bright A_CustomMissile("PGShotgunPlasmaBall",32,1,4)
		GPL5 E 2 Bright A_CustomMissile("PGShotgunPlasmaBall",32,2,8)
		GPL5 C 19 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		GPL5 C 2 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL5 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL5 C 0 A_Jump(8,"See")
		GPL5 C 2 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL5 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL5 C 0 A_Jump(8,"See")
		GPL5 C 2 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL5 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL5 C 0 A_Jump(8,"See")
		GPL5 C 2 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL5 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL5 C 0 A_Jump(8,"See")
		GPL5 C 2 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL5 E 2 Bright A_CustomMissile("PGFireBall",32,0,FRandom(-2.5, 2.5))
		GPL5 C 0 A_Jump(8,"See")
		GPL5 C 2 A_FaceTarget
		GPL5 E 0 A_PlayWeaponSound("greed/flameburn")
		GPL5 E 2 Bright A_CustomMissile("PGFireBallPainless",32,0,FRandom(-2.5, 2.5))
		GPL5 C 0 A_CPOSRefire
		goto FireSlot2
	Pain:
		GPL5 F 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		GPL5 F 5 A_Scream
		GPL5 G 5 A_NoBlocking
		GPL5 HIJKL 5
		GPL5 M -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Disruptor
Actor Jack_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "A corrupted Jack Curtis pumped %o full of lead."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.470
	Tag "Jack Curtis"
	painsound "DarkSideAI/JackCurtis/Pain"
	deathsound "DarkSideAI/JackCurtis/Death"
	activesound "DarkSideAI/JackCurtis/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		ZDGY A 5 A_Look
		loop
	See:
		ZDGY AAABBBCCCDDDEEEFFFGGG 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot1")
		ZDGY I 4 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/GreenLaser")
		ZDGY I 2 Bright A_CustomMissile("DisruptorGP_1",32)
		ZDGY I 4 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/GreenLaser")
		ZDGY I 2 Bright A_CustomMissile("DisruptorGP_1",32)
		ZDGY I 4 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/GreenLaser")
		ZDGY I 2 Bright A_CustomMissile("DisruptorGP_1",32)
		ZDGY I 4 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot1:
		ZDGY I 1 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/Pistol")
		ZDGY I 2 Bright A_CustomBulletAttack(2, 1.5, 1, 7, "DisruptorPuff")
		ZDGY I 0 A_Jump(8,"See")
		ZDGY I 1 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/Pistol")
		ZDGY I 2 Bright A_CustomBulletAttack(2, 1.5, 1, 7, "DisruptorPuff")
		ZDGY I 0 A_Jump(8,"See")
		ZDGY I 1 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/Pistol")
		ZDGY I 2 Bright A_CustomBulletAttack(2, 1.5, 1, 7, "DisruptorPuff")
		ZDGY I 0 A_Jump(8,"See")
		ZDGY I 1 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/Pistol")
		ZDGY I 2 Bright A_CustomBulletAttack(2, 1.5, 1, 7, "DisruptorPuff")
		ZDGY I 0 A_Jump(8,"See")
		ZDGY I 1 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/Pistol")
		ZDGY I 2 Bright A_CustomBulletAttack(2, 1.5, 1, 7, "DisruptorPuff")
		ZDGY I 0 A_Jump(8,"See")
		ZDGY I 1 A_FaceTarget
		ZDGY I 0 A_PlayWeaponSound("Disruptor/Pistol")
		ZDGY I 2 Bright A_CustomBulletAttack(2, 1.5, 1, 7, "DisruptorPuff")
		ZDGY I 0 A_CPOSRefire
		goto FireSlot1
	Pain:
		ZDGY K 2
		ZDGY L 2 A_Pain
		ZDGY M 2
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		ZDGY N 5 A_Scream
		ZDGY O 5 A_NoBlocking
		ZDGY P 5
		ZDGY Q 5
		ZDGY RSTUV 5
		ZDGY W -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Witchaven
Actor Grondoval_AI : SamsaraMonsterDarkSideAIColored
{
	obituary "An evil Grondoval slashed %o down."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.4
	Gravity 0.9
	BloodColor "darkred"
	Tag "Grondoval"
	painsound "DarkSideAI/Grondoval/Pain"
	deathsound "DarkSideAI/Grondoval/Death"
	activesound "DarkSideAI/Grondoval/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		WPL1 A 5 A_Look
		loop
	See:
		WPL1 AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		WPL1 EF 2 A_FaceTarget
		WPL1 G 0 A_PlayWeaponSound("gbow/shot")
		WPL1 G 2 bright A_CustomMissile("WTMegaBowArrow", 32)
		WPL1 H 12 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		WPL1 EF 2 A_FaceTarget
	FireSlot4Continue:
		WPL1 G 2 A_PlayWeaponSound("ggen/buzzloop")
		WPL1 G 2 bright A_CustomMissile("WTIceHalberdIceBall", 32, 0, random(-2,2))
		WPL1 H 4 A_FaceTarget
		WPL1 H 2 A_Jump(8,"See")
		WPL1 G 2 A_PlayWeaponSound("ggen/buzzloop")
		WPL1 G 2 bright A_CustomMissile("WTIceHalberdIceBall", 32, 0, random(-2,2))
		WPL1 H 4 A_FaceTarget
		WPL1 H 2 A_Jump(8,"See")
		WPL1 G 2 A_PlayWeaponSound("ggen/buzzloop")
		WPL1 G 2 bright A_CustomMissile("WTIceHalberdIceBall", 32, 0, random(-2,2))
		WPL1 H 4 A_FaceTarget
		WPL1 H 2 A_Jump(8,"See")
		WPL1 G 2 A_PlayWeaponSound("ggen/buzzloop")
		WPL1 G 2 bright A_CustomMissile("WTIceHalberdIceBall", 32, 0, random(-2,2))
		WPL1 H 4 A_FaceTarget
		WPL1 H 2 A_Jump(8,"See")
		WPL1 G 2 A_PlayWeaponSound("ggen/buzzloop")
		WPL1 G 2 bright A_CustomMissile("WTIceHalberdIceBall", 32, 0, random(-2,2))
		WPL1 H 4 A_FaceTarget
		WPL1 H 2 A_Jump(8,"See")
		WPL1 G 2 A_PlayWeaponSound("ggen/buzzloop")
		WPL1 G 2 bright A_CustomMissile("WTIceHalberdIceBall", 32, 0, random(-2,2))
		WPL1 H 4 A_FaceTarget
		WPL1 H 0 A_CPOSRefire
		goto FireSlot4Continue
	Pain:
		WPL1 E 3
		WPL1 E 2 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		WPL1 O 7 A_Scream
		WPL1 P 7 A_NoBlocking
		WPL1 QRSTUV 7
		WPL1 W -1
		Stop
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		WPL1 O 7 A_Scream
		WPL1 P 7 A_NoBlocking
		WPL1 Q 7
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		WPL1 RSTUV 7
		WPL1 W -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Half-Life classes
Actor Freeman_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was killed by Gordon Freeman on behalf of The G-Man."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	Scale 0.19
	Tag "Gordon Freeman"
	painsound "DarkSideAI/Freeman/Pain"
	deathsound "DarkSideAI/Freeman/Death"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		VL31 ABCDEFGHIJKLM 3 A_Look
		loop
	See:
		VL34 AAABBBCCCDDDEEEFFFGGGHHHIIIJJJKKKLLLMMMNNNOOO 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot2")
		VL31 O 0 A_FaceTarget
		VL31 O 0 A_PlayWeaponSound("halflife/shotgun_shoot")
		VL31 OOOOOO 0 Bright A_CustomMissile("HLShotgunBullet", 32, 0, frandom(-3.00,3.00), 0, frandom(-3.00,3.00))
		VL31 OPQR 3
		VL31 S 2 A_FaceTarget
		VL31 S 9 A_PlayWeaponSound("halflife/shotgun_pump")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot2:
		VL31 O 0 A_FaceTarget
		VL31 O 0 A_PlayWeaponSound("halflife/shotgun_boom")
		VL31 OOOOOOOOOOOO 0 Bright A_CustomMissile("HLShotgunBullet", 32, 0, random(-35,35), 0, random(-35,35)/10.0)
		VL31 OPQR 7
		VL31 S 1 A_FaceTarget
		VL31 S 21 A_PlayWeaponSound("halflife/shotgun_pump")
		TNT1 A 0 A_Jump(128, "See")
		goto FireSlot2
	Pain:
		VL31 A 2 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		TNT1 A 0 A_Jump(256,"Death2","Death3","Death4","Death5","Death6")
		goto Death2
	Death2:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		HPL1 ABCDEFGHIJKLMNO 3
		HPL1 P -1
		stop
	Death3:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		HPL2 ABCDEFGHIJ 3
		HPL2 K -1
		stop
	Death4:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		HPL3 ABCDEFGHIJKL 3
		HPL3 M -1
		stop
	Death5:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		HPL4 ABCDEFGHIJKL 3
		HPL4 M -1
		stop
	Death6:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		HPL5 ABCDEFGHIJKLM 3
		HPL5 N -1
		stop
	Death.HLEgon:
	Death.FreemanGibs:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TNT1 A 0 A_Scream
		TNT1 A 0 A_SpawnItem("HLGenericGibSpawner")
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

Actor Shephard_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was executed by Adrian Shephard under orders from the HECU."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	Scale 0.19
	Tag "Adrian Shephard"
	painsound "DarkSideAI/Freeman/Pain"
	deathsound "DarkSideAI/Freeman/Death"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		OP41 ABCDEFGHIJKLM 3 A_Look
		loop
	See:
		OP44 AAABBBCCCDDDEEEFFFGGGHHHIIIJJJKKKLLLMMMNNNOOO 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		OP41 O 0 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shoot")
		OP41 O 1 Bright A_CustomMissile("HLMP5Bullet", 32, 0, random(-25,25)/10.0, 0, random(-25,25)/10.0)
		OP41 P 2 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shoot")
		OP41 O 1 Bright A_CustomMissile("HLMP5Bullet", 32, 0, random(-25,25)/10.0, 0, random(-25,25)/10.0)
		OP41 P 2 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shoot")
		OP41 O 1 Bright A_CustomMissile("HLMP5Bullet", 32, 0, random(-25,25)/10.0, 0, random(-25,25)/10.0)
		OP41 P 2 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shoot")
		OP41 O 1 Bright A_CustomMissile("HLMP5Bullet", 32, 0, random(-25,25)/10.0, 0, random(-25,25)/10.0)
		OP41 P 2 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shoot")
		OP41 O 1 Bright A_CustomMissile("HLMP5Bullet", 32, 0, random(-25,25)/10.0, 0, random(-25,25)/10.0)
		OP41 P 2 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shoot")
		OP41 O 1 Bright A_CustomMissile("HLMP5Bullet", 32, 0, random(-25,25)/10.0, 0, random(-25,25)/10.0)
		OP41 P 2 A_FaceTarget
		OP41 QR 4
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		OP41 O 0 A_FaceTarget
		OP41 O 0 A_PlayWeaponSound("halflife/mp5_shootgrenade")
		OP41 O 0 Bright A_CustomMissile("HLMP5Grenade", 32, 0, 0, 0, 5)
		OP41 OPQR 8
		TNT1 A 0 A_Jump(128, "See")
		goto FireSlot4
	Pain:
		OP41 A 2 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		TNT1 A 0 A_Jump(256,"Death2","Death3","Death4","Death5","Death6")
		goto Death2
	Death2:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		OPL1 ABCDEFGHIJKLMNO 3
		OPL1 P -1
		stop
	Death3:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		OPL2 ABCDEFGHIJ 3
		OPL2 K -1
		stop
	Death4:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		OPL3 ABCDEFGHIJKL 3
		OPL3 M -1
		stop
	Death5:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		OPL4 ABCDEFGHIJKL 3
		OPL4 M -1
		stop
	Death6:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_NoBlocking
		OPL5 ABCDEFGHIJKLM 3
		OPL5 N -1
		stop
	Death.HLEgon:
	Death.FreemanGibs:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TNT1 A 0 A_Scream
		TNT1 A 0 A_SpawnItem("HLGenericGibSpawner")
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Shadow Warrior
Actor LoWang_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o was sliced in half by a twisted Lo Wang."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	+NOBLOODDECALS
	Maxstepheight 8
	cameraheight 45
	XScale 0.51
	YScale 0.4
	Tag "Lo Wang"
	painsound "DarkSideAI/LoWang/Pain"
	deathsound "DarkSideAI/LoWang/Death"
	activesound "DarkSideAI/LoWang/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		SPL1 A 5 A_Look
		loop
	See:
		SPL1 AAAABBBBCCCCDDDD 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("Weapons/RiotgunFire")
		SPL1 F 2 A_CustomBulletAttack(6.2, 4.2, 12, 4, "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("Weapons/RiotgunFire")
		SPL1 F 2 A_CustomBulletAttack(6.2, 4.2, 12, 4, "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("Weapons/RiotgunFire")
		SPL1 F 2 A_CustomBulletAttack(6.2, 4.2, 12, 4, "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("Weapons/RiotgunFire")
		SPL1 F 2 A_CustomBulletAttack(6.2, 4.2, 12, 4, "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("Weapons/RiotGunUp")
		SPL1 E 22 A_FaceTarget
		SPL1 E 2 A_PlayWeaponSound("Weapons/RiotGunLoad")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("uzi/fire")
		SPL1 EE 0 Bright A_CustomMissile("MicroUziTracer", 32, 0, random(-2,2), 0, 0)
		SPL1 F 2 A_CustomBulletAttack(5.4, 4.3, 2, random(7,9), "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 0 A_Jump(8,"See")
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("uzi/fire")
		SPL1 EE 0 Bright A_CustomMissile("MicroUziTracer", 32, 0, random(-2,2), 0, 0)
		SPL1 F 2 A_CustomBulletAttack(5.4, 4.3, 2, random(7,9), "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 0 A_Jump(8,"See")
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("uzi/fire")
		SPL1 EE 0 Bright A_CustomMissile("MicroUziTracer", 32, 0, random(-2,2), 0, 0)
		SPL1 F 2 A_CustomBulletAttack(5.4, 4.3, 2, random(7,9), "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 0 A_Jump(8,"See")
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("uzi/fire")
		SPL1 EE 0 Bright A_CustomMissile("MicroUziTracer", 32, 0, random(-2,2), 0, 0)
		SPL1 F 2 A_CustomBulletAttack(5.4, 4.3, 2, random(7,9), "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 0 A_Jump(8,"See")
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("uzi/fire")
		SPL1 EE 0 Bright A_CustomMissile("MicroUziTracer", 32, 0, random(-2,2), 0, 0)
		SPL1 F 2 A_CustomBulletAttack(5.4, 4.3, 2, random(7,9), "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 0 A_Jump(8,"See")
		SPL1 E 3 A_FaceTarget
		SPL1 E 0 A_PlayWeaponSound("uzi/fire")
		SPL1 EE 0 Bright A_CustomMissile("MicroUziTracer", 32, 0, random(-2,2), 0, 0)
		SPL1 F 2 A_CustomBulletAttack(5.4, 4.3, 2, random(7,9), "BulletPuffSW", 0, CBAF_NORANDOM)
		SPL1 E 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		SPL1 A 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		SPL1 N 4
		SPL1 N 4 A_Scream
		SPL1 O 8 A_NoBlocking
		SPL1 P 8
		SPL1 Q 8
		SPL1 RSTU 8
		SPL1 V -1
		stop
	XDeathForWang:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_SpawnItemEx("SWHumanGibSpawner_LoWang")
		TNT1 A 0 A_SpawnItemEx("LoWangHead",random(-12,12),random(-12,12),random(0,40),random(-5,5),random(-5,5),random(4,10),0,SXF_CLIENTSIDE)
		TNT1 A 0 A_PlaySound("sw/gib_start")
		TNT1 A 5 A_NoBlocking
		TNT1 A -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathWang")
		TNT1 A 5 A_Playsound("SPKILL0")
		TNT1 A -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Cybermage: Darklight Awakening
Actor Cybermage_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "%o swallowed an evil Cybermage's Darklight Foil."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Scale 0.25
	Maxstepheight 8
	cameraheight 45
	Tag "Cybermage"
	painsound "DarkSideAI/Cybermage/Pain"
	deathsound "DarkSideAI/Cybermage/Death"
	activesound "DarkSideAI/Cybermage/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		CMPL K 1 A_Look
		loop
	See:
		CMPL KKKKLLLLMMMMNNNN 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CMPL O 4 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/BRFire")
		CMPL O 0 Bright A_CustomBulletAttack(3,3,3,random(12,20),"CMBRPuff",0,CBAF_NORANDOM)
		CMPL P 3 Bright
		CMPL O 4 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/BRFire")
		CMPL O 0 Bright A_CustomBulletAttack(3,3,3,random(12,20),"CMBRPuff",0,CBAF_NORANDOM)
		CMPL P 3 Bright
		CMPL O 4 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/BRFire")
		CMPL O 0 Bright A_CustomBulletAttack(3,3,3,random(12,20),"CMBRPuff",0,CBAF_NORANDOM)
		CMPL P 3 Bright
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CMPL O 2 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/SMGFire")
		CMPL O 0 Bright A_CustomBulletAttack(5,1.5,1,10,"CMBulletPuff",0,CBAF_NORANDOM)
		CMPL P 1 Bright
		CMPL O 0 A_Jump(8,"See")
		CMPL O 2 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/SMGFire")
		CMPL O 0 Bright A_CustomBulletAttack(5,1.5,1,10,"CMBulletPuff",0,CBAF_NORANDOM)
		CMPL P 1 Bright
		CMPL O 0 A_Jump(8,"See")
		CMPL O 2 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/SMGFire")
		CMPL O 0 Bright A_CustomBulletAttack(5,1.5,1,10,"CMBulletPuff",0,CBAF_NORANDOM)
		CMPL P 1 Bright
		CMPL O 0 A_Jump(8,"See")
		CMPL O 2 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/SMGFire")
		CMPL O 0 Bright A_CustomBulletAttack(5,1.5,1,10,"CMBulletPuff",0,CBAF_NORANDOM)
		CMPL P 1 Bright
		CMPL O 0 A_Jump(8,"See")
		CMPL O 2 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/SMGFire")
		CMPL O 0 Bright A_CustomBulletAttack(5,1.5,1,10,"CMBulletPuff",0,CBAF_NORANDOM)
		CMPL P 1 Bright
		CMPL O 0 A_Jump(8,"See")
		CMPL O 2 A_FaceTarget
		CMPL O 0 A_PlayWeaponSound("CM/SMGFire")
		CMPL O 0 Bright A_CustomBulletAttack(5,1.5,1,10,"CMBulletPuff",0,CBAF_NORANDOM)
		CMPL P 1 Bright
		CMPL O 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		CMPL T 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		CMPL T 5 A_Scream
		CMPL U 5 A_NoBlocking
		CMPL UV 5
		CMPL V -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Exhumed
Actor Jon_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A corrupted Jon mummified %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.55
	Tag "Jon"
	painsound "DarkSideAI/Jon/Pain"
	deathsound "DarkSideAI/Jon/Death"
	activesound "DarkSideAI/Jon/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		_EXR B 1 A_Look
		loop
	See:
		_EXR DDDDEEEEFFFFGGGG 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		_EXR D 2 A_FaceTarget
		_EXR D 12 A_PlayWeaponSound("Jon/CobraStart")
		_EXR D 2 A_PlayWeaponSound("Jon/CobraFire")
		_EXR H 4 Bright A_CustomMissile("CobraStaffSnake", 32, 0, 0)
		_EXR D 11 A_FaceTarget
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		_EXR D 2 A_FaceTarget
		_EXR D 0 A_PlayWeaponSound("Jon/M60Fire")
		_EXR H 2 Bright A_CustomBulletAttack(2,2,1,15,"PSBulletPuff",0,CBAF_NORANDOM)
		_EXR D 0 A_Jump(8,"See")
		_EXR D 2 A_FaceTarget
		_EXR D 0 A_PlayWeaponSound("Jon/M60Fire")
		_EXR H 2 Bright A_CustomBulletAttack(2,2,1,15,"PSBulletPuff",0,CBAF_NORANDOM)
		_EXR D 0 A_Jump(8,"See")
		_EXR D 2 A_FaceTarget
		_EXR D 0 A_PlayWeaponSound("Jon/M60Fire")
		_EXR H 2 Bright A_CustomBulletAttack(2,2,1,15,"PSBulletPuff",0,CBAF_NORANDOM)
		_EXR D 0 A_Jump(8,"See")
		_EXR D 2 A_FaceTarget
		_EXR D 0 A_PlayWeaponSound("Jon/M60Fire")
		_EXR H 2 Bright A_CustomBulletAttack(2,2,1,15,"PSBulletPuff",0,CBAF_NORANDOM)
		_EXR D 0 A_Jump(8,"See")
		_EXR D 2 A_FaceTarget
		_EXR D 0 A_PlayWeaponSound("Jon/M60Fire")
		_EXR H 2 Bright A_CustomBulletAttack(2,2,1,15,"PSBulletPuff",0,CBAF_NORANDOM)
		_EXR D 0 A_Jump(8,"See")
		_EXR D 2 A_FaceTarget
		_EXR D 0 A_PlayWeaponSound("Jon/M60Fire")
		_EXR H 2 Bright A_CustomBulletAttack(2,2,1,15,"PSBulletPuff",0,CBAF_NORANDOM)
		_EXR D 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		TNT1 A 0 A_Jump(128,"PainAnim2","PainAnim3")
		_EXR J 4 A_Pain
		goto See
	PainAnim2:
		_EXR K 4 A_Pain
		goto See
	PainAnim3:
		_EXR L 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		EX_D A 6 A_Scream	
		EX_D B 7 A_NoBlocking
		EX_D C 6
		EX_D D 8
		EX_D E 7
		EX_D F -1
		stop
	XDeathForJon:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		EX_D A 1 A_PlaySound("Jon/XDeath",CHAN_VOICE)
		EX_X B 1 A_UnsetSolid
		EX_X B 6
		EX_X C 6 
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
		TNT1 A 0 A_PlaySound("Jon/XGibs",CHAN_BODY,1.0)	
		NULL A 0 A_SpawnItemEx("ExGore1_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGore2_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGore3_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGore4_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGore5_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGore7_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGoreRibcage_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExGoreGuts_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL A 0 A_SpawnItemEx("ExBloodCloud_PS", 0, 0, 35)
		NULL A 0 A_SpawnItemEx("ExPlayerGoreHead_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		NULL AA 0 A_SpawnItemEx("ExPlayerGoreFoot_PS",0, 0, 32, random(3.0,5.0),random(3.0,5.0),random(0.0,10.0),random(0.0,360.0), SXF_ABSOLUTEANGLE , 0)
		EX_X D 2 A_NoBlocking
		EX_X E 2
		TNT1 A 1 
		TNT1 A -1
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_Scream
		TNT1 A 0 A_SpawnItemEx("BurnDeathJon",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A -1
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Redneck Rampage
Actor Leonard_AI : SamsaraMonsterDarkSideAIColored
{
	obituary "A drunken Leonard threw some dynamite at %o's face."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	+NOBLOODDECALS
	BloodType "LeonardBlood_RR"
	Bloodcolor "ba 2c 10"
	YScale 0.30
	XScale 0.361
	Maxstepheight 8
	cameraheight 45
	Tag "Leonard"
	painsound "DarkSideAI/Leonard/Pain"
	deathsound "DarkSideAI/Leonard/Death"
	activesound "DarkSideAI/Leonard/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		LEO_ T 1 A_Look
		loop
	See:
		LEO_ IIIIJJJJKKKKLLLLMMMMNNNNOOOOPPPPAAAABBBBCCCCDDDDEEEEFFFFGGGGHHHH 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		LEO_ T 4 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/XBOWF2")
		LEO_ V 5 Bright A_CustomMissile("RRHUNTINDYNOMITEARROW", 32, 0, 0)
		LEO_ T 10 A_FaceTarget
		LEO_ T 16 A_PlaySound("RR/XBOWReload")
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		LEO_ T 2 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/RanchRF")
		LEO_ V 1 Bright A_CustomBulletAttack(9,6,1,20,"RRPuff",0,CBAF_NORANDOM)
		LEO_ T 0 A_Jump(8,"See")
		LEO_ T 2 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/RanchRF")
		LEO_ V 1 Bright A_CustomBulletAttack(9,6,1,20,"RRPuff",0,CBAF_NORANDOM)
		LEO_ T 0 A_Jump(8,"See")
		LEO_ T 2 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/RanchRF")
		LEO_ V 1 Bright A_CustomBulletAttack(9,6,1,20,"RRPuff",0,CBAF_NORANDOM)
		LEO_ T 0 A_Jump(8,"See")
		LEO_ T 2 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/RanchRF")
		LEO_ V 1 Bright A_CustomBulletAttack(9,6,1,20,"RRPuff",0,CBAF_NORANDOM)
		LEO_ T 0 A_Jump(8,"See")
		LEO_ T 2 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/RanchRF")
		LEO_ V 1 Bright A_CustomBulletAttack(9,6,1,20,"RRPuff",0,CBAF_NORANDOM)
		LEO_ T 0 A_Jump(8,"See")
		LEO_ T 2 A_FaceTarget
		LEO_ T 0 A_PlayWeaponSound("RR/RanchRF")
		LEO_ V 1 Bright A_CustomBulletAttack(9,6,1,20,"RRPuff",0,CBAF_NORANDOM)
		LEO_ T 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		LEO_ U 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		LE_3 A 8 A_Scream
		LE_3 B 8 A_NoBlocking
		LE_3 C 8 
		LE_3 D 8
		LE_3 EFGH 8
		LE_3 I -1
		Stop
	XDeathForLeonard:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_UnsetSolid  
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
		TNT1 A 0 A_SpawnItemEx("LeonardBlood_RR")
		RR20 A 0 A_CustomMissile("LeonardHead_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 AA 0 A_CustomMissile("LeonardArm_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 AA 0 A_CustomMissile("LeonardLeg_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))  
		RR20 A 0 A_CustomMissile("MiscGib1_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 A 0 A_CustomMissile("MiscGib2_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 A 0 A_CustomMissile("MiscGib3_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 A 0 A_CustomMissile("MiscGib4_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 A 0 A_CustomMissile("MiscGib5_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
		RR20 A 0 A_CustomMissile("MiscGib6_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))	
		RR20 AAAAA 0 A_CustomMissile("MiscGib7_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))	
		TNT1 A 0 A_PlaySound("Leonard/XDeath",CHAN_BODY,1.0,0,ATTN_NORM)
		TNT1 A 5 A_NoBlocking
		TNT1 A -1 
		Stop
	Burn:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItem("BurnDeathLeonard")
		TNT1 A 5 A_PlaySound("Leonard/Scream")
		TNT1 A 105
		TNT1 A -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Quake II
Actor Bitterman_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "A Strogg clone of Bitterman shotgunned %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Gravity 0.8125
	Tag "Bitterman"
	painsound "DarkSideAI/Bitterman/Pain"
	deathsound "DarkSideAI/Bitterman/Death"
	activesound "DarkSideAI/Bitterman/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		PB01 TSRQPONMLKJIHGFEDCBABCDEFGHIJKLMNOPQRSTU 4 A_Look
		loop
	See:
		PB02 AAAABBBBCCCCDDDDEEEEFFFF 1 A_FastChase
		Loop
	Missile:
		PB02 G 0 A_FaceTarget
		PB02 G 0 A_PlayWeaponSound("Q2Weapons/ShotgunFire")
		PB02 G 0 A_CustomBulletAttack(6, 3, 12, 6, "Q2BulletPuff", 0, CBAF_NORANDOM)
		PB02 GH 3
		PB02 H 0 A_PlaySound("Q2Weapons/ShotgunPump")
		PB02 IJKLMN 3
		PB02 N 6
		PB02 N 0 A_CPOSRefire
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	Pain:
		TNT1 A 0 A_Pain
		TNT1 A 0 A_Jump(128,"PainAnim2","PainAnim3")
		PB03 ABCD 3
		goto See
	PainAnim2:
		PB03 EFGH 3
		goto See
	PainAnim3:
		PB03 IJKL 3
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		TNT1 A 0 A_Scream
		TNT1 A 0 A_Jump(256,"Death1","Death2","Death3")
		P001 ABCDE 6
		P001 F -1
		Stop
	Death2:
		P001 GHIJK 6
		P001 L -1
		Stop
	Death3:
		P001 MNOPQR 5
		P001 S 20
		P001 T -1
		Stop
	XDeathForBitterman:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 5 A_SpawnItem(Q2GibSpawner)
		TNT1 A 1
		TNT1 A -1
		Stop
	Crush:
		TNT1 AAAAAAA 0 A_SpawnItemEx(Q2Gib,Random2(40),0,5,Random(0,1),0,2,Random(1,360))
		TNT1 A 5 A_Scream
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Hexen II
Actor Demoness_AI : SamsaraMonsterDarkSideAIRegular
{
	obituary "%o's soul was violently taken by Demoness."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Demoness"
	Gravity 0.8125
	painsound "DarkSideAI/Demoness/Pain"
	deathsound "DarkSideAI/Demoness/Death"
	activesound "DarkSideAI/Demoness/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		HX04 ABCDEFGHIJKLM 2 A_Look
		loop
	See:
		HX01 AABBCCDDEEFFGGHHIIJJKKLL 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_CustomMissile("Hexen2AcidRuneMissile", 32, 0, 0)
		HX07 ABCDEFG 2
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_CustomMissile("Hexen2AcidRuneMissile", 32, 0, 0)
		HX07 ABCDEFG 2
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_CustomMissile("Hexen2AcidRuneMissile", 32, 0, 0)
		HX07 ABCDEFGH 2
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_PlayWeaponSound("Hexen2/BonerFire")
		HX07 A 0 Bright A_CustomBulletAttack(8, 8, 4, 2, "Hexen2BonerPuffGenerator", 0, CBAF_NORANDOM)
		HX07 A 2 A_CustomMissile("Hexen2BoneShotProjectile", 32, 0, random(-5,5))
		HX07 A 0 A_Jump(8,"See")
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_PlayWeaponSound("Hexen2/BonerFire")
		HX07 A 0 Bright A_CustomBulletAttack(8, 8, 4, 2, "Hexen2BonerPuffGenerator", 0, CBAF_NORANDOM)
		HX07 A 2 A_CustomMissile("Hexen2BoneShotProjectile", 32, 0, random(-5,5))
		HX07 A 0 A_Jump(8,"See")
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_PlayWeaponSound("Hexen2/BonerFire")
		HX07 A 0 Bright A_CustomBulletAttack(8, 8, 4, 2, "Hexen2BonerPuffGenerator", 0, CBAF_NORANDOM)
		HX07 A 2 A_CustomMissile("Hexen2BoneShotProjectile", 32, 0, random(-5,5))
		HX07 A 0 A_Jump(8,"See")
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_PlayWeaponSound("Hexen2/BonerFire")
		HX07 A 0 Bright A_CustomBulletAttack(8, 8, 4, 2, "Hexen2BonerPuffGenerator", 0, CBAF_NORANDOM)
		HX07 A 2 A_CustomMissile("Hexen2BoneShotProjectile", 32, 0, random(-5,5))
		HX07 A 0 A_Jump(8,"See")
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_PlayWeaponSound("Hexen2/BonerFire")
		HX07 A 0 Bright A_CustomBulletAttack(8, 8, 4, 2, "Hexen2BonerPuffGenerator", 0, CBAF_NORANDOM)
		HX07 A 2 A_CustomMissile("Hexen2BoneShotProjectile", 32, 0, random(-5,5))
		HX07 A 0 A_Jump(8,"See")
		HX07 A 0 A_FaceTarget
		HX07 A 0 A_PlayWeaponSound("Hexen2/BonerFire")
		HX07 A 0 Bright A_CustomBulletAttack(8, 8, 4, 2, "Hexen2BonerPuffGenerator", 0, CBAF_NORANDOM)
		HX07 A 2 A_CustomMissile("Hexen2BoneShotProjectile", 32, 0, random(-5,5))
		HX07 A 0 A_CPOSRefire
		goto FireSlot4
	Pain:
		HX10 A 2 A_Pain
		HX10 BCDEFG 2
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		HX17 A 0 A_Scream
		HX17 A 0 A_NoBlocking
		HX17 ABCDEFGHIJKLMNOPQRST 2
		HX17 T -1
		stop
	XDeathForDemoness:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_Playsound("Hexen2/Gib", CHAN_5)
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("Hexen2GibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 A_UnsetSolid
		Stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Goldeneye 007
Actor JamesBond_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "A turncoat James Bond silenced %o with his PP7."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Scale 0.3
	Tag "James Bond"
	painsound "DarkSideAI/Bond/Pain"
	activesound "DarkSideAI/Bond/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		GEBA ABCDEFGHIJKLMNOPONMLKJIHGFEDCB 3 A_Look
		loop
	See:
		GEBB ABCDEFGHIJKLMNOPQRSTUVW 1 A_FastChase
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "Missile2")
		GEBI A 2 A_FaceTarget
		TNT1 A 0 A_PlaySound("Goldeneye/SilencerShot")
		TNT1 A 0 A_CustomMissile("Goldeneye_PP7Tracer", 0, 0, frandom(-1,1), 0, 0)
		GEBI BCDEFGH 2 Bright
		GEBI A 2 A_FaceTarget
		TNT1 A 0 A_PlaySound("Goldeneye/SilencerShot")
		TNT1 A 0 A_CustomMissile("Goldeneye_PP7Tracer", 0, 0, frandom(-1,1), 0, 0)
		GEBI BCDEFGH 2 Bright
		goto Missile
	Missile2:
		GEBI A 2 A_FaceTarget
		TNT1 A 0 A_PlaySound("Goldeneye/SilencerShot")
		TNT1 A 0 A_CustomMissile("Goldeneye_PP7Tracer", 0, 0, frandom(-1,1), 0, 0)
		GEBI BCDEF 2 Bright
		GEBI A 2 A_FaceTarget
		TNT1 A 0 A_PlaySound("Goldeneye/SilencerShot")
		TNT1 A 0 A_CustomMissile("Goldeneye_PP7Tracer", 0, 0, frandom(-1,1), 0, 0)
		GEBI BCDEF 2 Bright
		GEBI A 2 A_FaceTarget
		TNT1 A 0 A_PlaySound("Goldeneye/SilencerShot")
		TNT1 A 0 A_CustomMissile("Goldeneye_PP7Tracer", 0, 0, frandom(-1,1), 0, 0)
		GEBI BCDEF 2 Bright
		GEBI F 0 A_CPOSRefire
		TNT1 A 0 A_Jump(64, "See")
		goto Missile2
	Pain:
		GEBK A 2 A_Pain
		GEBK BCDEF 2
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		GEAD A 0 A_Jump(256,"Death1","Death2","Death3","Death4","Death5")
	Death1:
		GEBD ABCDEFGHIJKLMNOPQRSTU 2
		GEBD U -1
		stop
	Death2:
		GEBE ABCDEFGHIJKLMNOPQR 2
		GEBE R -1
		stop
	Death3:
		GEBF ABCDEFGHIJKLMNOPQRSTUVW 2
		GEBF W -1
		stop
	Death4:
		GEBG ABCDEFGHIJKLMNOPQRSTUV 2
		GEBG V -1
		stop
	Death5:
		GEBH ABCDEFGHIJKLMNOPQRSTUV 2
		GEBH V -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}

// Catacomb 3-D
Actor PettonEverhail_AI : SamsaraMonsterDarkSideAIRegularTotalGib
{
	obituary "A Nemesis-controlled Petton Xterminated %o."
	radius 16
	height 56
	health 1000
	mass 100
	speed 8
	monster
	+FLOORCLIP
	-FRIENDLY
	+NOINFIGHTING
	Maxstepheight 8
	cameraheight 45
	Tag "Petton Everhail"
	painsound "DarkSideAI/Petton/Pain"
	deathsound "DarkSideAI/Petton/Death"
	activesound "DarkSideAI/Petton/Taunt"
	var int user_scalex;
	var int user_scaley;
	States
	{
	Spawn:
		CTPL A 5 A_Look
		loop
	See:
		CTPL AAAABBBB 1 A_FastChase
		CTPL A 0 A_PlaySound("Catacomb/FootStepLeft")
		CTPL AAAACCCC 1 A_FastChase
		CTPL A 0 A_PlaySound("Catacomb/FootStepRight")
		Loop
	Missile:
		TNT1 A 0 A_Jump(48, "FireSlot4")
		CTPL A 3 A_FaceTarget
		CTPL A 0 A_PlayWeaponSound("Catacomb/MMisFire")		
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 3 A_FaceTarget
		CTPL A 0 A_PlayWeaponSound("Catacomb/MMisFire")		
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 3 A_FaceTarget
		CTPL A 0 A_PlayWeaponSound("Catacomb/MMisFire")		
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		TNT1 A 0 A_Jump(128, "See")
		goto Missile
	FireSlot4:
		CTPL A 1 A_FaceTarget
		CTPL A 0 A_PlayWeaponSound("Catacomb/Zappers")
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 1 A_FaceTarget
		CTPL E 2 Bright A_CustomMissile("Catacomb_MagicMissileProjectile", 32, 0, 0)
		CTPL A 8 A_FaceTarget
		goto See
	Pain:
		CTPL D 4 A_Pain
		goto See
	Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
		CTPL D 10 A_Scream
		CTPL F 10 A_NoBlocking
		CTPL G -1
		stop
	Death.ExpanderDMG:
	XDeath.ExpanderDMG:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoop
	ExpanderLoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
		loop
	ExpanderPop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	Death.ExpanderDMGCoop:
	XDeath.ExpanderDMGCoop:
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_PlaySound("duke/expand")
		Goto ExpanderLoopCoop
	ExpanderLoopCoop:
		"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
		"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
		"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
		"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
		"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
		"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
		loop
	ExpanderPopCoop:
		"####" "#" 10
		"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
		"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
		"####" A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" A 0 A_Jump(96,2)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
		"####" A 0 A_SetScale (1.0, 1.0)
		"####" A 0 A_UnsetSolid
		"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
		TNT1 A -1 A_UnsetSolid
		Stop
	}
}