actor Totenkopf_MP40 : InstantSwitchWeapon
{
    Weapon.SelectionOrder 800
    Weapon.SlotNumber 2
	Weapon.SlotPriority 0
    Inventory.PickUpSound "Totenkopf/getweapon"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 16
    Weapon.AmmoType "Clip"
    +THRUGHOST
    +DONTBOB
    +INVENTORY.UNDROPPABLE
    Inventory.PickupMessage "MP40 Submachine Gun"
    Obituary ""
    Weapon.YAdjust 16
    States
    {
      Spawn:
		TK04 K 4
        Loop

      Ready:
        TK04 A 1 A_WeaponReady
        loop

      Fire:
        TK04 B 3
		Goto Hold

      Hold:
        TK04 C 0 A_PlaySound("Totenkopf/atkmp40",CHAN_WEAPON)
        TK04 C 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MP40",random(-2,2))
        TK04 D 3
		TK04 D 0 A_Refire
        TK04 E 2
        Goto Ready
    }
} 

actor Totenkopf_MP40Dual : Totenkopf_MP40
{
    Weapon.SelectionOrder 750
	Weapon.SlotPriority 1
    States
    {
      Spawn:
		TK04 K 4
        Loop

      Ready:
        TK04 F 1 A_WeaponReady
        loop
		
	  Fire:
        TK04 G 3
		Goto Hold
		
      Hold:
        TK04 H 0 A_PlaySound("Totenkopf/atkmp40",CHAN_WEAPON)
        TK04 H 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MP40",random(-4,4))
		TK04 I 0 A_JumpIfNoAmmo(5)
		TK04 I 0 A_PlaySound("Totenkopf/atkmp40",CHAN_WEAPON)
        TK04 I 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MP40",random(-4,4))
		TK04 I 0 A_JumpIfNoAmmo(2)
		TK04 I 0 A_Refire
        TK04 J 2
        Goto Ready
    }
} 

Actor Totenkopf_Tracer_MP40 : Totenkopf_Tracer { Damage (8 + (random(0,256)%22)) }
