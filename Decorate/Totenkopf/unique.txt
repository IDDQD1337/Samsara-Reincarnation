actor Totenkopf_Mauser : InstantSwitchWeapon
{
    Weapon.SelectionOrder 800
    Weapon.SlotNumber 8
    Inventory.PickUpSound "Totenkopf/getweapon"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 20
    Weapon.AmmoType "Clip"
    +THRUGHOST
    +DONTBOB
    +INVENTORY.UNDROPPABLE
    Inventory.PickupMessage "M712 Rapid-Fire Pistol"
    Obituary ""
    Weapon.YAdjust 16
    States
    {
      Spawn:
		TK10 K 4
        Loop

      Ready:
        TK10 A 1 A_WeaponReady
        loop

      Fire:
        TK10 B 3
		Goto Hold

      Hold:
		TK10 C 0 A_JumpIfInventory("CoopModeON", 1, "CoopHold")
        TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-4,4))
        TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(16)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-4,4))
		TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(12)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-4,4))
		TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(8)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-4,4))
		TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(4)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-4,4))
		TK10 D 7
		TK10 D 2
		TK10 D 0 A_Refire
        TK10 E 3
        Goto Ready
		
	  CoopHold:
        TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-4,4))
        TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(16)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-4,4))
		TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(12)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-4,4))
		TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(8)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-4,4))
		TK10 D 2 Bright
		TK10 D 0 A_JumpIfNoAmmo(4)
		TK10 C 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 C 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-4,4))
		TK10 D 7
		TK10 D 2
		TK10 D 0 A_Refire
        TK10 E 3
        Goto Ready	  
    }
} 

actor Totenkopf_MauserDual : Totenkopf_Mauser
{
    Weapon.SelectionOrder 350
	Weapon.AmmoGive 0
	Inventory.RestrictedTo "TotenkopfPlayer"	
    States
    {
      Spawn:
		TK10 K 4
        Loop

      Ready:
        TK10 F 1 A_WeaponReady
        loop

      Fire:
        TK10 G 3
		Goto Hold

      Hold:
		TK10 H 0 A_JumpIfInventory("CoopModeON", 1, "CoopHold")
        TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(17)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(13)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(9)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(5)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_Mauser",random(-5,5))
		TK10 J 7
		TK10 J 2
		TK10 D 0 A_Refire
        TK10 J 3
        Goto Ready
		
	  CoopHold:
        TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(17)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(13)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(9)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_JumpIfNoAmmo(5)
		TK10 H 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
        TK10 H 1 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 I 0 A_PlaySound("Totenkopf/atkmauser",CHAN_WEAPON)
		TK10 I 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MauserCoop",random(-5,5))
		TK10 J 7
		TK10 J 2
		TK10 D 0 A_Refire
        TK10 J 3
        Goto Ready	  
    }
}

Actor Totenkopf_MauserPickup : CustomInventory
{
	+INVENTORY.AUTOACTIVATE
	Inventory.PickUpSound "Totenkopf/getweapon"
	States
	{
		Spawn:
			TK10 K 4
			Loop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("Totenkopf_MauserDual",1,1)
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Totenkopf_Mauser",1,1)
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFailure")
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Totenkopf_Mauser",1,"PickupDual")
			TNT1 A 0 A_Log("M712 Rapid-Fire Pistol")
			TNT1 A 0 A_GiveInventory("Totenkopf_Mauser",1)
			Stop
		PickupDual:
			TNT1 A 0 A_Log("M712 Rapid-Fire Pistol")
			TNT1 A 0 A_GiveInventory("Totenkopf_MauserDual",1)
			Stop
		PickupFailure:
			TNT1 A 0 A_Railwait
			fail
	}
}
 

Actor Totenkopf_Tracer_Mauser : Totenkopf_Tracer { Damage (6 + (random(0,256)%20)) }
Actor Totenkopf_Tracer_MauserCoop : Totenkopf_Tracer_Mauser { Species "Player" +THRUSPECIES }

actor Totenkopf_MG42 : InstantSwitchWeapon
{
    Weapon.SelectionOrder 750
    Weapon.SlotNumber 9
    Inventory.PickUpSound "Totenkopf/getweapon"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 80
    Weapon.AmmoType "Cell"
    +THRUGHOST
    +DONTBOB
    +INVENTORY.UNDROPPABLE
    Inventory.PickupMessage "MG42 Portable Machine Gun"
    Obituary ""
    Weapon.YAdjust 16
    States
    {
      Spawn:
		TK11 F 4
        Loop

      Ready:
        TK11 A 1 A_WeaponReady
        loop

      Fire:
        TK11 B 2
		Goto Hold

      Hold:
		TK11 C 0 A_JumpIfInventory("CoopModeON", 1, "CoopHold")
        TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
        TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42",random(-2,2))
        TK11 D 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42",random(-2,2))
		TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
		TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42",random(-2,2))
        TK11 D 2 Bright
		TK11 D 0 A_Refire
        TK11 E 3
        Goto Ready
		
	  CoopHold:
        TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
        TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42Coop",random(-2,2))
        TK11 D 2 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42Coop",random(-2,2))
		TK11 C 0 A_PlaySound("Totenkopf/atkmg42",CHAN_WEAPON)
		TK11 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_MG42Coop",random(-2,2))
        TK11 D 2 Bright
		TK11 D 0 A_Refire
        TK11 E 3
        Goto Ready	  
    }
} 

Actor Totenkopf_Tracer_MG42 : Totenkopf_Tracer { Damage (8 + (random(0,256)%28)) }
Actor Totenkopf_Tracer_MG42Coop : Totenkopf_Tracer_MG42 { Species "Player" +THRUSPECIES }

actor Totenkopf_Sniper : Totenkopf_Kar98K
{
    Weapon.SelectionOrder 900
	Weapon.SlotPriority 2
	Weapon.AmmoGive 0
    Inventory.PickupMessage "Kar98k Sniper Rifle"
	Inventory.RestrictedTo "TotenkopfPlayer"	
	+WEAPON.NO_AUTO_SWITCH
    States
    {
      Spawn:
		TK12 M 4
        Loop

	  Deselect:
	    TNT1 A 0 A_ZoomFactor(1.0,ZOOM_INSTANT)
		Goto Super::Deselect

      Ready:
		TNT1 A 0 A_ZoomFactor(4.0,ZOOM_INSTANT)
		TNT1 A 0 A_JumpIf(CallACS("Totenkopf_SniperScope")==1,1)
        TNT1 A 1 A_WeaponReady
        loop

      Fire:
		TNT1 B 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
        TNT1 B 3
		TNT1 C 0 A_PlaySound("Totenkopf/atkkar98",CHAN_WEAPON)
		TNT1 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_Sniper")
		TNT1 D 5
		TNT1 E 0 A_JumpIfNoAmmo("Ready")
		TNT1 E 0 A_PlaySound("Totenkopf/kar98bolt",CHAN_5)
		TNT1 E 5
		TNT1 F 5
		TNT1 GHI 2
		TNT1 JK 5
		TNT1 L 3
		Goto Ready
	  CoopFire:
        TNT1 B 3
		TNT1 C 0 A_PlaySound("Totenkopf/atkkar98",CHAN_WEAPON)
		TNT1 C 3 Bright A_FireCustomMissile("Totenkopf_Tracer_SniperCoop")
		TNT1 D 5
		TNT1 E 0 A_JumpIfNoAmmo("Ready")
		TNT1 E 0 A_PlaySound("Totenkopf/kar98bolt",CHAN_5)
		TNT1 E 5
		TNT1 F 5
		TNT1 GHI 2
		TNT1 JK 5
		TNT1 L 3
		Goto Ready	  
    }
} 

Actor Totenkopf_Tracer_Sniper : Totenkopf_Tracer { Damage ((75+random(0,256)%10)) }
Actor Totenkopf_Tracer_SniperCoop : Totenkopf_Tracer_Sniper { Species "Player" +THRUSPECIES }

Actor Totenkopf_SniperPickup : CustomInventory
{
	Inventory.PickupMessage "Scoped Kar98k Rifle"
	Inventory.PickUpSound "Totenkopf/getweapon"
	+INVENTORY.AUTOACTIVATE
	States
	{
		Spawn:
			TK12 M 4
			Loop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("Shell",0,1)
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Totenkopf_Sniper",1,1)
			Goto Pickup+3
			TNT1 A 0 A_JumpIfInventory("Totenkopf_Kar98K",1,"PickupFailure")
			TNT1 A 0 A_GiveInventory("Totenkopf_Sniper",1)
			TNT1 A 0 A_GiveInventory("Totenkopf_Kar98K",1)
			TNT1 A 0 A_GiveInventory("Shell",5)
			Stop
		PickupFailure:
			TNT1 A 0 A_Railwait
			fail
	}
}