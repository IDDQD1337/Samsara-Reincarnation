actor Totenkopf_Knife : InstantSwitchWeapon
{
	Tag "Knife"
    Weapon.Kickback 0
    Weapon.SelectionOrder 1000
    Weapon.SlotNumber 0
    Inventory.PickUpSound "Totenkopf/getweapon"
    Inventory.PickupMessage "Knife"
    Obituary ""
    +WEAPON.MELEEWEAPON
    +DONTBOB
    +NOALERT
    +INVENTORY.UNDROPPABLE
	+WEAPON.NOAUTOFIRE
    Weapon.YAdjust 16
    States
    {
      Spawn:
        WKNP A -1
        stop

      Ready:
        TK01 A 1 A_WeaponReady
        loop

      Fire:
        TK01 BC 3
		TK01 C 0 A_FireCustomMissile("Totenkopf_KnifeProjectile")
		TK01 C 0 A_PlaySound("Totenkopf/atkknife", CHAN_WEAPON)
		TK01 DE 3 
        goto Ready
    }
}

Actor Totenkopf_KnifeProjectile : FastProjectile
{
	Projectile
	Speed 32
	Damage (random(0,256)>>3)
	Height 4
	Radius 2
	+NOEXTREMEDEATH
	+HITTRACER
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 1 
			Stop
		Crash:
		Death:
			TNT1 A 1
			Stop
		XDeath:
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_BloodGenerator_Offsets")==1,1)
			TNT1 A 0 A_Playsound("Totenkopf/hitenemy", CHAN_WEAPON)
			TNT1 A 1
			TNT1 A 0 A_GiveInventory("Totenkopf_BloodGenerator",1,AAPTR_TRACER)
			TNT1 A 1
			Stop
	}
}