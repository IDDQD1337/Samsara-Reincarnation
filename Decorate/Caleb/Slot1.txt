Actor TNT2 : Boolean {}
Actor WhoopsIDied : Boolean {}
Actor TNTCounter : Counter { inventory.amount 1 inventory.maxamount 2 }
Actor TNTSoundDelay : PowerDamage {	Damagefactor "normal", 1.0 powerup.duration -2 }
Actor CalebInterpolateBar : TemporaryBoolean {}
ACTOR ThrowPowerBig : Ammo { inventory.amount 1 inventory.MaxAmount 150 ammo.backpackamount 0 ammo.backpackmaxamount 150 +IGNORESKILL }

actor Dynamite : CalebWeapon
{
	inventory.pickupmessage "Bundle of TNT!"
	weapon.selectionorder 880
	weapon.ammogive 5
	weapon.ammotype "RocketAmmo"
	obituary "%o got a faceful of %k's TNT!"
	weapon.ammouse 1
	weapon.ammouse2 1
	weapon.ammotype2 "RocketAmmo"
	Weapon.SlotNumber 1
	Inventory.PickupSound "Caleb/Weaponup"
	+WEAPON.EXPLOSIVE
	+WEAPON.NOALERT
	+NOAUTOAIM
	Tag "TNT Bundle"
	states
	{
	Ready:
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_TakeInventory("ThrowPowerBig")
		TNT1 A 0 A_TakeInventory("ThrowPower")
		TNT1 A 0 A_TakeInventory("UsingPitchfork", 1)
		TNT1 A 0 A_JumpIfInventory("CalebTNTReadyDummy",1,9)
		PTNT OP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlayWeaponSound("TNT/Zip")
		PTNT Q 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlaySound("TNT/Match",6)
		PTNT RST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("CalebTNTReadyDummy",1)
		TNT1 A 0 A_JumpIfNoAmmo("ReadyAmmolessLoop")
		PTNT VVWWXX 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto ReadyLoop+8
	ReadyLoop:
		TNT1 A 0 A_TakeInventory("ThrowPowerBig")
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_TakeInventory("ThrowPower")
		TNT1 A 0 A_JumpIfNoAmmo("ReadyAmmolessLoop")
		TNT1 A 0 A_JumpIfInventory("CalebReady",1,"IntroTaunt")
		TNT1 A 0 A_JumpIfInventory("CalebWaiting",60,"WaitingTaunt")
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNTH A 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNTH C 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNTH B 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		Loop
	ReadyAmmolessLoop:
		TNT1 A 0 A_JumpIfInventory("CalebReady",1,"IntroTaunt")
		TNT1 A 0 A_JumpIfInventory("CalebWaiting",60,"WaitingTaunt")
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"RaisingDynamite")
		PTNT M 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"RaisingDynamite")
		PTNT L 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"RaisingDynamite")
		PTNT N 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"RaisingDynamite")
		Loop
	RaisingDynamite:
		PTNT VWX 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto ReadyLoop+8
	Deselect:
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_JumpIfInventory("WhoopsIDied",1,"DeselectDead")
		TNT1 A 0 A_JumpIfNoAmmo("DeselectMatchStart")
		PTNT XWV 2
	DeselectMatchStart:
		TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        TNT1 A 1 A_Lower
        Loop
		//TNTQ D 1
		//TNTL CB 1
		//TNT1 A 0 A_PlayWeaponSound("TNT/Zip")
		//Goto Super::DeselectLoop
	DeselectDead:
		TNT1 A 0 A_TakeInventory("WhoopsIDied",999)
		TNTH S 4 A_TakeInventory("ThrowPowerBig",255)
		TNTH T 3 A_Lower
		TNTH U 1 A_Lower
		Goto DeselectDead+3
	Select:
		PTNT O 0 A_TakeInventory("ThrowPower")
		PTNT O 0 A_TakeInventory("ThrowPowerBig")
		TNT1 A 0 A_JumpIfInventory("CalebTNTReadyDummy",1,"SwitchExplosive")
		Goto Super::SelectLoop
	SwitchExplosive:
		TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Raise
		TNT1 A 1 A_Raise
		Loop
	Fire:
		TNTF A 0 A_JumpIfInventory("TNT2", 1, "Hold")
		TNTF AABB 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlayWeaponSound("TNT/Fuse")
		TNTF CCDD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNTF EEF 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	Hold:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"Boomination1")
		TNT1 A 0 A_GiveInventory("CalebInterpolateBar")
		TNT1 A 0 A_JumpIfInventory("TNTSoundDelay", 1, 3)
		TNT1 A 0 A_GiveInventory("TNTSoundDelay", 1)
		TNT1 A 0 A_PlayWeaponSound("TNT/FUSE")
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 0, "Explode")
		TNT1 A 0 A_JumpIfInventory("TNTCounter", 2, "Hold3")
		TNT1 A 0 A_JumpIfInventory("TNTCounter", 1, "Hold2")
		Goto Hold1
	Hold1:
		TNTF W 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("TNTCounter", 1)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		Goto RefireCheck
	Hold2:
		TNTF Y 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("TNTCounter", 1)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		Goto RefireCheck
	Hold3:
		TNTF F 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_TakeInventory("TNTCounter")
		Goto RefireCheck
	RefireCheck:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 0, "Explode")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNT1 A 0 A_Refire(1)
		Goto Throw
		TNT1 A 0 A_GiveInventory("ThrowPower", 5)
		TNT1 A 0 A_JumpIfInventory("TNTCounter", 2, "Hold3")
		TNT1 A 0 A_JumpIfInventory("TNTCounter", 1, "Hold2")
		Goto Hold
	BooMination1:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",93,"BooMination2")
		TNT1 A 0 A_PlayWeaponSound("TNT/FUSE")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL G 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination2:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",96,"BooMination3")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination3:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",99,"BooMination4")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL I 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination4:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",102,"BooMination5")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL J 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination5:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",105,"BooMination6")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL K 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination6:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",108,"BooMination7")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL L 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination7:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",111,"BooMination8")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL M 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination8:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",114,"BooMination9")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL N 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination9:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",117,"BooMination10")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL O 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination10:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",120,"BooMination11")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL P 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination11:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",123,"BooMination12")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL Q 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination12:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",126,"BooMination13")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL R 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination13:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 129, "BooMination14")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL S 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination14:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 132, "BooMination15")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL T 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination15:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 135, "BooMination16")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL U 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination16:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 138, "BooMination17")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL V 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination17:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 141, "BooMination18")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL W 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination18:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 144, "BooMination19")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL X 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination19:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 147, "BooMination20")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL Y 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination20:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 149, "BooMination21")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 2)
		TNTL Z 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	BooMination21:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig", 0, "Explode")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 1)
		TNTH D 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"Cannot")
		TNT1 A 0 A_Refire //YOUR LAST CHANCE IS OVER MAN
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto RefireCheck
	Explode:
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_TakeInventory("ThrowPower")
		TNT1 A 0 A_TakeInventory("ThrowPowerBig")
		TNT1 A 0 A_TakeInventory("TNT2")
		TNT1 A 0 A_TakeInventory("TNTCounter")
		TNT1 A 0 A_GiveInventory("WhoopsIDied",1)
		TNT1 A 0 A_SpawnItemEx("CalebTNTSelfExplosion")
		TNTH S 4
		TNTH T 8
		TNTH U 5
		TNT1 A 0 A_TakeInventory("WhoopsIDied")
		Goto ReadyLoop
	AltFire:
		TNT1 A 0 A_JumpIfInventory("TNT2", 1, "DropDynamite")
		TNT1 A 0 A_GiveInventory("TNT2", 1)
		TNTF AABB 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlayWeaponSound("TNT/FUSE")
		TNTF CCDD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNTF EEF 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("TNT2", 1)
	//Annoying that I must do this
	AltFuse:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"LowerFuse")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTF W 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"LowerFuse")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTF Y 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"LowerFuse")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTF F 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
	AltFuseDroppable:
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"LowerFuse")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTF W 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"LowerFuse")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTF Y 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("ThrowPowerBig",90,"LowerFuse")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTF F 3 A_WeaponReady(WRF_NOSWITCH)
		Loop
	LowerFuse:
		TNT1 A 0 A_PlayWeaponSound("TNT/FUSE")
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL G 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL H 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL I 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL J 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL K 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL L 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL M 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL N 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL O 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL P 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL Q 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL R 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL S 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL T 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL U 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL V 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL W 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL X 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL Y 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTL Z 3 A_WeaponReady(WRF_NOSWITCH)
		TNT1 A 0 A_GiveInventory("ThrowPowerBig", 3)
		TNTH D 3 A_WeaponReady(WRF_NOSWITCH)
		Goto Explode
	Flash:
		TNT1 A 6 A_Light1
		TNT1 A 0 A_Light0
		stop
	Spawn:
		CLVR S -1
		stop
	Cannot:
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_TakeInventory("ThrowPowerBig")
		TNT1 A 0 A_TakeInventory("ThrowPower")
		TNT1 A 0 A_SelectWeapon("Pitchfork")
		Goto Deselect
	Cannot2:
		TNT1 A 0 A_SelectWeapon("Pitchfork")
		Goto Deselect
	DropDynamite:
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_TakeInventory("ThrowPower")
		TNT1 A 0 A_TakeInventory("TNTCounter")
		TNT1 A 0 A_GiveInventory("SamsaraBloodDynamiteAttackHandler")
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOBOB) TNTF F 1 Bright A_Lower TNTF FFF 0 A_Lower
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOBOB) TNTF F 1 Bright A_Lower TNTF FFF 0 A_Lower
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOBOB) TNTF F 1 Bright A_Lower TNTF FFF 0 A_Lower
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOBOB) TNTF F 1 Bright A_Lower TNTF FFF 0 A_Lower
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOBOB) TNTF F 1 Bright A_Lower TNTF FFF 0 A_Lower
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOBOB) TNTF F 1 Bright A_Lower TNTF FFF 0 A_Lower
		TNT1 A 0 A_TakeInventory("TNT2")
		Goto ReadyLoop
	Throw:
		TNTH EFGHIJKL 1 bright
		TNT1 A 0 A_TakeInventory("CalebInterpolateBar")
		TNT1 A 0 A_GiveInventory("SamsaraBloodDynamiteAttackHandler")
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_PlayWeaponSound("TNT/Throw")
		TNT1 A 0 A_TakeInventory("TNTCounter", 3)
		TNT1 A 0 A_TakeInventory("TNT2")
		TNTH MNOPQR 2
		PTNT M 2
		TNT1 A 0 A_JumpIfInventory("RocketAmmo", 1, 1)
		Goto Cannot2
		PTNT NLVWX 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto ReadyLoop+8
	}
}

Actor SamsaraBloodDynamiteAttackHandler : Trigger
{
	States
	{
		Pickup:
			TNT1 A 0
			TNT1 A 0 A_TakeInventory("RocketAmmo", 1, TIF_NOTAKEINFINITE)
			TNT1 A 0 A_JumpIfInventory("TNT2", 1, "Throw_Timed")
			TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
			TNT1 A 0 A_FireCustomMissile("PlayerTnT",0,1,8,0)
			Stop
			TNT1 A 0 A_FireCustomMissile("PlayerTnT_Coop",0,1,8,0)
			Stop
		Throw_Timed:
			TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
			TNT1 A 0 A_FireCustomMissile("PlayerTNT1",0,1,8,0)
			Goto Take_Timed_Token
			TNT1 A 0 A_FireCustomMissile("PlayerTNT1_Coop",0,1,8,0)
			Goto Take_Timed_Token
		Take_Timed_Token:
			TNT1 A 0 A_TakeInventory("TNT2", 1)
			Stop
	}
}

actor TNTSmoke : BulletPuff
{
	renderstyle Translucent
	alpha 0.5
	+NOBLOCKMAP
	+NOGRAVITY
	+DONTSPLASH
	PROJECTILE
	+WINDTHRUST
	+ALLOWPARTICLES
	+CLIENTSIDEONLY
	states
	{
	Spawn:
		ZUFF A 0 A_Jump(128,33)
		ZUFF AAAABBBBCCCCDDDDEEEEFFFFGGGGHHHH 1 A_FadeOut(0.01)
		stop
		ZUFF IIIIJJJJKKKKLLLLMMMMNNNNOOOOPPPP 1 A_FadeOut(0.01)
		stop
	}
}

ACTOR ThrowPower : Ammo
{
	inventory.amount 1
	inventory.MaxAmount 70
	ammo.backpackamount 0
	ammo.backpackmaxamount 70
	+IGNORESKILL
}

actor PlayerTNT
{
	Decal Scorch
	Radius 6
	Height 4
	Speed 5
	Scale 0.5
	Health 5
	ActiveSound "TNT/Fuse"
	PROJECTILE
	+BRIGHT
	+RANDOMIZE
	+DONTSPLASH
	+SHOOTABLE
	+NOBOUNCESOUND
	-EXPLODEONWATER
	+CANBOUNCEWATER
	+PUSHABLE
	-SOLID
	-NOGRAVITY
	+NOTELEPORT
	-TELESTOMP
	+WINDTHRUST
	Damage (120) //+20
	DamageType "Dynamite"
	var int user_strength;
	states
	{
	Spawn:
		PTNT E 0
		PTNT E 0 A_LoopActiveSound
		TNT1 A 0 A_SetUserVar("user_strength",CallACS("CalebThrowStrength"))
		TNT1 A 0 ACS_NamedExecuteWithResult("CalebThrowDuration")
		TNT1 A 0 A_ChangeVelocity((5+(user_strength))*(user_strength>0)*(sqrt(velx*velx + vely*vely)/5.0),0,(((5+(user_strength/2))*(sqrt(velx*velx + vely*vely)/5.0))+((5+(user_strength))*(velz/5.0)))*(user_strength>0),CVF_RELATIVE|CVF_REPLACE)
	See:
		PTNT F 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT F 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT G 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT G 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT H 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT H 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT A 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT A 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT B 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT B 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT C 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT C 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT D 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT D 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT E 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		PTNT E 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9)
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("FloorKaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto BlowAway
	XDeath:
		TNT1 A 0 A_SpawnItemEx("Kaboom",0,0,0,0,0,1,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto BlowAway
	BlowAway:
		TNT1 A 0 A_PlaySound("Napalm/Explode",CHAN_AUTO)
		TNT1 A 4 A_SpawnItemEx("Blower",0,0,-2,0,0,-10,0,SXF_NOCHECKPOSITION)
		Stop
	Detonate:
		"####" "#" 1 A_CountDown
		Wait
	}
}
Actor PlayerTNT_Coop: PlayerTNT
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
	DamageType "DynamiteCoop"
	States
	{
	Death:
		TNT1 A 0 A_SpawnItemEx("FloorKaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto BlowAway
	XDeath:
		TNT1 A 0 A_SpawnItemEx("Kaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto BlowAway
	BlowAway:
		TNT1 A 0 A_PlaySound("Napalm/Explode",CHAN_AUTO)
		TNT1 A 4 A_SpawnItemEx("BlowerCoop",0,0,-2,0,0,-10,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

actor PlayerTNT1 : PlayerTNT
{
	Damage (0)
	BounceFactor 0.5
	BounceType "Hexen"
	+BOUNCEONACTORS
	-EXPLODEONWATER
	-PUSHABLE
	States
	{
	Spawn:
		TNT1 A 0
		PTNT E 0 A_LoopActiveSound
		TNT1 A 0 A_SetUserVar("user_strength",CallACS("CalebThrowStrength"))
		TNT1 A 0 ACS_NamedExecuteWithResult("CalebThrowDuration")
		TNT1 A 0 A_ChangeVelocity((5+(user_strength))*(user_strength>0)*(sqrt(velx*velx + vely*vely)/5.0),0,(((5+(user_strength/2))*(sqrt(velx*velx + vely*vely)/5.0))+((5+(user_strength))*(velz/5.0)))*(user_strength>0),CVF_RELATIVE|CVF_REPLACE)
	See:
		PTNT F 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT F 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT G 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT G 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT H 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT H 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT A 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT A 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT B 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT B 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT C 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT C 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT D 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT D 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		TNT1 A 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT E 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		PTNT E 1 A_CountDown TNT1 A 0 A_ScaleVelocity(0.9) TNT1 A 0 A_JumpIf(sqrt(velx*velx + vely*vely + velz*velz) < 2,"Stay")
		Loop
	Stay:
		PTNT I 0 A_LoopActiveSound
		PTNT I 0 A_SpawnItemEx("TNTSmoke",0,-15,-5,0,0,1,0,SXF_CLIENTSIDE)
		PTNT IIJJKK 1 A_CountDown
		Loop
	Death:
	XDeath:
	Crash:
		"####" "#" 1 ACS_NamedExecuteWithResult("CalebTossableResolve",reactiontime,0,1)
		Wait
	Explode:
		TNT1 A 0 ACS_NamedExecuteWithResult("CalebFloorDynamite")
		TNT1 A 0 A_SpawnItemEx("Kaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto BlowAway
	ExplodeFloor:
		TNT1 A 0 A_SpawnItemEx("FloorKaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto BlowAway
	BlowAway:
		TNT1 A 0 A_PlaySound("Napalm/Explode",CHAN_AUTO)
		TNT1 A 4 A_SpawnItemEx("BlowerCoop",0,0,-2,0,0,-10,0,SXF_NOCHECKPOSITION)
		Stop
	Detonate:
		"####" "#" 1 A_CountDown
		Wait
	}
}

actor PlayerTNT1_Coop : PlayerTNT1
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
	DamageType "DynamiteCoop"
	States
	{
	Death:
		"####" "#" 1 ACS_NamedExecuteWithResult("CalebTossableResolve",reactiontime,0,1)
		Wait
	Explode:
		TNT1 A 0 A_CheckFloor("ExplodeFloor")
		TNT1 A 0 A_SpawnItemEx("Kaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto Super::BlowAway
	ExplodeFloor:
		TNT1 A 0 A_SpawnItemEx("FloorKaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Goto Super::BlowAway
	}
}

Actor CalebTNTSelfExplosion : PlayerTNT
{
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_SpawnItemEx("FloorKaboom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
			Goto BlowAway
	}
}

Actor CalebTNTReadyDummy : Boolean {}

Actor CalebTNTShootable
{
	+SHOOTABLE
	+VULNERABLE
	+NOBLOOD
	+NOGRAVITY
	-SOLID
	+THRUACTORS
	Health 20
	Height 8
	Radius 4
	States
	{
		Spawn:
			TNT1 A 1 ACS_NamedExecuteWithResult("CalebTossableHitBox")
			Loop
		Death:
			TNT1 A 1 ACS_NamedExecuteWithResult("CalebTossableDetonate")
			Stop
	}
}