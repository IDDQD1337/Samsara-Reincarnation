Actor Q2GrenadeLauncher : Q2Weapon
{
	Tag "Grenade Launcher"
	Inventory.PickupMessage "Grenade Launcher"
	Weapon.AmmoGive 5
	Weapon.AmmoType RocketAmmo
	Weapon.AmmoUse 1
	+WEAPON.EXPLOSIVE
	Weapon.SlotNumber 8
	Inventory.RestrictedTo "Bitterman"		
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,9)
		GRL0 ABCDEF 4
		Goto Ready+1
	Deselect:
		GRL1 A 2
		GRL0 STUVW 3
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Ready:
		TNT1 A 0 A_Jump(32,2)
		GRL1 A 1 A_WeaponReady
		Loop
		GRL1 "BCDEFGHIJKLMNOPQRSTUVWXYZ[^]" 5 A_WeaponReady
		GRL2 ABCDEFGHIJKLMN 5 A_WeaponReady
		Goto Ready+1
	Fire:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherFire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile(Q2Grenade,0,1,9,0,0,10)
		TNT1 A 0 A_GunFlash
		GRL0 HI 3
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherReload",0)
		GRL0 JKLMNOPQR 4
		GRL1 A 2
		Goto Ready
	SilentFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_FireCustomMissile(Q2Grenade,0,1,9,0,0,10)
		TNT1 A 0 A_GunFlash
		GRL0 HI 3
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherReload",0,0.5,0,3)
		GRL0 JKLMNOPQR 4
		GRL1 A 2
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentCoopFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherFire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile(Q2Grenade_Coop,0,1,9,0,0,10)
		TNT1 A 0 A_GunFlash
		GRL0 HI 3
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherReload",0)
		GRL0 JKLMNOPQR 4
		GRL1 A 2
		Goto Ready
	SilentCoopFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_FireCustomMissile(Q2Grenade_Coop,0,1,9,0,0,10)
		TNT1 A 0 A_GunFlash
		GRL0 HI 3
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeLauncherReload",0,0.5,0,3)
		GRL0 JKLMNOPQR 4
		GRL1 A 2
		Goto Ready
	DFire:
		GRL0 JKLM 4
		GRL0 NOPQR 4 A_WeaponReady
		Goto Ready
	Flash:
		TNT1 A 1 A_Light2
		TNT1 A 0 A_SetPitch(Pitch-5.0)
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		TNT1 A 0 A_Light1
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		Goto LightDone
	}
}
Actor Q2Grenade
{
	Projectile
	-NOGRAVITY +FORCERADIUSDMG +MOVEWITHSECTOR
	Speed 25
	Gravity 0.66
	Damage (125)
	Radius 5
	Height 10
	BounceType Doom
	BounceSound "Q2Weapons/GrenadeBounce"
	DamageType "BittermanDamage"
	Var Int User_Angle;
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(128,2)
		TNT1 A 0 A_SetUserVar(User_Angle,Random(1,6))
		Goto Idle
		TNT1 A 0 A_SetUserVar(User_Angle,Random(-6,-1))
	Idle:
		TNT1 AAA 0 A_SpawnItemEx(Q2GrenadeSmoke,Random2(5),0,Random2(5),0,0,FRandom(0.1,0.5),Random(1,360),0,128)
		TNT1 A 0 A_SetAngle(Angle+User_Angle)
		SGRN A 1 A_SetPitch(Pitch-15)
		Loop
	Death:
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeBounce")
		SGRN AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx(Q2GrenadeSmoke,Random2(5),0,Random2(5),0,0,FRandom(0.1,1),Random(1,360),0,128)
		TNT1 A 0 A_Jump(256,"XDeath")
	XDeath:
		TNT1 A 0 A_PlaySound("Q2Weapons/GrenadeExplosion")
		TNT1 A 0 A_SpawnItem(Q2Explosion)
		TNT1 A 5 A_Explode(200, 165)
		Stop
	}
}
Actor Q2Grenade_Coop : Q2Grenade { Species "Player" +THRUSPECIES +DONTHARMCLASS +DONTHARMSPECIES }
Actor Q2GrenadeSmoke : Q2BulletPuffParticle
{
	Scale 1
	States
	{
	Fade:
		"----" A 1 A_FadeOut(0.025)
		Wait
	}
}
Actor Q2IonRipper : Q2Weapon
{
	Tag "Ion Ripper"
	Inventory.PickupMessage "Ion Ripper"
	Weapon.UpSound "Q2Weapons/IonActive"
	Weapon.AmmoGive 50
	Weapon.AmmoType Cell
	Weapon.AmmoUse 2
	Weapon.SlotNumber 9
	Inventory.RestrictedTo "Bitterman"	
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,11)
		TNT1 A 0 A_PlaySound("Q2Weapons/IonIdle",CHAN_5,0.5,1)
		ION0 ABCDE 4
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(CHAN_5)
		TNT1 A 0 A_PlaySound("Q2Weapons/IonAway",CHAN_5)
		ION0 U 2
		ION1 IJKL 3
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Ready:
		TNT1 A 0 A_Jump(24,2)
		ION0 H 1 A_WeaponReady
		Loop
		ION0 "HIJKLMNOPQRSTUVWXYZ[\]" 5 A_WeaponReady
		ION1 ABCDEFGH 5 A_WeaponReady
		Goto Ready+1
	Fire:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	SilentFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentCoopFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang_Coop,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	SilentCoopFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang_Coop,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	Flash:
		TNT1 A 1 A_Light1
		TNT1 A 0 A_SetPitch(Pitch-0.005)
		TNT1 A 1
		TNT1 A 0 A_SetPitch(Pitch+0.005)
		Goto LightDone
	}
}
Actor Q2IonBoomerang 
{
	Radius 4
	Height 2
	Speed 16
	Damage (50)
	DeathSound "Q2Weapons/IonExplode"
	BounceSound "Q2Weapons/IonHit"
	+BLOODSPLATTER
	+NOGRAVITY
	Projectile
	Decal BlasterScorch
	DamageType "BittermanDamage"
	BounceType "Hexen"
	BounceCount 5
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-7,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-6,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-5,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-4,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-3,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-2,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-1,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",0,2)
		NULL A 1 Bright A_PlaySound("Q2Weapons/LaserFly",CHAN_VOICE,0.5,1)
		Loop
	Death:
		TNT1 A 1
		Stop
	Crash:
	XDeath:
		TNT1 A 5
		Stop
	}
}

Actor Q2IonBoomerang_Coop : Q2IonBoomerang { Species "Player" +THRUSPECIES }

Actor Q2Railgun : Q2Weapon
{
	Tag "Railgun"
	Inventory.PickupMessage "Railgun"
	Weapon.SelectionOrder 300
	Weapon.AmmoGive 50
	Weapon.AmmoType Cell
	Weapon.AmmoUse 10
	Weapon.SlotNumber 9
	Decal RailScorch
	Inventory.RestrictedTo "Bitterman"	
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,8)
		TNT1 A 0 A_PlaySound("Q2Weapons/RailGunLoop",CHAN_5,0.5,1)
		RLG0 ABCD 4
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(CHAN_5)
		RLG0 TUVWX 3
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Ready:
		TNT1 A 0 A_Jump(32,2)
		RLG1 A 1 A_WeaponReady
		Loop
		RLG1 "ABCDEFGHIJKLMNOPQRSTUVWXYZ[^]" 5 A_WeaponReady
		RLG2 ABCDEFGHI 5 A_WeaponReady
		Goto Ready+1
	Fire:
		TNT1 A 0 A_JumpIfInventory("DMModeOn", 1, "DMFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFire")
		TNT1 A 0 A_JumpIfTargetInLOS("FireSpotted", 72, JLOSF_TARGETLOS)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	FireSpotted:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(150,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready		
	SilentFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentCoopFire")
		TNT1 A 0 A_JumpIfInTargetLOS("CoopFireSpotted")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff_Coop")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	CoopFireSpotted:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(150,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff_Coop")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready	
	SilentCoopFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff_Coop")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	DMFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFireDM")
		TNT1 A 0 A_JumpIfTargetInLOS("FireSpottedDM", 72, JLOSF_TARGETLOS)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(200,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready	
	FireSpottedDM:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(100,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready	
	SilentFireDM:
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_RailAttack(200,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready			
	Flash:
		TNT1 A 0 A_SetPitch(Pitch-5.0)
		TNT1 A 1 A_Light2
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		TNT1 A 0 A_Light1
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		Goto LightDone
	}
}
Actor Q2RailgunPuff : Q2BulletPuff { DamageType "BittermanDamage" }

Actor Q2RailgunPuff_Coop : Q2RailgunPuff { Species "Player" +MTHRUSPECIES +THRUSPECIES +DONTHARMSPECIES +DONTHARMCLASS }