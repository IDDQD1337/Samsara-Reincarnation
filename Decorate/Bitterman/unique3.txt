Actor Q2Railgun : Q2Weapon
{
	Tag "Railgun"
	Inventory.PickupMessage "Railgun"
	Weapon.SelectionOrder 300
	Weapon.AmmoGive 50
	Weapon.AmmoType Cell
	Weapon.AmmoUse 10
	Weapon.SlotNumber 9
	Decal RailScorch
	Inventory.RestrictedTo "Bitterman"	
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,8)
		TNT1 A 0 A_PlaySound("Q2Weapons/RailGunLoop",CHAN_5,0.5,1)
		RLG0 ABCD 4
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(CHAN_5)
		RLG0 TUVWX 3
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Ready:
		TNT1 A 0 A_Jump(32,2)
		RLG1 A 1 A_WeaponReady
		Loop
		RLG1 "ABCDEFGHIJKLMNOPQRSTUVWXYZ[^]" 5 A_WeaponReady
		RLG2 ABCDEFGHI 5 A_WeaponReady
		Goto Ready+1
	Fire:
		TNT1 A 0 A_JumpIfInventory("DMModeOn", 1, "DMFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFire")
		TNT1 A 0 A_JumpIfTargetInLOS("FireSpotted", 72, JLOSF_TARGETLOS)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	FireSpotted:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(150,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready		
	SilentFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentCoopFire")
		TNT1 A 0 A_JumpIfInTargetLOS("CoopFireSpotted")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff_Coop")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	CoopFireSpotted:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(150,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff_Coop")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready	
	SilentCoopFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_RailAttack(300,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff_Coop")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready
	DMFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFireDM")
		TNT1 A 0 A_JumpIfTargetInLOS("FireSpottedDM", 72, JLOSF_TARGETLOS)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(200,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready	
	FireSpottedDM:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON)
		TNT1 A 0 A_RailAttack(100,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready	
	SilentFireDM:
		TNT1 A 0 A_PlaySound("Q2Weapons/RailFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_RailAttack(200,5,1,"2F 67 7F","White",RGF_FULLBRIGHT|RGF_SILENT,1.0,"Q2RailgunPuff")
		RLG0 E 3 A_GunFlash
		RLG0 FG 4
		RLG0 H 4// A_PlaySound("Q2Weapons/RailGunCharge",0,0.75)
		RLG0 IJKLMNOPQRS 4
		Goto Ready			
	Flash:
		TNT1 A 0 A_SetPitch(Pitch-5.0)
		TNT1 A 1 A_Light2
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		TNT1 A 0 A_Light1
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.5)
		Goto LightDone
	}
}
Actor Q2RailgunPuff : Q2BulletPuff { DamageType "BittermanDamage" }

Actor Q2RailgunPuff_Coop : Q2RailgunPuff { Species "Player" +MTHRUSPECIES +THRUSPECIES +DONTHARMSPECIES +DONTHARMCLASS }