Actor Q2Chainfist : Q2Weapon
{
	Weapon.SelectionOrder 1000
	+INVENTORY.UNDROPPABLE
	+WEAPON.WIMPY_WEAPON
	+WEAPON.MELEEWEAPON
	Tag "Chainsaw"
	Weapon.SlotNumber 1
	Inventory.PickupMessage "Chainsaw"
	Inventory.RestrictedTo "Bitterman"	
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,12)
		CHF0 ABCDE 4
		Goto Ready
	Ready:
		TNT1 A 0 A_PlaySound("Q2Weapons/SawIdle",CHAN_WEAPON,1.0,true)
		CHF2 ABCDEFGHIJ 4 A_WeaponReady
		CHF2 K 0 A_Jump(154,14)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx(Q2BulletPuffParticle,8,8,36,FRandom(0,0.5),FRandom(0,0.5),FRandom(0.5,1.0))
		CHF2 K 4 A_WeaponReady
		CHF2 LMNOPQRS 4 A_WeaponReady
		CHF2 T 0 A_Jump(154,14)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx(Q2BulletPuffParticle,8,8,36,FRandom(0,0.5),FRandom(0,0.5),FRandom(0.5,1.0))
		CHF2 TUVWXYZ 4 A_WeaponReady
		Goto Ready+1
	Deselect:
		CHF3 A 0 A_StopSound(CHAN_WEAPON)
		CHF3 ABC 4
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Fire:
		CHF1 A 0 A_PlaySound("Q2Weapons/SawHit",CHAN_WEAPON)
		CHF1 A 4 A_GunFlash
		TNT1 A 0 A_Jump(256,1,"Fire2","Fire3")
		CHF1 BC 4
		CHF1 D 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 E 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 FGHI 4
		CHF2 A 0 A_Refire("FireDecide1")
		Goto Ready
	Fire2:
		CHF1 JK 4
		CHF1 L 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 M 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 N 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 OPQRS 4
		CHF2 A 0 A_Refire("FireDecide2")
		Goto Ready
	Fire3:
		CHF1 TU 4
		CHF1 V 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 WX 4
		CHF1 Y 4 A_CustomPunch(35,1,CPF_NORANDOMPUFFZ|32,"Q2ChainfistPuff",64)
		CHF1 "Z[" 4
		CHF2 A 0 A_Refire("FireDecide3")
		Goto Ready
	FireDecide1:
		CHF1 A 0 A_PlaySound("Q2Weapons/SawHit",CHAN_WEAPON)
		CHF1 A 0 A_GunFlash
		TNT1 A 0 A_Jump(256,"Fire2","Fire3")
		Goto Fire2
	FireDecide2:
		CHF1 A 0 A_PlaySound("Q2Weapons/SawHit",CHAN_WEAPON)
		CHF1 A 0 A_GunFlash
		TNT1 A 0 A_Jump(256,"Fire","Fire3")
		Goto Fire3
	FireDecide3:
		CHF1 A 0 A_PlaySound("Q2Weapons/SawHit",CHAN_WEAPON)
		CHF1 A 0 A_GunFlash
		TNT1 A 0 A_Jump(256,"Fire","Fire2")
		Goto Fire2
	Flash:
		TNT1 A 1 
		TNT1 A 0 A_SetPitch(Pitch-3.0)
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.3)
		TNT1 AAAAA 1 A_SetPitch(Pitch+0.3)
		Goto LightDone	
	}
}

Actor Q2ChainfistPuff
{
	-ALLOWPARTICLES
	+NOINTERACTION
	DamageType "BittermanDamage"
	Height 8
	Radius 4
	States
	{
		Spawn:
			TNT1 A 1
			Stop
	}
}