Actor CatacombClass : Boolean { }

Actor PettonEverhail : PlayerPawn
{
    Player.DisplayName "PettonEverhail"
    Player.StartItem "Catacomb3D_MagicMissile", 1
	Player.StartItem "Catacomb_XTerminatorsQuickSpell", 1
	Player.StartItem "Catacomb_ZappersQuickSpell", 1
	Player.StartItem "Catacomb_BurstsQuickSpell", 1
	Player.StartItem "Catacomb_NukesQuickSpell", 1
	Player.StartItem "Catacomb_WavesQuickSpell", 1
	Player.StartItem "Catacomb_BoltsQuickSpell", 1
    Player.StartItem "CatacombClass", 1
    Player.StartItem "CanWolfMovement", 1
    Player.StartItem "IsSamsaraClass", 1
	Player.StartItem "TauntButton", 1
    Player.StartItem "Clip", 50
    Player.Face "PEF"
    Player.JumpZ 9//Default is 8
    Player.Soundclass "PettonEverhail"
	DamageFactor "RebelMissile", 0
    DamageFactor "PoisonCloud", 1.75
    //DamageFactor "Wraithverge", 0.75
	DamageFactor "DynamiteCoop", 0.0	
    DamageFactor "CorvusCrossbow", 1.1
    DamageFactor "MightyBoot", 1.5
    DamageFactor "DragonClaw", 1.1
    DamageFactor "WMCBeam", 0.75
    DamageFactor "WMCNade", 0.75
	DamageFactor "EnemyInfightDamage", 0.0
	DamageFactor "ElectricBolt", 1.0
	DamageFactor "PhosFireCoop", 0.0
	DamageFactor "EradCoopExplosive2", 0.0
    DamageFactor "C7MineBoom", 0.0	
    DamageFactor "EradCoopGreenFire", 0.0	
	DamageFactor "BCannonProj", 0.75	
	BloodType "SamsaraBloodyHellBlood"
    DamageFactor "RMR-BigPlasma", 0.85		
	DamageFactor "SWNukeCoop", 0.0		
	DamageFactor "SWRailgunCoop", 0.0
	DamageFactor "SWFlameCoop", 0.0
	DamageFactor "SWFlame2Coop", 0.0
	DamageFactor "SWStickyCoop", 0.0	
	DamageFactor "CMDMGSHIT", 0.0	
    +NOSKIN
    -DONTBLAST
    -THRUSPECIES
    Species "Player"
    Player.ColorRange 112, 127	
    States
    {
      Spawn:
        TNT1 A 0 A_TakeInventory("WolfCheckMoving")
        CTPL A 1 A_JumpIfInventory("WolfMoving", 1, "See")
        Loop
      See:
        CTPL AAAABBBB 1 A_GiveInventory("WolfCheckMoving")
		CTPL A 0 A_SpawnItemEx("Catacomb_FootStepL",0,0,1,0,0,-2,0,SXF_CLIENTSIDE)
		CTPL AAAACCCC 1 A_GiveInventory("WolfCheckMoving")
		CTPL A 0 A_SpawnItemEx("Catacomb_FootStepR",0,0,1,0,0,-2,0,SXF_CLIENTSIDE)
        Loop
      Missile:
		CTPL A 6
        CTPL E 6 Bright	  
        Goto Spawn
      Melee:
        CTPL F 3 BRIGHT		
        Goto Missile
      Pain:
        CTPL D 4 
        CTPL D 4 A_Pain
        Goto Spawn
	  Death:
	  XDeath:	
	    TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")	  
        CTPL D 10 A_PlayerScream
        CTPL F 10 A_NoBlocking
        CTPL G -1
        Stop
      Death.CorvusGrimBallista:
        CTPL D 10 A_PlaySoundEx("*falling",CHAN_VOICE,0,0)
        CTPL F 10 A_NoBlocking
        CTPL G -1
        Stop
      Death.ZorchPistol:
      Death.Zorch:
      Death.ZorchKamikaze:
      Death.PhasingZorch:
      Death.ZorchSpectral:
        CTPL D 0 A_Stop
        TNT1 A 0 A_PlaySoundEx("chex/zorch","soundslot5",0,0)
        CTPL D 3 A_SpawnItem("ZorchEffectSmall")
        CTPL D 3 A_SetTranslucent(0.9,0)
        CTPL D 0 A_PlayerScream
        CTPL D 3 A_SetTranslucent(0.8,0)
        CTPL D 0 A_NoBlocking
        CTPL D 3 A_SetTranslucent(0.7,0)
        CTPL D 3 A_SetTranslucent(0.6,0)
        CTPL D 3 A_SetTranslucent(0.5,0)
        CTPL D 3 A_SetTranslucent(0.4,0)
        CTPL D 3 A_SetTranslucent(0.3,0)
        CTPL D 3 A_SetTranslucent(0.2,0)
        CTPL D 3 A_SetTranslucent(0.1,0)
        ACLO E 1 A_SetTranslucent(1,0)
        ACLO E -1
        stop
      CoopModeOn:
        TNT1 A 0
        TNT1 A 0 A_ChangeFlag("THRUSPECIES",1)
        TNT1 A 0 A_ChangeFlag("DONTBLAST",1)
        BJBL A 1
        goto Spawn
      Death.DukeDamage:
      Death.DukePistol:
        TNT1 A 0 A_Jump(218,"Death")
        TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
        goto Death
      Death.DukeExplosive:
      Death.DukeSpectral:
        TNT1 A 0 A_JumpIfHealthLower(-5,"DukeGibStart")
        goto Death.DukeDamage
      DukeGibStart:
	    CTPL D 1
        TNT1 A 0 A_UnsetSolid
        TNT1 A 0 A_PlaySound("duke/enemygib")
        TNT1 A 0 A_SpawnDebris("DukeGibs1")
        TNT1 A 0 A_SpawnDebris("DukeGibs2")
        TNT1 A 0 A_SpawnDebris("DukeGibs3")
        TNT1 A 0 A_SpawnDebris("DukeGibs4")
        TNT1 A 0 A_SpawnDebris("DukeGibs5")
        TNT1 A 0 A_SpawnDebris("DukeGibs6")
        TNT1 A 0 A_Jump(96,"XDeath")
        TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
        Goto XDeath
      DukeXDeath:
	    TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")
        CTPL D 10 A_PlayerScream
        CTPL F 10 A_NoBlocking
        CTPL G -1
        Stop
      Death.DukeIce:
        TNT1 A 0 A_Jump(218,"Ice")
        TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
        goto Ice
      Ice:
      Death.HexenIce:
      Death.Ice:
        TNT1 A 0 A_PlayWeaponSound("misc/freeze")
        CTPL D 70 A_NoBlocking
        CTPL D 0 A_SetTranslucent(0,0)
        TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceChunk2",random(-1,1),random(-1,1),random(8,48),random(-2,2),random(-2,2),random(1,6))
        CTPL D 1 A_PlayWeaponSound("misc/icebreak")
        CTPL D -1
        stop		
	  Death.PhosFireCoop:
      Death.HexGreenFire:
      Death.QuakeFire:
	  Death.FireExplosive:
      Burn:
        TK13 A 4 A_PlayerScream
        TK13 B 4 A_NoBlocking
        TK13 C 4
        TK13 DEFG 4
        TK13 H -1
        Stop
      Pain.MightyBoot:
	    CTPL D 1 ACS_ExecuteAlways(312, 0, 25, 5, 24)
        CTPL D 1 A_PlaySoundEx("duke/kickhit","body",0,0)
        TNT1 A 0 A_Recoil(12)
        CTPL D 6 A_Pain
        Goto See
	  Pain.MarathonStun:
        TNT1 A 0 A_Stop
	    CTPL D 1 ACS_ExecuteAlways(312, 0, 25, 5, 100)
		TNT1 A 0 A_GiveInventory("NothingSpeed")
		TNT1 A 0 A_SetBlend("White",0.9,105)
        CTPL D 1 A_PlaySoundEx("marathon/tech50/stun","body",0,0)
        CTPL D 6 A_Pain
        Goto See
	  Pain.LifeLeech:
		TNT1 A 0 A_GiveToTarget("SerpentHealth", random(1,2))
		TNT1 A 0 A_GiveToTarget("HealthBonus",1)
		Goto Pain
	  Death.Dynamite:
	  Death.LifeLeech:
	  Death.CalebBullet:
	  Death.CalebNapalm:
	  Death.Tesla:
	  Death.Vodoo:
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
		Goto Death 
	  Death.CalebFire:
		TNT1 A 0 A_Jump(218, "Burn")
		TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
		Goto Burn	
	  Death.RottExplosive:
		TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSCALE)
		BLAN A 1
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
		TNT1 AA 0
		BLAN A 5 A_NoBlocking
		Stop
	  Death.RottFire:
	    TNT1 A 0 A_Scream
		ske7 A 0 A_playsound("gen/burned") 
		ske7 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 bright
		skex ABCDEFGHIJKL 2 bright
		skex M 0 A_playsound("gen/skel") 
		skex MNOPQRSTUV 3 bright
		skex V -1 A_Fall    
	    Stop		 
	  Death.RottDisintegrate:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_UnsetSolid		
		ACLO E 5 A_SpawnItem("RGodModeDeath")
		BLAN A -1 A_Fall
		Stop	
      Death.EradDisc:
	  Death.EradShock:
	  Death.EradPiercingDart:
	  Death.EradExplosive:
	  Death.EradNova:
	  Death.EradExplosive2:	  
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("EleenaDMTaunt1", 1)
		Goto Death
	  Death.EradGreenFire:
	  Death.EradCoopGreenFire:	  
		TNT1 A 0 A_Jump(218, "Burn")
		TNT1 A 0 A_GiveToTarget("EleenaDMTaunt1", 1)
		Goto Burn	
      Disintegrate:
        TNT1 A 0 A_GiveInventory("EnemyZorched",1)
        TNT1 A 0 A_NoBlocking
        TNT1 A 0 A_ChangeFlag("DONTGIB",1)
//        TNT1 A 0 A_SpawnItemEx("BlazkoDisintegrate",0,0,5,0,0,0,0,32)
        ACLO E 5 A_PlayerScream
        ACLO E -1
        stop		
	  Death.Nuke:
		ACLO E 0 A_UnsetSolid
		ACLO E 0 A_PlayerScream
		ACLO E 0 A_NoBlocking
//		ACLO E 5 A_SpawnItemEx("BlazkoNuke")
		ACLO E -1
		stop
	}
}	

Actor Catacomb_FootStepL 
{
	RenderStyle Add
	+NOINTERACTION
	+CLIENTSIDEONLY
	+FORCEXYBILLBOARD
	+NOBLOCKMAP
	+DONTSPLASH
	+THRUACTORS
	+NOTRIGGER
	+NOBLOCKMONST
//	+NOTONAUTOMAP
	Radius 0.5
	Height 1
	Gravity 0.66
	Species "VFX"
	+THRUACTORS
	+MISSILE
	-NOINTERACTION
	Radius 1
	Height 1
	States
	{
	Spawn:
		TNT1 A 2
		Stop
	Death:
		TNT1 A 5 A_PlaySound("Catacomb/FootStepL")
		Stop
	}
}

Actor Catacomb_FootStepR : Catacomb_FootStepL
{
	States
	{
	Spawn:
		TNT1 A 2
		Stop
	Death:
		TNT1 A 5 A_PlaySound("Catacomb/FootStepR")
		Stop	
	}
}	

actor Catacomb_Boolean: Inventory
{
    Inventory.MaxAmount 1
    +UNDROPPABLE
    -INVBAR
}
Actor Catacomb_SmallHealthPotion : HealthPickup //replaces medikit
{
	Health 25
	+INVENTORY.INVBAR
	+INVENTORY.PICKUPFLASH
	Inventory.MaxAmount 15
	inventory.interhubamount 5
	Inventory.Icon "CTAAD0"
	Inventory.PickupSound "catacomb/ItemGet5"
	Inventory.UseSound "catacomb/PotionUse"
    +INVENTORY.UNDROPPABLE
    +INVENTORY.HUBPOWER
	Tag "Blue Potion"
	States
	{
		Spawn:
			CTAA C -1
			Stop
	}		
}

Actor Catacomb_LargeHealthPotion : HealthPickup //replaces Soulsphere
{
	Health 100
	+INVENTORY.INVBAR
	+INVENTORY.PICKUPFLASH
	Inventory.MaxAmount 15
	inventory.interhubamount 5
	Inventory.Icon "CTAAF0"
	Inventory.PickupSound "catacomb/ItemGet5"
	Inventory.UseSound "catacomb/PotionUse"
    +INVENTORY.UNDROPPABLE
    +INVENTORY.HUBPOWER
	Tag "Purple Potion"
	States
	{
		Spawn:
			CTAA E -1
			Stop
	}		
}