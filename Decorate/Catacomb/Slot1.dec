Actor Catacomb_WavesQuickSpell : InstantSwitchWeapon
{
	+DONTBOB
	Tag "Waves"
	Weapon.SlotNumber 1
	Weapon.SelectionOrder 2900
	Weapon.AmmoType "Catacomb_Waves"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 2
	Inventory.PickUpSound "Catacomb/ItemGet2"
	Inventory.PickupMessage "Waves!"
	+INVENTORY.UNDROPPABLE	
	Inventory.RestrictedTo "PettonEverhail"
	States
	{
		Ready:
		Fire:
		Altfire:
			TNT1 A 0 A_JumpIfInventory("Catacomb_Waves", 1, 1)
			Goto SwitchWeapon
			TNT1 A 0 A_AlertMonsters
			TNT1 A 0 A_PlaySound("Catacomb/Door", CHAN_WEAPON)		
			TNT1 A 0 A_JumpIfInventory("PowerCatacomb_SpreadShot", 1, "WaveSpread")		
			TNT1 A 0 A_JumpIfInventory("PowerCatacomb_BounceShot", 1, "WavesBounce")
			TNT1 A 0 A_JumpIfInventory("PowerCatacomb_RapidFire", 1, "WavesFast")
			TNT1 A 0 A_JumpIfInventory("PowerCatacomb_FireRing", 1, "WavesFireball")				
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 20, "Wave3X")
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 10, "Wave2X")	
			CT00 A 2
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3", 0, 0, 0, 0)
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2", 0, 0, 0, 0)
			CT00 B 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1", 0, 1, 0, 0)
			CT00 AAA 2
			CT00 A 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 A 5 
			Goto SwitchWeapon	
		Wave2X:
			CT00 A 2
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_2X", 0, 0, 0, 0)
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_2X", 0, 0, 0, 0)
			CT00 B 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_2X", 0, 1, 0, 0)
			CT00 AAA 2
			CT00 A 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 A 5 
			Goto SwitchWeapon		
		Wave3X:
			CT00 A 2
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_3X", 0, 0, 0, 0)
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_3X", 0, 0, 0, 0)
			CT00 B 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_3X", 0, 1, 0, 0)
			CT00 AAA 2
			CT00 A 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 A 5 
			Goto SwitchWeapon		
		WaveSpread:
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 20, "WaveSpread3X")
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 10, "WaveSpread2X")	
			CT00 E 2
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3", 0, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3", -10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2", 0, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2", -10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1", -10, 0, 0, 0)
			CT00 F 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1", 0, 1, 0, 0)
			CT00 EEE 2
			CT00 E 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 E 5 
			Goto SwitchWeapon	
		WaveSpread2X:
			CT00 E 2
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_2X", 0, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_2X", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_2X", -10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_2X", 0, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_2X", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_2X", -10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_2X", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_2X", -10, 0, 0, 0)
			CT00 F 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_2X", 0, 1, 0, 0)
			CT00 EEE 2
			CT00 E 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 E 5
			Goto SwitchWeapon		
		WaveSpread3X:
			CT00 E 2
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_3X", 0, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_3X", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_3X", -10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_3X", 0, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_3X", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_3X", -10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_3X", 10, 0, 0, 0)
			CT00 F 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_3X", -10, 0, 0, 0)
			CT00 F 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_3X", 0, 1, 0, 0)
			CT00 EEE 2
			CT00 E 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 E 5
			Goto SwitchWeapon	
		WavesFireBall:
			TNT1 A 0 A_AlertMonsters
			TNT1 A 0 A_PlaySound("Catacomb/Door", CHAN_WEAPON)		
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 20, "WaveFire3X")
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 10, "WaveFire2X")	
			CT00 C 2
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3", 0, 0, 0, 0)
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2", 0, 0, 0, 0)
			CT00 B 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1", 0, 1, 0, 0)
			CT00 CCC 2
			CT00 C 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 C 5 
			Goto Ready	
		WaveFire2X:
			CT00 C 2
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_2X", 0, 0, 0, 0)
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_2X", 0, 0, 0, 0)
			CT00 B 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_2X", 0, 1, 0, 0)
			CT00 CCC 2
			CT00 C 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 C 5 
			Goto SwitchWeapon	
		WaveFire3X:
			CT00 C 2
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_3X", 0, 0, 0, 0)
			CT00 B 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_3X", 0, 0, 0, 0)
			CT00 B 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_3X", 0, 1, 0, 0)
			CT00 CCC 2
			CT00 C 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 C 5 
			Goto SwitchWeapon
		WavesBounce:
			TNT1 A 0 A_AlertMonsters
			TNT1 A 0 A_PlaySound("Catacomb/Door", CHAN_WEAPON)		
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 20, "WaveBounce3X")
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 10, "WaveBounce2X")	
			CT00 I 2
			CT00 J 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3", 0, 0, 0, 0)
			CT00 J 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2", 0, 0, 0, 0)
			CT00 J 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1", 0, 1, 0, 0)
			CT00 III 2
			CT00 I 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 I 5 
			Goto SwitchWeapon		
		WavesBounce2X:
			CT00 I 2
			CT00 J 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_2X", 0, 0, 0, 0)
			CT00 J 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_2X", 0, 0, 0, 0)
			CT00 J 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_2X", 0, 1, 0, 0)
			CT00 III 2
			CT00 I 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 I 5 
			Goto SwitchWeapon		
		WavesBounce3X:
			CT00 I 2
			CT00 J 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile3_3X", 0, 0, 0, 0)
			CT00 J 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile2_3X", 0, 0, 0, 0)
			CT00 J 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectile1_3X", 0, 1, 0, 0)
			CT00 III 2
			CT00 I 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 I 5 
			Goto SwitchWeapon	
		WavesFast:
			TNT1 A 0 A_AlertMonsters
			TNT1 A 0 A_PlaySound("Catacomb/Door", CHAN_WEAPON)		
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 20, "WaveFast3X")
			TNT1 A 0 A_JumpIfInventory("Catacomb3D_ChargeTime", 10, "WaveFast2X")	
			CT00 G 2
			CT00 H 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast1", 0, 0, 0, 0)
			CT00 H 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast2", 0, 0, 0, 0)
			CT00 H 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast3", 0, 1, 0, 0)
			CT00 GGG 2
			CT00 H 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 H 5 
			Goto SwitchWeapon		
		WaveFast2X:
			CT00 G 2
			CT00 H 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast1_2X", 0, 0, 0, 0)
			CT00 H 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast2_2X", 0, 0, 0, 0)
			CT00 H 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast3_2X", 0, 1, 0, 0)
			CT00 GGG 2
			CT00 H 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 H 5 
			Goto SwitchWeapon	
		WaveFast3X:
			CT00 G 2
			CT00 H 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast1_3X", 0, 0, 0, 0)
			CT00 H 0 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast2_3X", 0, 0, 0, 0)
			CT00 H 4 BRIGHT A_FireCustomMissile("Catacomb_WaveProjectileFast3_3X", 0, 1, 0, 0)
			CT00 GGG 2
			CT00 H 0 A_TakeInventory("Catacomb3D_ChargeTime", 999)
			CT00 H 5 
			Goto SwitchWeapon
		SwitchWeapon:
			TNT1 A 0 
			TNT1 A 0 A_SelectWeapon("Catacomb3D_MagicMissile")
			goto Deselect	
		}
}				

Actor Catacomb_Waves : Ammo 
{
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 99
	Inventory.Amount 2
	Inventory.InterHubAmount 99
    Inventory.Icon "CT01X0"
    Inventory.PickupSound "Catacomb/ItemGet2"
    Inventory.PickupMessage "You got the Waves!"	
	Tag "Wave"
	Inventory.RestrictedTo "PettonEverhail"
	States
	{
		Spawn:
			CT01 YZ 14 BRIGHT
			Loop
	}
}	

Actor Catacomb_WaveProjectile1 
{
	+THRUACTORS
	Projectile
	Radius 5
	Height 5
	Scale 1.25
	Damage (0)
	Speed 50
	Decal none
	DeathSound "Catacomb/ProjHit"	
	States
	{
		Spawn:
			CT00 XXYY 1 A_Explode(20, 10, 0, false, 10)
			Stop
		Death:
			TNT1 A -1
			Stop
	}
}	

Actor Catacomb_WaveProjectile2 : Catacomb_WaveProjectile1 { Speed 30 }
Actor Catacomb_WaveProjectile3 : Catacomb_WaveProjectile1 { Speed 15 }

Actor Catacomb_WaveProjectile1_2X : Catacomb_WaveProjectile1 
{
	States
	{
		Spawn:
			CT00 XXYY 1 A_Explode(40, 10, 0, false, 10)
			Stop
	}
}	

Actor Catacomb_WaveProjectile1_3X : Catacomb_WaveProjectile1
{
	States
	{
		Spawn:
			CT00 XXYY 1 A_Explode(60, 10, 0, false, 10)
			Stop
	}
}	

Actor Catacomb_WaveProjectile2_2X : Catacomb_WaveProjectile1_2X { Speed 30 }
Actor Catacomb_WaveProjectile3_2X : Catacomb_WaveProjectile1_2X { Speed 15 }
Actor Catacomb_WaveProjectile2_3X : Catacomb_WaveProjectile1_3X { Speed 30 }
Actor Catacomb_WaveProjectile3_3X : Catacomb_WaveProjectile1_3X { Speed 15 }

Actor Catacomb_WaveProjectileFast1 : Catacomb_WaveProjectile1 { Speed 60 }
Actor Catacomb_WaveProjectileFast2 : Catacomb_WaveProjectile2 { Speed 40 }
Actor Catacomb_WaveProjectileFast3 : Catacomb_WaveProjectile3 { Speed 25 }

Actor Catacomb_WaveProjectileFast1_2X : Catacomb_WaveProjectile1_2X { Speed 60 }
Actor Catacomb_WaveProjectileFast2_2X : Catacomb_WaveProjectile2_2X { Speed 40 }
Actor Catacomb_WaveProjectileFast3_2X : Catacomb_WaveProjectile3_2X { Speed 25 }

Actor Catacomb_WaveProjectileFast1_3X : Catacomb_WaveProjectile1_3X { Speed 60 }
Actor Catacomb_WaveProjectileFast2_3X : Catacomb_WaveProjectile2_3X { Speed 40 }
Actor Catacomb_WaveProjectileFast3_3X : Catacomb_WaveProjectile3_3X { Speed 25 }