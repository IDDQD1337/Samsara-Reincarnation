Actor "Phase Repeater" : Weapon
{
  Weapon.SelectionOrder 1700
  Weapon.SlotNumber 4  
  Weapon.AmmoUse 1
  Weapon.AmmoGive 30
  Weapon.AmmoType "Clip"
  Inventory.PickupMessage "You got a Phase Repeater!"
  Inventory.RestrictedTo "DisruptorPlayer"  
  States
  {
  Ready:
    SQ70 EEEEDDDDCCCCBBBBAAAALLLL 1 A_WeaponReady
    Loop
  Deselect:
	TNT1 A 0 A_Lower
    SQ70 A 1 A_Lower
	Loop
  Select:
	TNT1 A 0 A_Raise
    SQ70 A 1 A_Raise
    Loop
  Fire:
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",1,"Fire2")  	
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",Random(6,8),1,0,0)
	Goto R
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",Random(6,8),1,0,0)	
  R:	
	SQ70 F 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ70 G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Refire
	SQ70 G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Fire2:
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",2,"Fire3")    
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",0,1,0,0)
	Goto S
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",0,1,0,0)
  S:
	SQ70 H 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 HI 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Refire
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	Goto Ready
  Fire3:
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",3,"Fire4")  	  
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",Random(-6,-8),1,0,0)
	Goto T
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",Random(-6,-8),1,0,0)	
  T:
	SQ70 J 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 JK 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ70 K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
 	TNT1 A 0 A_Refire
	SQ70 K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Fire4:
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",0,1,0,0)
	Goto U
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",0,1,0,0)	
  U:
	SQ70 H 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 HI 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_TakeInventory("DisruptorShit2",3)
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
 	TNT1 A 0 A_Refire
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Spawn:
    SQ72 U -1
    Stop	
	}
}

Actor DisruptorGP_12 : DisruptorGP_1
{
	Obituary "%o ate %k's spicy shit"
	Damage (Random(11,14)*Random(2,1))	
	+SPECIALFIREDAMAGE //WHY NOT?
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		SQ99 DDEEFFGGHHIIJJKK 1 bright
		Loop
	Death:
		SQ99 LMNOPQRSTUVW 3 Bright
		SQ99 XYZ 2 Bright
		stop
	XDeath:
    Crash:
		SQ98 QRSTUVWXYZ 3 Bright 
		SQ99 ABC 2 Bright 	  
		stop			  
	}
}

Actor DisruptorGP_22 : DisruptorGP_12 { Damage (Random(16,19)*Random(2,1)) Species "Player" +THRUSPECIES }
actor DisruptorShit2 : inventory { inventory.amount 1 inventory.maxamount 3 }