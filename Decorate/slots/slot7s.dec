actor BFG10K : BFG9000 5013
{
    Weapon.SlotNumber 8
    Game Doom
    SpawnID 165
}

actor SamsaraSlotSevenSkulltagPickup : SamsaraSlotSevenPickup replaces BFG10K
{
	States
	{
      IWasDropped:
        TNT1 A 0 A_SpawnItemEx("SamsaraSlotSevenSkulltagDrop", 0,0,0, momx,momy,momz, 0, SXF_ABSOLUTEMOMENTUM)
        stop

		Doomguy:  WBG2 A 35 A_ChangeFlag("FLOATBOB", 0)   goto SpawnLoop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("DoomGuyClass", 1, "CheckDoom")	 
			TNT1 A 0 A_JumpIfInventory("CalebClass", 1, "CheckCaleb")
			TNT1 A 0 A_JumpIfInventory("StrifeClass", 1, "CheckStrife")	  
			TNT1 A 0 A_JumpIfInventory("DisruptorClass", 1, "CheckJack")
			TNT1 A 0 A_JumpIfInventory("BittermanClass", 1, "CheckBitterman")
			TNT1 A 0 A_JumpIfInventory("CatacombClass", 1, "CheckCatacomb")
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7) & 3) == 1, "PickupSuccess")
			Goto PickupFailure
		CheckDoom:
			TNT1 A 0 A_GiveInventory("DGHasBFG10K",1)
			TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,2)
			TNT1 A 0 A_JumpIfInventory("Doom64Mode", 1, 2)
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 11) & 3) == 1, "PickupSuccess")
			Goto PickupFailure
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7) & 3) == 1, "PickupSuccess")
			Goto PickupFailure
	}
}

actor SamsaraSlotSevenSkulltagDrop: SamsaraSlotSevenSkulltagPickup
{
  States
  {
		Spawn:
		  TNT1 A 0
		  goto SpawnLoop
		Pickup:
		  TNT1 A 0 A_JumpIfInventory("DoomguyClass", 1, "CheckDoom")
		  TNT1 A 0 A_JumpIfInventory("CalebClass", 1, "CheckCaleb")
		  TNT1 A 0 A_JumpIfInventory("StrifeClass", 1, "CheckStrife")	  
		  TNT1 A 0 A_JumpIfInventory("DisruptorClass", 1, "CheckJack")
		  TNT1 A 0 A_JumpIfInventory("BittermanClass", 1, "CheckBitterman")
		  //TNT1 A 0 A_JumpIfInventory("CatacombClass", 1, "CheckCatacomb")
		  TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7, 1) & 1) == 1, "PickupSuccess")
		  goto PickupFailure
		CheckDoom:
          TNT1 A 0 A_GiveInventory("DGHasBFG10K",1)
          TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,2)
          TNT1 A 0 A_JumpIfInventory("Doom64Mode", 1, 2)
          TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 11, 1) & 1) == 1, "PickupSuccess")
          goto PickupFailure
          TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7, 1) & 1) == 1, "PickupSuccess")
          goto PickupFailure
		CheckStrife:
		  TNT1 A 0 A_JumpIfInventory("StrifeGuyInStrife", 1, "StrifeCheck")
		  TNT1 A 0 A_JumpIfInventory("GotWeapon7", 1, "StrifeCheck")
		  TNT1 A 0 A_GiveInventory("StrifeSigilPiece",1)
		  TNT1 A 0 A_GiveInventory(" Sigil ", 1)
		  TNT1 A 0 A_TakeInventory("StrifeSigilPiecePreferred",5)
		  TNT1 A 0 A_GiveInventory("StrifeSigilPiecePreferred", CallACS("StrifeSigilPreferred"))
		StrifeCheck:	
		  TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7, 1) & 1) == 1, "PickupSuccess")
		  goto PickupFailure
		CheckJack:
		  TNT1 A 0 A_JumpIfInventory(" Disruptor Plasmalance ", 1, 2)
		  TNT1 A 0 A_GiveInventory(" Disruptor Plasmalance ")
		  TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7, 1) & 1) == 1, "PickupSuccess")
		  goto PickupFailure	
		CheckCatacomb:
		  TNT1 A 0 A_JumpIfInventory("Catacomb_Hourglass", 1, 3)
		  TNT1 A 0 A_GiveInventory("Catacomb_Hourglass", 1)
		  TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7, 1) & 1) == 1, "PickupSuccess")
		  goto PickupFailure		 
		  TNT1 A 0 A_TakeInventory("Catacomb_HourglassCooldown", 180)
		  TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 7, 1) & 1) == 1, "PickupSuccess")
		  goto PickupFailure
  }
}