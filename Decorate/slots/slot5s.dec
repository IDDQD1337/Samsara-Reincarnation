actor GrenadeLauncher : RocketLauncher 5011
{
    Weapon.SlotNumber 8
    Game Doom
    SpawnID 163
}

actor SamsaraSlotFiveSkulltagPickup : SamsaraSlotFivePickup replaces GrenadeLauncher
{
	States
	{
      IWasDropped:
        TNT1 A 0 A_SpawnItemEx("SamsaraSlotFiveSkulltagDrop", 0,0,0, momx,momy,momz, 0, SXF_ABSOLUTEMOMENTUM)
        stop

		Doomguy:  WDGL A 35 A_ChangeFlag("FLOATBOB", 0)   goto SpawnLoop
		Doom64:   64GL Z 35 A_ChangeFlag("FLOATBOB", 0)   goto SpawnLoop
		DoomguyStr:  WDGL B 35 A_ChangeFlag("FLOATBOB", 0)   goto SpawnLoop
		Chexguy:  LAUC B 35 A_ChangeFlag("FLOATBOB", 0)   goto SpawnLoop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("DoomGuyClass", 1, "PickupSkulltag")
			TNT1 A 0 A_JumpIfInventory("ChexClass", 1, "PickupSkulltag")
			TNT1 A 0 A_JumpIfInventory("StrifeClass", 1, "CheckStrife")
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 5) & 3) == 1, "PickupSuccess")
			Goto PickupFailure
        PickupSkulltag:
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 9) & 3) == 1, "PickupSuccess")
			Goto PickupFailure
	}
}

actor SamsaraSlotFiveSkulltagDrop: SamsaraSlotFiveSkulltagPickup
{
  States
  {
    Spawn:
      TNT1 A 0
      goto SpawnLoop
    Pickup:
	  TNT1 A 0 A_JumpIfInventory("DoomGuyClass", 1, "PickupSkulltag")
	  TNT1 A 0 A_JumpIfInventory("ChexClass", 1, "PickupSkulltag")
	  TNT1 A 0 A_JumpIfInventory("StrifeClass", 1, "CheckStrife")
      TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 5, 1) & 1) == 1, "PickupSuccess")
      Goto PickupFailure
    PickupSkulltag:
	  TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 9, 1) & 1) == 1, "PickupSuccess")
      goto PickupFailure
	CheckStrife:
	  TNT1 A 0 A_JumpIfInventory("StrifeGuyInStrife", 1, "StrifeCheck")
	  TNT1 A 0 A_JumpIfInventory("GotWeapon5", 1, "StrifeCheck")
	  TNT1 A 0 A_GiveInventory("StrifeSigilPiece",1)
	  TNT1 A 0 A_GiveInventory(" Sigil ", 1)
	  TNT1 A 0 A_TakeInventory("StrifeSigilPiecePreferred",5)
	  TNT1 A 0 A_GiveInventory("StrifeSigilPiecePreferred", CallACS("StrifeSigilPreferred"))
	StrifeCheck:	
      TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 5, 1) & 1) == 1, "PickupSuccess")
      goto PickupFailure
  }
}
