actor "Gigazorcher 2100" : Weapon
{
    Weapon.SelectionOrder 100
    Weapon.SlotNumber 6
    Inventory.PickUpSound "chex/weaponget"
    Weapon.AmmoUse 10
    Weapon.AmmoGive 40
    Weapon.AmmoType "Cell"
    +INVENTORY.UNDROPPABLE
    +BLOODLESSIMPACT
    +PUFFONACTORS
	+NOALERT
    Inventory.PickupMessage "You got the Phasing Zorcher!"
	//Inventory.RestrictedTo "ChexWarrior"
	Obituary "$SAMSARA_CHEX_OB_SLOT6S"
	Inventory.RestrictedTo "ChexWarrior"
    Tag "Gigazorcher 2100"
    States
    {
    Ready:
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",3,"Ready4")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",2,"Ready3")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",1,"Ready2")
        CHIZ A 1 A_WeaponReady
        Loop
    Ready2:
        CHIZ D 1 A_WeaponReady
        Loop
    Ready3:
        CHIZ G 1 A_WeaponReady
        Loop
    Ready4:
        CHIZ J 1 A_WeaponReady
        Loop
    Deselect:
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",3,"Deselect4")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",2,"Deselect3")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",1,"Deselect2")
        CHIZ A 1 A_Lower
        Loop
    Deselect2:
        CHIZ D 1 A_Lower
        Loop
    Deselect3:
        CHIZ G 1 A_Lower
        Loop
    Deselect4:
        CHIZ J 1 A_Lower
        Loop
    Select:
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",3,"Select4")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",2,"Select3")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",1,"Select2")
        CHIZ A 1 A_Raise
        Loop
    Select2:
        CHIZ D 1 A_Raise
        Loop
    Select3:
        CHIZ G 1 A_Raise
        Loop
    Select4:
        CHIZ J 1 A_Raise
        Loop
    Fire:
		TNT1 A 0 A_JumpIfInventory("Cell",10,"Fire2")
		TNT1 A 0 A_SelectWeapon("Mini-Zorcher")
		goto Deselect
		
    Fire2:
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire2")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopFire2")
		TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",3,"Fire5")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",2,"Fire4")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",1,"Fire3")
        CHIZ A 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,75,"GigazorcherPuff", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff")
        CHIZ B 3 A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff")
        CHIZ C 3 A_GiveInventory("ChexInstazorchFired",1)
        CHIZ T 3
        CHIZ D 6
        TNT1 A 0 A_ReFire
        Goto Ready
    Fire3:
        CHIZ D 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,75,"GigazorcherPuff", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff")
        CHIZ E 3 A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff")
        CHIZ F 3 A_GiveInventory("ChexInstazorchFired",1)
        CHIZ U 3
        CHIZ G 6
        TNT1 A 0 A_ReFire
        Goto Ready
    Fire4:
        CHIZ G 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,75,"GigazorcherPuff", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff")
        CHIZ H 3 A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff")
        CHIZ I 3 A_GiveInventory("ChexInstazorchFired",1)
        CHIZ V 3
        CHIZ J 6
        TNT1 A 0 A_ReFire
        Goto Ready
    Fire5:
        CHIZ J 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,75,"GigazorcherPuff", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,5,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,5,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,red,1,5,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff")
        CHIZ K 3 //A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff")
        CHIZ L 3
        CHIZ M 13
        TNT1 A 0 A_PlaySoundEx("chex/instazorchload","soundslot7",0,0)
        CHIZ M 3
        CHIZ NOPQR 3
        CHIZ S 5 A_TakeInventory("ChexInstazorchFired",4)
        CHIZ A 9
        goto Ready
    CoopFire2:
		TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",3,"CoopFire5")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",2,"CoopFire4")
        TNT1 A 0 A_JumpIfInventory("ChexInstazorchFired",1,"CoopFire3")
        CHIZ A 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,150,"GigazorcherPuff2", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff2")
        CHIZ B 3 A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff2")
        CHIZ C 3 A_GiveInventory("ChexInstazorchFired",1)
        CHIZ T 3
        CHIZ D 6
        TNT1 A 0 A_ReFire
        Goto Ready
    CoopFire3:
        CHIZ D 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,150,"GigazorcherPuff2", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff2")
        CHIZ E 3 A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff2")
        CHIZ F 3 A_GiveInventory("ChexInstazorchFired",1)
        CHIZ U 3
        CHIZ G 6
        TNT1 A 0 A_ReFire
        Goto Ready
    CoopFire4:
        CHIZ G 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,150,"GigazorcherPuff2", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff2")
        CHIZ H 3 A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff2")
        CHIZ I 3 A_GiveInventory("ChexInstazorchFired",1)
        CHIZ V 3
        CHIZ J 6
        TNT1 A 0 A_ReFire
        Goto Ready
    CoopFire5:
        CHIZ J 3
        TNT1 A 0 A_TakeInventory("Cell",10,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("chex/instazorchfire")
        TNT1 A 0 A_FireBullets(0,0,1,150,"GigazorcherPuff2", FBF_NORANDOM)
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,5,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,5,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,red,1,5,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,pink,1,0,"GigazorcherPuff2")
        TNT1 A 0 A_RailAttack(0,3,0,none,white,1,0,"GigazorcherPuff2")
        CHIZ K 3 //A_RailAttack(0,3,0,none,red,1,0,"GigazorcherPuff")
        CHIZ L 3
        CHIZ M 13
        TNT1 A 0 A_PlaySoundEx("chex/instazorchload","soundslot7",0,0)
        CHIZ M 3
        CHIZ NOPQR 3
        CHIZ S 5 A_TakeInventory("ChexInstazorchFired",4)
        CHIZ A 9
        goto Ready
    Flash:
        TNT1 A 5 bright A_Light1
        TNT1 A 5 bright A_Light2
        TNT1 A 0 bright A_Light0
        Goto LightDone
    Spawn:
        PLAC B -1
        Stop
    }
}

actor ChexInstazorchFired : Counter { Inventory.MaxAmount 3 }

actor GigazorcherPuff
{
    Radius 1
    Height 1
    Speed 0
    Damage 0
    DamageType "Zorch"
    +ALWAYSPUFF
    +SKYEXPLODE
    +PUFFONACTORS
    +PUFFGETSOWNER
    +BLOODLESSIMPACT
    +NOEXTREMEDEATH
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 8
        stop
    }
}

actor GigazorcherPuff2 : GigazorcherPuff 
{ 
	+MTHRUSPECIES 
	//+ALLOWTHRUFLAGS 
}