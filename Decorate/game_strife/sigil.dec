actor SigilSplinter1: Boolean { ConversationID 196 }
actor SigilSplinter2: Boolean { ConversationID 197 }
actor SigilSplinter3: Boolean { ConversationID 198 }
actor SigilSplinter4: Boolean { ConversationID 199 }
actor SigilSplinter5: Boolean { ConversationID 200 }
actor SigilInventoryCharge : Boolean { Inventory.InterHubAmount 0 }

actor GlobalSigilGiver
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, args[0], 1)
		Stop
	}
}

actor GlobalSigil1Giver: GlobalSigilGiver { Args 1 }
actor GlobalSigil2Giver: GlobalSigilGiver { Args 2 }
actor GlobalSigil3Giver: GlobalSigilGiver { Args 3 }
actor GlobalSigil4Giver: GlobalSigilGiver { Args 4 }
actor GlobalSigil5Giver: GlobalSigilGiver { Args 5 }

actor MaxSigil: CustomInventory
{
	+NOINTERACTION
	+AUTOACTIVATE
	Inventory.MaxAmount 0
	States
	{
	Spawn:
	Pickup:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 1, 1)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 2, 1)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 3, 1)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 4, 1)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 5, 1)
		Stop
	}
}

actor SigilInventoryWeapon: CustomInventory
{
	Inventory.MaxAmount 1
	tag "Sigil"
	+INVBAR
	+UNDROPPABLE
	States
	{
	Use:
		TNT1 A 0 A_JumpIfInventory("StrifeClass", 1, "UseFail")
		TNT1 A 0 A_JumpIfInventory("SigilInventoryCharge", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SigilInventoryCharge", 1)
		TNT1 A 0 A_PlaySound("strife/sigilcharge", CHAN_7)
		TNT1 A 0 A_Light2
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,1)
		Fail

	UseFail:
		TNT1 A 0
		Fail
	}
}

actor SigilInventoryWeapon1: SigilInventoryWeapon { Inventory.Icon "I_SGL1" }
actor SigilInventoryWeapon2: SigilInventoryWeapon { Inventory.Icon "I_SGL2" }
actor SigilInventoryWeapon3: SigilInventoryWeapon { Inventory.Icon "I_SGL3" }
actor SigilInventoryWeapon4: SigilInventoryWeapon { Inventory.Icon "I_SGL4" }
actor SigilInventoryWeapon5: SigilInventoryWeapon { Inventory.Icon "I_SGL5" }

actor SigilInventorySequence1 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_PlaySound("strife/sigilcharge", CHAN_7)
		  TNT1 A 0 A_Light2
		  TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,2)
		  Stop
	}
}

actor SigilInventorySequence2 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_LightInverse
		  TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,3)
		  Stop
	}
}

actor SigilInventorySequence3 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_Light1
		  TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,4)
		  Stop
	}
}

actor SigilInventorySequence4 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_AlertMonsters
		  TNT1 A 0 A_TakeInventory("SigilInventoryCharge", 1)
		  TNT1 A 0 A_Light0
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 5, "Sigil5")
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 4, "Sigil4")
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 3, "Sigil3")
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 2, "Sigil2")
		  Goto Sigil1
		Sigil1:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningSpot", 0, 0)
		  Stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningSpot_C", 0, 0)
		  Stop
		Sigil2:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningH1", 0, 0)
		  Stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningH1_C", 0, 0)
		  Stop
		Sigil3:
		  TNT1 A 0 A_GiveInventory("Sigil3AttackCounter", 20)
		  TNT1 A 0 A_SetAngle(angle-90)
		Sigil3Loop:
		  TNT1 A 0 A_SetAngle(angle+9)
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBall1", 0, 0)
		  Goto ContinueSigil3Loop
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBall1_C", 0, 0)
		ContinueSigil3Loop:
		  TNT1 A 0 A_TakeInventory("Sigil3AttackCounter", 1)
		  TNT1 A 0 A_JumpIfInventory("Sigil3AttackCounter", 1, "Sigil3Loop")
		  TNT1 A 0 A_SetAngle(angle-90)
		  Stop
		Sigil4:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,4)
	  	  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1", -10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1", 10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1", 0, 0)
		  Stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1_C", -10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1_C", 10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1_C", 0, 0)
		  Stop
		Sigil5:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBigBall")
		  Stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBigBall_C")
		  Stop
	}
}

Actor StrifeSigil1Pickup : CustomInventory replaces Sigil1
{
	Game Strife
	ConversationID 196, 190, 194
	Inventory.Icon "I_SGL1"
	+AUTOACTIVATE
	+INVENTORY.QUIET
	Inventory.MaxAmount 0
	States
	{
	Spawn:
		SIGL A -1
		Stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 1, 1)
		TNT1 A -1 A_Jump(256,"PickupSoundNormal")
		Wait
	PickupSoundNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 92, 0, 0)
		TNT1 A 1 A_PlaySound("weapons/sigilcharge", CHAN_ITEM)
		Stop
	}
}

Actor StrifeSigil2Pickup : StrifeSigil1Pickup replaces Sigil2
{
	ConversationID 197, 191, 195
	Inventory.Icon "I_SGL2"
	States
	{
	Spawn:
		SIGL B -1
		Stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 2, 1)
		TNT1 A -1 A_Jump(256,"PickupSoundNormal")
		Wait
	}
}

Actor StrifeSigil3Pickup : StrifeSigil2Pickup replaces Sigil3
{
	ConversationID 198, 192, 196
	Inventory.Icon "I_SGL3"
	States
	{
	Spawn:
		SIGL C -1
		Stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 3, 1)
		TNT1 A -1 A_Jump(256,"PickupSoundNormal")
		Wait
	}
}

Actor StrifeSigil4Pickup : StrifeSigil3Pickup replaces Sigil4
{
	ConversationID 199, 193, 197
	Inventory.Icon "I_SGL4"
	States
	{
	Spawn:
		SIGL D -1
		Stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 4, 1)
		TNT1 A -1 A_Jump(256,"PickupSoundNormal")
		Wait
	}
}

Actor StrifeSigil5Pickup : StrifeSigil4Pickup replaces Sigil5
{
	ConversationID 200, 194, 198
	Inventory.Icon "I_SGL5"
	States
	{
	Spawn:
		SIGL E -1
		Stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 5, 1)
		TNT1 A -1 A_Jump(256,"PickupSoundNormal")
		Wait
	}
}