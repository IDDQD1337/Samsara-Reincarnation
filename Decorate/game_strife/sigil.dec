actor SigilSplinter1: Boolean { ConversationID 196 }
actor SigilSplinter2: Boolean { ConversationID 197 }
actor SigilSplinter3: Boolean { ConversationID 198 }
actor SigilSplinter4: Boolean { ConversationID 199 }
actor SigilSplinter5: Boolean { ConversationID 200 }
actor SigilInventoryCharge : Boolean { Inventory.InterHubAmount 0 }

actor GlobalSigilGiver
{
    +NOINTERACTION

    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, args[0], 1)
        stop
    }
}

actor GlobalSigil1Giver: GlobalSigilGiver { Args 1 }
actor GlobalSigil2Giver: GlobalSigilGiver { Args 2 }
actor GlobalSigil3Giver: GlobalSigilGiver { Args 3 }
actor GlobalSigil4Giver: GlobalSigilGiver { Args 4 }
actor GlobalSigil5Giver: GlobalSigilGiver { Args 5 }

actor MaxSigil: CustomInventory
{
    +NOINTERACTION
    +AUTOACTIVATE
	
    Inventory.MaxAmount 0

    States
    {
      Spawn:
      Pickup:
        TNT1 A 0
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 1, 1)
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 2, 1)
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 3, 1)
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 4, 1)
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSpectres", 0, 6, 5, 1)
        stop
    }
}

actor SigilInventoryWeapon: CustomInventory
{
    Inventory.MaxAmount 1
	tag "Sigil"
    +INVBAR
    +UNDROPPABLE

    States
    {
      Use:
	    TNT1 A 0 A_JumpIfInventory("StrifeClass", 1, "UseFail")
		TNT1 A 0 A_JumpIfInventory("SigilInventoryCharge", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SigilInventoryCharge", 1)
		TNT1 A 0 A_PlaySound("strife/sigilcharge", CHAN_7)
		TNT1 A 0 A_Light2
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,1)
        fail

	  UseFail:
		TNT1 A 0
		fail
    }
}

actor SigilInventoryWeapon1: SigilInventoryWeapon { Inventory.Icon "I_SGL1" }
actor SigilInventoryWeapon2: SigilInventoryWeapon { Inventory.Icon "I_SGL2" }
actor SigilInventoryWeapon3: SigilInventoryWeapon { Inventory.Icon "I_SGL3" }
actor SigilInventoryWeapon4: SigilInventoryWeapon { Inventory.Icon "I_SGL4" }
actor SigilInventoryWeapon5: SigilInventoryWeapon { Inventory.Icon "I_SGL5" }

actor SigilInventorySequence1 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_PlaySound("strife/sigilcharge", CHAN_7)
		  TNT1 A 0 A_Light2
		  TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,2)
		  stop
	}
}

actor SigilInventorySequence2 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_LightInverse
		  TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,3)
		  stop
	}
}

actor SigilInventorySequence3 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_Light1
		  TNT1 A 0 ACS_NamedExecuteAlways("SamsaraSigil",0,4)
		  stop
	}
}

actor SigilInventorySequence4 : CustomInventory
{
	Inventory.MaxAmount 1
	+UNDROPPABLE
	States
	{
		Pickup:
		  TNT1 A 0 A_AlertMonsters
		  TNT1 A 0 A_TakeInventory("SigilInventoryCharge", 1)
		  TNT1 A 0 A_Light0
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 5, "Sigil5")
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 4, "Sigil4")
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 3, "Sigil3")
		  TNT1 A 0 A_JumpIfInventory("StrifeSigilPiece", 2, "Sigil2")
		  Goto Sigil1
		Sigil1:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	  
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningSpot", 0, 0)
		  stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningSpot_C", 0, 0)
		  stop
		Sigil2:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	  
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningH1", 0, 0)
		  stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningH1_C", 0, 0)
		  stop
		Sigil3:
		  TNT1 A 0 A_GiveInventory("Sigil3AttackCounter", 20)
		  TNT1 A 0 A_SetAngle(angle-90)
	    Sigil3Loop:
		  TNT1 A 0 A_SetAngle(angle+9)
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	  	  
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBall1", 0, 0)
		  Goto ContinueSigil3Loop
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBall1_C", 0, 0)	  
	    ContinueSigil3Loop:
		  TNT1 A 0 A_TakeInventory("Sigil3AttackCounter", 1)
		  TNT1 A 0 A_JumpIfInventory("Sigil3AttackCounter", 1, "Sigil3Loop")
		  TNT1 A 0 A_SetAngle(angle-90)
		  stop
		Sigil4:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,4)	  
	  	  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1", -10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1", 10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1", 0, 0)
		  stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1_C", -10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1_C", 10, 0)
		  TNT1 A 0 A_FireCustomMissile("StrifeSigilLightningBigV1_C", 0, 0)
		  stop
		Sigil5:
		  TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	  	  	  
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBigBall")
		  stop
		  TNT1 A 0 A_FireCustomMissile("StrifeSpectralLightningBigBall_C")
		  stop
	}
}
