actor "Auto Charge Pistol": InstantSwitchWeapon
{
    Weapon.SelectionOrder 1899
	Weapon.BobStyle Alpha
	Weapon.BobRangeX 0
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 1.5
    Weapon.SlotNumber 1
    Inventory.PickUpSound "wolfen/knifeget"
    Obituary "%k overcharged %o with the Auto Charge Pistol."
    Inventory.PickupMessage "You got an Auto Charge Pistol!"
    Weapon.AmmoUse 0
    Weapon.AmmoGive 0
    +INVENTORY.UNDROPPABLE
    +WEAPON.WIMPY_WEAPON	
	+NOALERT
    Weapon.YAdjust 11
	Inventory.RestrictedTo "BlakeStone"
    Tag "Auto Charge Pistol"
    States
    {
      Spawn:
        BWP1 A -1
        Loop
      Ready:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, 2)
        BPIS A 1 A_WeaponReady
        loop
		BPIS F 1 A_WeaponReady
		Loop
      Fire:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "FireAOG")
		TNT1 A 0 A_JumpIfInventory("BlakeSuperAutoCharge", 1, "Fire2")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
        BPIS B 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
		BPIS C 3 BRIGHT A_FireBullets(0,0, 1, 21, "BlankPuffBlake")
        BPIS DE 4
		BPIS A 15
        Goto Ready
	  Fire2:
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire2")
        BPIS B 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
		BPIS C 3 BRIGHT A_FireBullets(0,0, 1, 32, "BlankPuffBlake")
        BPIS DE 4
		BPIS A 15
        Goto Ready
      FireAOG:
		TNT1 A 0 A_JumpIfInventory("BlakeSuperAutoCharge", 1, "FireAOG2")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFireAOG")
        BPIS G 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
		BPIS H 3 BRIGHT A_FireBullets(0,0, 1, 21, "BlankPuffBlake")
        BPIS IJ 4
		BPIS F 15
        Goto Ready		
	  FireAOG2:
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFireAOG2")
        BPIS G 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
		BPIS H 3 BRIGHT A_FireBullets(0,0, 1, 32, "BlankPuffBlake")
        BPIS IJ 4
		BPIS F 15
        Goto Ready		
      CoopFire:
		BPIS B 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
        BPIS C 3 BRIGHT A_FireBullets(0,0, 1, 21, "BlankPuffBlakeCoop")
        BPIS DE 4
		BPIS A 15
        Goto Ready
      CoopFire2:
		BPIS B 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
        BPIS C 3 BRIGHT A_FireBullets(0,0, 1, 32, "BlankPuffBlakeCoop")
		BPIS DE 4
		BPIS A 15
        Goto Ready	
	 CoopFireAOG:
        BPIS G 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
		BPIS H 3 BRIGHT A_FireBullets(0,0, 1, 21, "BlankPuffBlakeCoop")
        BPIS IJ 4
		BPIS F 15
        Goto Ready
	CoopFireAOG2:	
        BPIS G 3
		TNT1 A 0 A_PlayWeaponSound("BPistol/Fire")
		BPIS H 3 BRIGHT A_FireBullets(0,0, 1, 32, "BlankPuffBlakeCoop")
        BPIS IJ 4
		BPIS F 15
        Goto Ready		
    }
}

actor BlankPuffBlake: BlankPuff { DamageType "BlakeBullet" +NOEXTREMEDEATH }
actor BlankPuffBlakeCoop : BlankPuffBlake { Species "Player" +THRUSPECIES +MTHRUSPECIES }
