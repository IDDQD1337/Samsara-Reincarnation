actor "Plasma Discharge Unit": InstantSwitchWeapon
{
    Weapon.SelectionOrder 1200
    Weapon.SlotNumber 5
	Weapon.BobStyle Alpha
	Weapon.BobRangeX 0
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 1.5	
    Inventory.PickUpSound "wolfen/knifeget"
    Obituary "%k \cvdestroyed\c- %o \cvwith the Plasma Discharge Unit\c-"
    Inventory.PickupMessage "You got a Plasma Discharge Unit!"
    DamageType "BlakePlasma"
    Weapon.AmmoUse 1
    Weapon.AmmoGive 8
	Weapon.AmmoType "RocketAmmo"
    +INVENTORY.UNDROPPABLE
	+NOAUTOAIM
	Inventory.RestrictedTo "BlakeStone"	
    Weapon.YAdjust 11
    States
    {
      Spawn:
        BWP5 A -1
        Loop

      Ready:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, 2)
        BCAN A 1 A_WeaponReady
        loop
		BCAN F 1 A_WeaponReady
		Loop

      Fire:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "FireAOG")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
        BCAN B 3
        TNT1 A 0 A_PlayWeaponSound("BCannon/Fire")
        BCAN C 3 BRIGHT A_FireCustomMissile("BCannonProj", 0, 1, 0, 12)
		BCAN D 3
		BCAN E 3 A_Refire
        Goto Ready	
	  FireAOG:	
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFireAOG")
        BCAN G 3
        TNT1 A 0 A_PlayWeaponSound("BCannon/Fire")
        BCAN H 3 BRIGHT A_FireCustomMissile("BCannonProj", 0, 1, 0, 12)
		BCAN I 3
		BCAN J 3 A_Refire
        Goto Ready	  
      CoopFire:
        BCAN B 3
        TNT1 A 0 A_PlayWeaponSound("BCannon/Fire")
        BCAN C 3 BRIGHT A_FireCustomMissile("BCannonProjCoop", 0, 1, 0, 12)
		BCAN D 3
		BCAN E 3 A_Refire
		Goto Ready
	  CoopFireAOG:
        BCAN G 3
        TNT1 A 0 A_PlayWeaponSound("BCannon/Fire")
        BCAN H 3 BRIGHT A_FireCustomMissile("BCannonProjCoop", 0, 1, 0, 12)
		BCAN I 3
		BCAN J 3 A_Refire
        Goto Ready		
    }
}

Actor BCannonProj
{
	PROJECTILE
	-NOGRAVITY
	+WINDTHRUST
	+BLOODLESSIMPACT
	+FORCEXYBILLBOARD
	Damage 5
	Radius 8
	Height 8
	Scale 1.25
	Speed 30
	Decal Scorch
	DamageType "BCannonProj"
	DeathSound "BCannon/Boom"
	States
	{
		Spawn:
			BCAP A -1 Bright
		Loop
		Death:
			TNT1 A 0 A_ChangeFlag("NOGRAVITY", 1)
			TNT1 A 0 A_Explode(Random(50,177), 128, 0)
			BCAP BCDEF 3 Bright
		Stop
	}
}

Actor BCannonProjCoop : BCannonProj
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
}