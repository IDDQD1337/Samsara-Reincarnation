Actor CMDarklightFoil : Weapon
{
	//+WEAPON.WIMPY_WEAPON
	+WEAPON.MELEEWEAPON
	+WEAPON.NOALERT
	+Inventory.UNDROPPABLE
	Inventory.PickupSound "%o was slashed by %k's darklight foil." 
	Inventory.PickupMessage "Picked up the Darklight Foil!"
	Weapon.ReadySound "CM/DFoil1"
	Weapon.SlotNumber 1
	Weapon.BobStyle InverseAlpha
	Weapon.BobRangeX 0.5
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 2.3	
	Tag "Darklight Foil"	
	Weapon.SelectionOrder 3600
	Inventory.RestrictedTo "CMPlayer"	
	States
	{
	Select:
		TNT1 A 0 A_Raise
		CMLW O 1 bright A_Raise
		Loop
	Deselect:
    	TNT1 A 0 A_Lower
		CMLW O 1 bright A_Lower
		Loop
	Ready:
		CMLW N 1 bright A_WeaponReady
		Loop
	Fire:
        CMLW N 1 bright A_Jump(256,"Fire1","Fire2","Fire3")
		Goto ready
	Fire1:
		CMLW PPPP 1 bright
		CMLW FFFF 1 bright
		CMLW GGGG 1 bright A_PlaySound("CM/DFoilSwing")
		CMLW HHHH 1 bright A_CustomPunch(12*Random(3,4),1,0,"CyberSaberPuff",100)
		CMLW IIII 1 bright
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 bright A_Refire
		Goto Ready
	Fire2:
		CMLW JJJJ 1 bright A_PlaySound("CM/DFoilSwing")
		CMLW KKKK 1 bright A_CustomPunch(8*Random(3,4),1,0,"CyberSaberPuff",100)
		CMLW KKKK 1 bright offset(-5,0)	
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 bright A_Refire		
		Goto Ready
	Fire3:
		CMLW LLLL 1 bright A_PlaySound("CM/DFoilSwing")
		CMLW MMMM 1 bright A_CustomPunch(8*Random(3,4),1,0,"CyberSaberPuff",100)
		CMLW MMMM 1 bright offset(5,0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 bright A_Refire		
		Goto Ready
	Spawn:
		CMLW Z -1
		Stop
	}	
}