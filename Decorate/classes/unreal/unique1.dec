actor Unreal_GESChargePower : Counter { Inventory.MaxAmount 5 }
actor SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck : Boolean {}
Actor Unreal_BioGelTimer : Counter { Inventory.MaxAmount 315 }

Actor Unreal_GESBioRifle : UnrealWeapon
{
	Tag "GES BioRifle"
	Weapon.SelectionOrder 1400
	Weapon.SlotNumber 8
	Weapon.SlotPriority 1
	Weapon.AmmoType "Cell"
	Weapon.AmmoGive 50
	Weapon.AmmoUse 2
	Weapon.BobRangeX 0.6
	Weapon.BobRangeY 1.3
	Inventory.PickupMessage "You got the GES BioRifle."
	Obituary "%o drank a glass of %k's dripping green load."
	+ALT_USES_BOTH // only one ammo type with same ammo amount use, so this makes alt fire behave as intended
	+EXPLOSIVE
	+NOALERT
	States
	{
		Spawn:
			UN00 A 10 Bright
			UN00 A 10
			loop

		ReadyActual:
			UN01 J 0 A_TakeInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck")
			UN01 J 5 A_WeaponReady
			goto ReadyActualJump

		ReadyActualJump:
			UN01 J 0 A_Jump(8,"ReadyActualIdle1","ReadyActualIdle2")
			goto ReadyActual

		ReadyActualIdle1:
			UN01 J 2 A_WeaponReady
			UN02 ABCDEFGHIJ 2 A_WeaponReady
			goto ReadyActual

		ReadyActualIdle2:
			UN01 J 4 A_WeaponReady
			UN05 ABC 4 A_WeaponReady
			goto ReadyActual

		Deselect:
			UN06 A 0 A_JumpIfInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck",1,1)
			goto DeselectStart
			UN06 A 0 A_PlaySound("silence",CHAN_WEAPON)
			UN06 A 0 A_StopSound(CHAN_WEAPON)
			UN06 A 0 A_TakeInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck")
			goto DeselectStart

		DeselectStart:
			UN06 A 0 A_TakeInventory("Unreal_BioRifleSelected")
			UN06 A 2 A_JumpIfHealthLower(1,"DeselectInstant")
			UN06 BCDEFG 2
			goto DeselectInstant

		Ready: // our "Select" state
			UN01 A 0 A_GiveInventory("Unreal_BioRifleSelected")
			UN01 A 0 A_PlaySound("Unreal/BRifle/Select")
			UN01 A 0 A_TakeInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck") // map change hack
			UN01 A 0 A_JumpIfInventory("SamsaraHasDoubleFiringSpeed",1,2)
			UN01 A 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
			UN01 A 0 A_TakeInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck") // map change hack
			UN01 A 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
			UN01 BCDEFGHIJ 2 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
			goto ReadyActual

		Fire:
			UN04 A 0 A_AlertMonsters
			UN04 A 0 A_GiveInventory("SamsaraUnrealGESBioRiflePrimaryAttackHandler")
			UN04 ABCD 2 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN04 E 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
			UN04 E 0 A_JumpIfInventory("Cell",2,1)
			goto FireFinish
			UN04 E 0 A_ReFire
			goto FireFinish

		FireFinish:
			UN04 E 0 A_ClearReFire
			UN04 E 2 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN01 J 0 A_CheckReload
			goto ReadyActual

		AltFire:
			UN03 A 0 A_TakeInventory("Unreal_GESChargePower")
			UN03 A 0 A_PlaySound("Unreal/BRifle/Charge",CHAN_WEAPON,1.0,true)
			UN03 A 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck")
		AltFireCharge1:
			UN03 A 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryChargeGiver")
			UN03 AB 9 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN03 C 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
			UN03 C 0 A_JumpIfInventory("Cell",2,1)
			goto AltFireRelease
			UN03 C 0 A_ReFire("AltFireCharge2")
			goto AltFireRelease

		AltFireCharge2:
			UN03 C 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryChargeGiver")
			UN03 CD 9 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN03 E 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
			UN03 E 0 A_JumpIfInventory("Cell",2,1)
			goto AltFireRelease
			UN03 E 0 A_ReFire("AltFireCharge3")
			goto AltFireRelease

		AltFireCharge3:
			UN03 E 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryChargeGiver")
			UN03 EF 9 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN03 G 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
			UN03 G 0 A_JumpIfInventory("Cell",2,1)
			goto AltFireRelease
			UN03 G 0 A_ReFire("AltFireCharge4")
			goto AltFireRelease

		AltFireCharge4:
			UN03 G 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryChargeGiver")
			UN03 GH 9 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN03 I 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
			UN03 I 0 A_JumpIfInventory("Cell",2,1)
			goto AltFireRelease
			UN03 I 0 A_ReFire("AltFireCharge5")
			goto AltFireRelease

		AltFireCharge5:
			UN03 I 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryChargeGiver")
			UN03 IJ 9 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN03 K 0 A_JumpIfInventory("SamsaraSynthFireRight",1,"AltFireChargeSustain") // A_ReFire does an ammo check that switches if it fails, we don't want that
			goto AltFireRelease

		AltFireChargeSustain:
			UN03 KLMN 9 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			goto AltFireRelease

		AltFireRelease:
			UN04 A 0 A_AlertMonsters
			UN04 A 0 A_ClearReFire
			UN04 A 0 A_GiveInventory("SamsaraUnrealGESBioRifleSecondaryAttackHandler")
			UN04 A 2 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN04 BCDE 5 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
			UN01 J 0 A_CheckReload
			goto ReadyActual
	}
}

actor SamsaraUnrealGESBioRiflePrimaryAttackHandler : Trigger
{
	States
	{
	// Ammo checking/taking stuff
	Pickup:
		TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"PickupAttack")
		TNT1 A 0 A_JumpIfInventory("Cell",2,1)
		stop
		TNT1 A 0 A_TakeInventory("Cell",2)
		goto PickupAttack

	// Attack stuff
	PickupAttack:
		TNT1 A 0 A_PlaySound("Unreal/BRifle/Fire",CHAN_WEAPON)
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCoop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCoop")
	PickupAttackDM:
		TNT1 A 0 A_FireCustomMissile("Unreal_BioRGel",0,false,16)
		goto PickupFinish

	PickupAttackCoop:
		TNT1 A 0 A_FireCustomMissile("Unreal_BioRGelCoop",0,false,16)
		goto PickupFinish

	// Finishing stuff
	PickupFinish:
		TNT1 A 0 ACS_NamedExecuteWithResult("Unreal_Recoil")
		TNT1 A 0 A_JumpIfInventory("WeaponFlashesAreDisabled",1,"PickupStop")
		TNT1 A 0 A_SetBlend("3DE32A",0.1,10)
		stop
	}
}

actor SamsaraUnrealGESBioRifleSecondaryAttackHandler : Trigger
{
	States
	{
	// Charge checking stuff
	Pickup:
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",1,"PickupAttack")
		stop

	// Attack stuff
	PickupAttack:
		TNT1 A 0 A_PlaySound("Unreal/BRifle/Fire",CHAN_WEAPON)
		TNT1 A 0 A_TakeInventory("SamsaraUnrealGESBioRifleSecondaryChargingSoundCheck")
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",0,"PickupAttackCharged5")
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",4,"PickupAttackCharged4")
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",3,"PickupAttackCharged3")
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",2,"PickupAttackCharged2")
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",1,"PickupAttackCharged1")
		stop

	// 1 charge
	PickupAttackCharged1:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCharged1Coop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCharged1Coop")
	PickupAttackCharged1DM:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel1",0,false,16)
		goto PickupFinish
	PickupAttackCharged1Coop:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel1Coop",0,false,16)
		goto PickupFinish

	// 2 charges
	PickupAttackCharged2:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCharged2Coop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCharged2Coop")
	PickupAttackCharged2DM:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel2",0,false,16)
		goto PickupFinish
	PickupAttackCharged2Coop:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel2Coop",0,false,16)
		goto PickupFinish

	// 3 charges
	PickupAttackCharged3:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCharged3Coop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCharged3Coop")
	PickupAttackCharged3DM:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel3",0,false,16)
		goto PickupFinish
	PickupAttackCharged3Coop:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel3Coop",0,false,16)
		goto PickupFinish

	// 4 charges
	PickupAttackCharged4:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCharged4Coop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCharged4Coop")
	PickupAttackCharged4DM:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel4",0,false,16)
		goto PickupFinish
	PickupAttackCharged4Coop:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel4Coop",0,false,16)
		goto PickupFinish

	// 5 charges
	PickupAttackCharged5:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCharged5Coop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCharged5Coop")
	PickupAttackCharged5DM:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel5",0,false,16)
		goto PickupFinish
	PickupAttackCharged5Coop:
		TNT1 A 0 A_FireCustomMissile("Unreal_BigBioRGel5Coop",0,false,16)
		goto PickupFinish

	// Finishing stuff
	PickupFinish:
		TNT1 A 0 ACS_NamedExecuteWithResult("Unreal_Recoil")
		TNT1 A 0 A_JumpIfInventory("WeaponFlashesAreDisabled",1,"PickupStop")
		TNT1 A 0 A_SetBlend("3DE32A",0.1,10)
		stop
	}
}

actor SamsaraUnrealGESBioRifleSecondaryChargeGiver : Trigger
{
	States
	{
	// Ammo checking/taking stuff
	Pickup:
		TNT1 A 0 A_JumpIfInventory("Unreal_GESChargePower",0,"PickupStop")
		TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"PickupGiveCharge")
		TNT1 A 0 A_JumpIfInventory("Cell",2,1)
		stop
		TNT1 A 0 A_TakeInventory("Cell",2)
		goto PickupGiveCharge

	// Charge giving stuff
	PickupGiveCharge:
		TNT1 A 0 A_GiveInventory("Unreal_GESChargePower")
		stop
	}
}

Actor Unreal_BioRGel
{
	Radius 3
	Height 3
	Projectile
	-NOGRAVITY
	+FORCERADIUSDMG
	Gravity 0.33
	Speed 16
	Damage (40)
	Scale 0.5
	ReactionTime 88
	DamageType "UnrealSludge"
	//DeathSound "Unreal/BRifle/GelHit"
	Var Int User_Angle;
	States
	{
		Spawn:
			TNT1 A 0 NoDelay A_Jump(128,3)
			TNT1 A 0 A_SetUserVar(User_Angle,Random(1,6))
			UN00 A 0 ThrustThingZ(0,10,0,1)
			Goto SpawnLoop
			TNT1 A 0 A_SetUserVar(User_Angle,Random(-6,-1))
			UN00 A 0 ThrustThingZ(0,10,0,1)
		SpawnLoop:
			UN00 A 0 A_SetAngle(Angle+User_Angle)
			UN00 A 2 A_SetPitch(Pitch-15)
			UN00 BCDEFG 2
			Loop
		Death:
			UN01 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			UN01 A 0 A_JumpIf(scaleX >= 0.7, "Death2")
			TNT1 A 0 A_SpawnItemEx("Unreal_BioRGelStatic", 0,0,0,0,0,0, angle, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Death2:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_SpawnItemEx("Unreal_BioRGelStatic", 0,0,0,0,0,0, angle, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Crash:
		XDeath:
			TNT1 A 0 A_JumpIf(scaleX >= 0.7, "XDeath1")
			/*TNT1 A 0 A_JumpIf(scaleX == 0.9, "XDeath2")
			TNT1 A 0 A_JumpIf(scaleX == 1.1, "XDeath3")
			TNT1 A 0 A_JumpIf(scaleX == 1.3, "XDeath4")
			TNT1 A 0 A_JumpIf(scaleX == 1.5, "XDeath5")*/
			TNT1 A 0 A_Explode(scalex*40, scalex*120)
			Goto XDeathEnd
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*40, scalex*120)
			Goto XDeathEnd
		XDeathEnd:
			TNT1 A 0 A_PlaySound("Unreal/BRifle/Explode",CHAN_VOICE)
			TNT1 AAA 0 A_SpawnItemEx("Unreal_GreenBlob", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(2,7), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 5 A_SpawnItemEx("UnrealToxicGasPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			Stop
		/*
		XDeath2:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(36, 108)
			Goto XDeathEnd
		XDeath3:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(44, 132)
			Goto XDeathEnd
		XDeath4:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(52, 156)
			Goto XDeathEnd
		XDeath5:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(60, 180)
			Goto XDeathEnd
		*/
	}
}

Actor Unreal_BioRGelCoop : Unreal_BioRGel
{
	+THRUSPECIES
	Species "Player"
	States
	{
		Death:
			UN01 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			UN01 A 0 A_JumpIf(scaleX >= 0.7, "Death2")
			TNT1 A 0 A_SpawnItemEx("Unreal_BioRGelStaticCoop",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Death2:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDropCoop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_SpawnItemEx("Unreal_BioRGelStaticCoop",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDropCoop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*40, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BioRGelStatic
{
	-SHOOTABLE
	+VULNERABLE
	+ISMONSTER
	+FRIENDLY
	-COUNTKILL
	+NOGRAVITY
	+MOVEWITHSECTOR
	+NOBLOOD
	+THRUACTORS
	+FORCERADIUSDMG
	+LOOKALLAROUND
	Mass 10000
	Radius 2
	Height 2
	DamageType "UnrealSludge"
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_CheckFloor("HitFloor")
			TNT1 A 0 A_CheckCeiling("HitCeiling")
			UN00 A 0 A_SetPitch(0)
			UN00 A 0 A_SetAngle(angle)
		Spawn2:
			UN01 A 0 A_SetPitch(90)
			UN01 ABCDE 2
			UN03 ABC 2
			UN03 C 0 A_JumpIf(scaleX == 0.7, "WallLoop1")
			UN03 C 0 A_JumpIf(scaleX == 0.9, "WallLoop2")
			UN03 C 0 A_JumpIf(scaleX == 1.1, "WallLoop3")
			UN03 C 0 A_JumpIf(scaleX == 1.3, "WallLoop4")
			UN03 C 0 A_JumpIf(scaleX == 1.5, "WallLoop5")
			Goto WallLoop
		WallLoop:
			UN03 C 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 20, 0, 360, "Detonate")
			UN03 C 0 A_JumpIfInventory("Unreal_BioGelTimer", 88, "Detonate")
			UN03 C 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN03 C 1 A_SetPitch(90)
			Loop
		WallLoop1:
			UN03 C 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 28, 0, 360, "Detonate")
			UN03 C 0 A_JumpIfInventory("Unreal_BioGelTimer", 192, "Detonate")
			UN03 C 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN03 C 1 A_SetPitch(90)
			Loop
		WallLoop2:
			UN03 C 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 36, 0, 360, "Detonate")
			UN03 C 0 A_JumpIfInventory("Unreal_BioGelTimer", 227, "Detonate")
			UN03 C 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN03 C 1 A_SetPitch(90)
			Loop
		WallLoop3:
			UN03 C 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 44, 0, 360, "Detonate")
			UN03 C 0 A_JumpIfInventory("Unreal_BioGelTimer", 263, "Detonate")
			UN03 C 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN03 C 1 A_SetPitch(90)
			Loop
		WallLoop4:
			UN03 C 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 52, 0, 360, "Detonate")
			UN03 C 0 A_JumpIfInventory("Unreal_BioGelTimer", 297, "Detonate")
			UN03 C 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN03 C 1 A_SetPitch(90)
			Loop
		WallLoop5:
			UN03 C 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 60, 0, 360, "Detonate")
			UN03 C 0 A_JumpIfInventory("Unreal_BioGelTimer", 0, "Detonate")
			UN03 C 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN03 C 1 A_SetPitch(90)
			Loop
		HitFloor:
			UN01 A 2 A_SetPitch(0)
			UN01 BCDE 2
			UN01 A 0 A_JumpIf(scaleX == 0.7, "FloorLoop1")
			UN01 A 0 A_JumpIf(scaleX == 0.9, "FloorLoop2")
			UN01 A 0 A_JumpIf(scaleX == 1.1, "FloorLoop3")
			UN01 A 0 A_JumpIf(scaleX == 1.3, "FloorLoop4")
			UN01 A 0 A_JumpIf(scaleX == 1.5, "FloorLoop5")
			Goto FloorLoop
		FloorLoop:
			UN01 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 20, 0, 360, "Detonate")
			UN01 A 0 A_JumpIfInventory("Unreal_BioGelTimer", 88, "Detonate")
			UN01 A 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN01 A 1 A_SetPitch(0)
			Loop
		FloorLoop1:
			UN01 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 28, 0, 360, "Detonate")
			UN01 A 0 A_JumpIfInventory("Unreal_BioGelTimer", 192, "Detonate")
			UN01 A 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN01 A 1 A_SetPitch(0)
			Loop
		FloorLoop2:
			UN01 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 36, 0, 360, "Detonate")
			UN01 A 0 A_JumpIfInventory("Unreal_BioGelTimer", 227, "Detonate")
			UN01 A 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN01 A 1 A_SetPitch(0)
			Loop
		FloorLoop3:
			UN01 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 44, 0, 360, "Detonate")
			UN01 A 0 A_JumpIfInventory("Unreal_BioGelTimer", 263, "Detonate")
			UN01 A 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN01 A 1 A_SetPitch(0)
			Loop
		FloorLoop4:
			UN01 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 52, 0, 360, "Detonate")
			UN01 A 0 A_JumpIfInventory("Unreal_BioGelTimer", 297, "Detonate")
			UN01 A 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN01 A 1 A_SetPitch(0)
			Loop
		FloorLoop5:
			UN01 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 60, 0, 360, "Detonate")
			UN01 A 0 A_JumpIfInventory("Unreal_BioGelTimer", 0, "Detonate")
			UN01 A 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN01 A 1 A_SetPitch(0)
			Loop
		HitCeiling:
			UN01 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			UN01 A 0 A_ChangeFlag(NOGRAVITY, TRUE)
			UN01 A 2 A_SetPitch(180)
			UN01 BCDE 2
			UN02 A 2 A_PlaySound("Unreal/BRifle/Drip",CHAN_VOICE)
			UN02 BCDEFG 2
			UN02 G 0 A_JumpIf(scaleX == 0.7, "CeilingLoop1")
			UN02 G 0 A_JumpIf(scaleX == 0.9, "CeilingLoop2")
			UN02 G 0 A_JumpIf(scaleX == 1.1, "CeilingLoop3")
			UN02 G 0 A_JumpIf(scaleX == 1.3, "CeilingLoop4")
			UN02 G 0 A_JumpIf(scaleX == 1.5, "CeilingLoop5")
			Goto CeilingLoop
		CeilingLoop:
			UN02 G 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 20, 0, 360, "Detonate")
			UN02 G 0 A_JumpIfInventory("Unreal_BioGelTimer", 88, "Detonate")
			UN02 G 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN02 G 1 A_SetPitch(180)
			Loop
		CeilingLoop1:
			UN02 G 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 28, 0, 360, "Detonate")
			UN02 G 0 A_JumpIfInventory("Unreal_BioGelTimer", 192, "Detonate")
			UN02 G 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN02 G 1 A_SetPitch(180)
			Loop
		CeilingLoop2:
			UN02 G 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 36, 0, 360, "Detonate")
			UN02 G 0 A_JumpIfInventory("Unreal_BioGelTimer", 227, "Detonate")
			UN02 G 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN02 G 1 A_SetPitch(180)
			Loop
		CeilingLoop3:
			UN02 G 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 44, 0, 360, "Detonate")
			UN02 G 0 A_JumpIfInventory("Unreal_BioGelTimer", 263, "Detonate")
			UN02 G 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN02 G 1 A_SetPitch(180)
			Loop
		CeilingLoop4:
			UN02 G 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 52, 0, 360, "Detonate")
			UN02 G 0 A_JumpIfInventory("Unreal_BioGelTimer", 297, "Detonate")
			UN02 G 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN02 G 1 A_SetPitch(180)
			Loop
		CeilingLoop5:
			UN02 G 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 60, 0, 360, "Detonate")
			UN02 G 0 A_JumpIfInventory("Unreal_BioGelTimer", 0, "Detonate")
			UN02 G 0 A_GiveInventory("Unreal_BioGelTimer", 1)
			UN02 G 1 A_SetPitch(180)
			Loop
		Detonate:
			TNT1 A 0 A_JumpIf(scaleX >= 0.7, "XDeath1")
			/*
			TNT1 A 0 A_JumpIf(scaleX == 0.9, "XDeath2")
			TNT1 A 0 A_JumpIf(scaleX == 1.1, "XDeath3")
			TNT1 A 0 A_JumpIf(scaleX == 1.3, "XDeath4")
			TNT1 A 0 A_JumpIf(scaleX == 1.5, "XDeath5")
			*/
			TNT1 A 0 A_Explode(scalex*40, scalex*120)
			Goto XDeathEnd
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*40, scalex*120)
			Goto XDeathEnd
		XDeathEnd:
			TNT1 A 0 A_PlaySound("Unreal/BRifle/Explode",CHAN_VOICE)
			TNT1 AAA 0 A_SpawnItemEx("Unreal_GreenBlob", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(2,7), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 5 A_SpawnItemEx("UnrealToxicGasPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			Stop
		/*
		XDeath2:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(36, 108)
			Goto XDeathEnd
		XDeath3:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(44, 132)
			Goto XDeathEnd
		XDeath4:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(52, 156)
			Goto XDeathEnd
		XDeath5:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(60, 180)
			Goto XDeathEnd
		*/
	}
}

Actor Unreal_BioRGelStaticCoop : Unreal_BioRGelStatic
{
	+THRUSPECIES
	Species "Player"
	States
	{
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDropCoop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*40, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BigBioRGelStatic : Unreal_BioRGelStatic
{
	States
	{
		Detonate:
			TNT1 A 0 A_JumpIf(scaleX >= 0.7, "XDeath1")
			/*
			TNT1 A 0 A_JumpIf(scaleX == 0.9, "XDeath2")
			TNT1 A 0 A_JumpIf(scaleX == 1.1, "XDeath3")
			TNT1 A 0 A_JumpIf(scaleX == 1.3, "XDeath4")
			TNT1 A 0 A_JumpIf(scaleX == 1.5, "XDeath5")
			*/
			TNT1 A 0 A_Explode(scalex*75, scalex*120)
			Goto Super::XDeathEnd
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*75, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BigBioRGelStaticCoop : Unreal_BigBioRGelStatic
{
	+THRUSPECIES
	Species "Player"
	States
	{
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDropCoop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*75, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BioDrop : Unreal_BioRGel
{
	Damage (60)
	Radius 3
	Height 3
	Speed 0
	States
	{
		Death:
			TNT1 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			//UN01 A 0 A_JumpIf(scaleX >= 0.7, "Death2")
			TNT1 A 0 A_SpawnItemEx("Unreal_BioDropStatic",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Detonate:
			/*
			TNT1 A 0 A_JumpIf(scaleX >= 0.7, "XDeath1")
			TNT1 A 0 A_JumpIf(scaleX == 0.9, "XDeath2")
			TNT1 A 0 A_JumpIf(scaleX == 1.1, "XDeath3")
			TNT1 A 0 A_JumpIf(scaleX == 1.3, "XDeath4")
			TNT1 A 0 A_JumpIf(scaleX == 1.5, "XDeath5")
			*/
			TNT1 A 0 A_Explode(scalex*60, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BioDropCoop : Unreal_BioDrop
{
	+THRUSPECIES
	Species "Player"
	States
	{
		Death:
			TNT1 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			TNT1 A 0 A_SpawnItemEx("Unreal_BioDropStaticCoop",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
	}
}

Actor Unreal_BioDropStatic : Unreal_BioRGelStatic
{
	States
	{
		Detonate:
			/*
			TNT1 A 0 A_JumpIf(scaleX >= 0.7, "XDeath1")
			TNT1 A 0 A_JumpIf(scaleX == 0.9, "XDeath2")
			TNT1 A 0 A_JumpIf(scaleX == 1.1, "XDeath3")
			TNT1 A 0 A_JumpIf(scaleX == 1.3, "XDeath4")
			TNT1 A 0 A_JumpIf(scaleX == 1.5, "XDeath5")
			*/
			TNT1 A 0 A_Explode(scalex*60, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BioDropStaticCoop : Unreal_BioDropStatic
{
	+THRUSPECIES
	Species "Player"
}

Actor Unreal_BigBioRGel1 : Unreal_BioRGel
{
	Scale 0.7
	Speed 14
	Radius 3
	Height 4
	Damage (75)
	States
	{
		Death:
			UN01 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			UN01 A 0 A_JumpIf(scaleX >= 0.7, "Death2")
			TNT1 A 0 A_SpawnItemEx("Unreal_BigBioRGelStatic",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Death2:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_SpawnItemEx("Unreal_BigBioRGelStatic",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Detonate:
			TNT1 A 0 A_JumpIf(scaleX >= 0.7, "XDeath1")
			/*
			TNT1 A 0 A_JumpIf(scaleX == 0.9, "XDeath2")
			TNT1 A 0 A_JumpIf(scaleX == 1.1, "XDeath3")
			TNT1 A 0 A_JumpIf(scaleX == 1.3, "XDeath4")
			TNT1 A 0 A_JumpIf(scaleX == 1.5, "XDeath5")
			*/
			TNT1 A 0 A_Explode(scalex*75, scalex*120)
			Goto Super::XDeathEnd
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDrop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*75, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BigBioRGel1Coop : Unreal_BigBioRGel1
{
	+THRUSPECIES
	Species "Player"
	States
	{
		Death:
			UN01 A 0 A_PlaySound("Unreal/BRifle/GelHit",CHAN_VOICE)
			UN01 A 0 A_JumpIf(scaleX >= 0.7, "Death2")
			TNT1 A 0 A_SpawnItemEx("Unreal_BigBioRGelStaticCoop",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		Death2:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDropCoop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_SpawnItemEx("Unreal_BigBioRGelStaticCoop",0,0,0,0,0,0,angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSCALE)
			stop
		XDeath1:
			TNT1 AAA 0 A_SpawnItemEx("Unreal_BioDropCoop", Random(-5,5), Random(-5,5), Random(-5,5), Random(0,2), Random(0,2), Random(0,5), Random(1,360), SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Explode(scalex*75, scalex*120)
			Goto Super::XDeathEnd
	}
}

Actor Unreal_BigBioRGel2 : Unreal_BigBioRGel1 { Scale 0.9 }
Actor Unreal_BigBioRGel2Coop : Unreal_BigBioRGel1Coop { Scale 0.9 }
Actor Unreal_BigBioRGel3 : Unreal_BigBioRGel1 { Scale 1.1 }
Actor Unreal_BigBioRGel3Coop : Unreal_BigBioRGel1Coop { Scale 1.1 }
Actor Unreal_BigBioRGel4 : Unreal_BigBioRGel1 { Scale 1.3 }
Actor Unreal_BigBioRGel4Coop : Unreal_BigBioRGel1Coop { Scale 1.3 }
Actor Unreal_BigBioRGel5 : Unreal_BigBioRGel1 { Scale 1.5 }
Actor Unreal_BigBioRGel5Coop : Unreal_BigBioRGel1Coop { Scale 1.5 }

Actor Unreal_GreenBlob
{
	Radius 4
	Height 4
	Scale 0.5
	RenderStyle Add
	Alpha 1.0
	+CLIENTSIDEONLY
	+BRIGHT
	-NOGRAVITY
	States
	{
		Spawn:
			UN26 ABCDE 2 A_FadeOut(0.2)
			Stop
	}
}
