actor freeman_slot3selected : Boolean { Inventory.InterHubAmount 0 }
actor SamsaraHalfLifeLoadoutSlot3 : Boolean {}
actor HLDeagleLaserActivated : Boolean {}
actor HLDeagleLaserMemory : Boolean {}

Actor ".357 Python" : HLWeapon
{
    Inventory.PickupMessage "You got the .357 Magnum!"
    Weapon.SlotNumber 3
    Weapon.SelectionOrder 3000
    Weapon.AmmoType1 "HLPythonCounter"
    Weapon.AmmoUse1 1
    Weapon.AmmoType2 "Shell"
    Weapon.AmmoGive2 6
    Tag ".357 Python"
    States
    {
      Spawn:
        HW20 Z -1
        stop

      // .357 Python
      // Gordon Freeman
      ReadyActual:
        HW22 A 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        HW22 A 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"ReadyActualDeagle")
        HW22 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualReloadable")
      ReadyActualNonReloadable:
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualNonReloadableShephard")
        HW22 A 2 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActualJump

      ReadyActualReloadable:
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualReloadableShephard")
        HW22 A 2 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        goto ReadyActualJump

      ReadyActualJump:
        HW22 A 0 A_Jump(4,"ReadyActualAmmoCheck")
        HW22 A 0 A_Jump(3,"ReadyActualAmmoCheck")
        HW22 A 0 A_Jump(2,"ReadyActualAmmoCheck")
        HW22 A 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"ReadyActualJumpDeagle")
        HW22 A 0 A_Jump(1,"ReadyActualIdle1","ReadyActualIdle2")
        goto ReadyActualAmmoCheck

      ReadyActualIdle1:
        HW22 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle1Reloadable")
      ReadyActualIdle1NonReloadable:
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle1NonReloadableShephard")
        HW22 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW30 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW31 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW32 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW33 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW34 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW35 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW36 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW37 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW38 ABCDEFGH 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReadyActualIdle1Reloadable:
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle1ReloadableShephard")
        HW22 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW30 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW31 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW32 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW33 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW34 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW35 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW36 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW37 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW38 ABCDEFGH 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle2:
        HW22 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle2Reloadable")
      ReadyActualIdle2NonReloadable:
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle2NonReloadableShephard")
        HW22 A 1 A_WeaponReady(WRF_NOSECONDARY)
        HW19 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW18 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW17 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW16 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW15 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW14 ABCDEFGHIJKLMNOPQRS 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReadyActualIdle2Reloadable:
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle2ReloadableShephard")
        HW22 A 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW19 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW18 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW17 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW16 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW15 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        HW14 ABCDEFGHIJKLMNOPQRS 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualAmmoCheck:
        HW22 A 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"ReadyActualAmmoCheckDeagle")
        HW22 A 0 A_JumpIfInventory("SamsaraReloadMode",2,1)
        goto ReadyActual
        HW22 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"ReadyActual")
        HW22 A 0 A_JumpIfInventory("HLPythonCounter",1,"ReadyActual")
        goto ReloadCheck

      Select:
        TNT1 A 0 A_TakeInventory("freeman_fistselected")
        TNT1 A 0 A_TakeInventory("freeman_pistolselected")
        TNT1 A 0 A_TakeInventory("freeman_slot1selected")
        TNT1 A 0 A_TakeInventory("freeman_slot2selected")
        TNT1 A 0 A_GiveInventory("freeman_slot3selected")
        TNT1 A 0 A_TakeInventory("freeman_slot4selected")
        TNT1 A 0 A_TakeInventory("freeman_slot5selected")
        TNT1 A 0 A_TakeInventory("freeman_slot6selected")
        TNT1 A 0 A_TakeInventory("freeman_slot7selected")
        TNT1 A 0 A_TakeInventory("freeman_uniqueselected")
        TNT1 A 0 A_TakeInventory("freeman_unique2selected")
        TNT1 A 0 A_TakeInventory("freeman_unique3selected")
        goto Super::Select

      Ready: // our "Select" state
        HW20 A 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"ReadyDeagle")
        HW20 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyShephard")
        HW20 ABCDEFGHIJK 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        HW22 A 0
      ReadyFinish:
        TNT1 A 0 ACS_NamedExecuteAlways("HalfLifeLaserSight", 0, 1)
        goto ReadyActual

      Fire:
        HW38 I 0 A_JumpIfInventory("HLOriginalKeySwitcherOpen",1,"ReadyActual")
        HW38 I 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        HW38 I 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"FireDeagle")
        HW38 I 0 A_JumpIfInventory("SamsaraReloadMode",2,"FireReloadable")
      FireNonReloadable:
        HW38 I 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"FireWaterCheck")
        HW38 I 0 A_JumpIfInventory("Shell",1,"FireWaterCheck")
        goto FireDry

      FireReloadable:
        HW38 I 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"FireWaterCheck")
        HW38 I 0 A_JumpIfInventory("HLPythonCounter",1,"FireWaterCheck")
        goto FireDry

      FireWaterCheck:
        HW38 I 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"FireDry")
        goto FireStart

      FireDry:
        HW22 A 0 A_PlaySound("halflife/weaponempty",CHAN_6)
        HW22 A 0 A_ClearReFire
        HW22 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"FireDryShephard")
        HW22 A 4 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      Hold:
        HW38 I 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"HoldDeagle")
        HW38 I 0 A_JumpIfInventory("SamsaraReloadMode",2,"HoldReloadable")
      HoldNonReloadable:
        HW38 I 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"HoldWaterCheck")
        HW38 I 0 A_JumpIfInventory("Shell",1,"HoldWaterCheck")
        goto HoldDry

      HoldReloadable:
        HW38 I 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"HoldWaterCheck")
        HW38 I 0 A_JumpIfInventory("HLPythonCounter",1,"HoldWaterCheck")
        goto HoldDry

      HoldWaterCheck:
        HW38 I 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"HoldDry")
        goto FireStart

      HoldDry:
        HW23 W 0 A_PlaySound("halflife/weaponempty",CHAN_6)
        HW23 W 0 A_ClearReFire
        HW23 W 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"HoldDryShephard")
        HW23 WX 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW23 YZ 2 A_WeaponReady(WRF_NOFIRE)
        HW24 AB 1 A_WeaponReady(WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      FireStart:
        HW38 I 0 A_AlertMonsters
        HW38 I 0 A_GiveInventory("SamsaraHalfLife357MagnumAttackHandler")
        HW38 I 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"FireStartShephard")
        HW38 IJ 1 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW23 ABCDEFGHIJKLMNOPQRSTUV 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW23 W 0 A_ReFire HW23 W 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW23 X 0 A_ReFire HW23 X 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW23 Y 0 A_ReFire HW23 Y 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW23 Z 0 A_ReFire HW23 Z 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW24 A 0 A_ReFire HW24 A 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        HW24 B 0 A_ReFire HW24 B 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      Reload:
      ReloadCheck:
        HW22 A 0 A_JumpIfInventory("SamsaraHalfLifeLoadoutSlot3",1,"ReloadCheckDeagle")
        HW22 A 0 A_JumpIfInventory("HLPythonCounter",0,"ReadyActual")
        HW22 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        HW22 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"ReloadStart")
        HW22 A 0 A_JumpIfInventory("Shell",1,"ReloadStart")
        goto ReadyActual

      ReloadStart:
        HW25 A 0 A_GiveInventory("SamsaraHalfLifeLaserSightHidden")
        HW25 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReloadStartShephard")
        HW25 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
        HW26 ABCDEFGHIJKLMNOPQRSTUVWXY 1 A_WeaponReady(WRF_NOFIRE)
      ReloadCasings:
        HW26 Z 0 A_JumpIfInventory("HLPythonRoundsUsed",1,1)
        goto ReloadContinue
        //HW26 Z 0 A_SpawnItemEx("HLBrassShell",frandom(-2,2),frandom(-2,2),32,frandom(-10,10)/10.0,frandom(-10,10)/10.0,0)
        HW26 Z 0 A_TakeInventory("HLPythonRoundsUsed",1)
        loop

      ReloadContinue:
        HW26 Z 1 A_WeaponReady(WRF_NOFIRE)
        HW27 ABCDEFGHIJKLMNOPQ 1 A_WeaponReady(WRF_NOFIRE)
        HW27 R 0 A_PlaySound("halflife/python_reload")
        HW27 RS 1 A_WeaponReady(WRF_NOFIRE)
        HW27 T 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReloadAmmo")
      ReloadFinish:
        HW27 TUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW28 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        HW29 ABCDE 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReloadAmmo:
        HW27 T 0 A_JumpIfInventory("HLPythonCounter",0,"ReloadFinish")
        HW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        HW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        HW27 T 0 A_JumpIfInventory("Shell",1,1)
        goto ReloadFinish
        HW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        HW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        HW27 T 0 A_TakeInventory("Shell",1)
        HW27 T 0 A_GiveInventory("HLPythonCounter")
        loop

      // Adrian Shephard
      ReadyActualNonReloadableShephard:
        SW22 A 2 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActualJump

      ReadyActualReloadableShephard:
        SW22 A 2 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        goto ReadyActualJump

      ReadyActualIdle1NonReloadableShephard:
        SW22 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW30 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW31 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW32 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW33 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW34 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW35 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW36 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW37 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW38 ABCDEFGH 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReadyActualIdle1ReloadableShephard:
        SW22 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW30 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW31 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW32 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW33 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW34 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW35 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW36 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW37 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW38 ABCDEFGH 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle2NonReloadableShephard:
        SW22 A 1 A_WeaponReady(WRF_NOSECONDARY)
        SW19 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW18 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW17 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW16 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW15 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW14 ABCDEFGHIJKLMNOPQRS 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReadyActualIdle2ReloadableShephard:
        SW22 A 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW19 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW18 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW17 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW16 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW15 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
        SW14 ABCDEFGHIJKLMNOPQRS 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReadyShephard:
        SW20 ABCDEFGHIJK 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        SW22 A 0
        goto ReadyFinish

      FireDryShephard:
        SW22 A 4 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      HoldDryShephard:
        SW23 WX 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW23 YZ 2 A_WeaponReady(WRF_NOFIRE)
        SW24 AB 1 A_WeaponReady(WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      FireStartShephard:
        SW38 IJ 1 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW23 ABCDEFGHIJKLMNOPQRSTUV 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW23 W 0 A_ReFire SW23 W 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW23 X 0 A_ReFire SW23 X 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW23 Y 0 A_ReFire SW23 Y 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW23 Z 0 A_ReFire SW23 Z 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW24 A 0 A_ReFire SW24 A 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        SW24 B 0 A_ReFire SW24 B 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      ReloadStartShephard:
        SW25 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
        SW26 ABCDEFGHIJKLMNOPQRSTUVWXY 1 A_WeaponReady(WRF_NOFIRE)
      ReloadCasingsShephard:
        SW26 Z 0 A_JumpIfInventory("HLPythonRoundsUsed",1,1)
        goto ReloadContinueShephard
        //SW26 Z 0 A_SpawnItemEx("HLBrassShell",frandom(-2,2),frandom(-2,2),32,frandom(-10,10)/10.0,frandom(-10,10)/10.0,0)
        SW26 Z 0 A_TakeInventory("HLPythonRoundsUsed",1)
        loop

      ReloadContinueShephard:
        SW26 Z 1 A_WeaponReady(WRF_NOFIRE)
        SW27 ABCDEFGHIJKLMNOPQ 1 A_WeaponReady(WRF_NOFIRE)
        SW27 R 0 A_PlaySound("halflife/python_reload")
        SW27 RS 1 A_WeaponReady(WRF_NOFIRE)
        SW27 T 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReloadAmmoShephard")
      ReloadFinishShephard:
        SW27 TUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW28 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOSECONDARY)
        SW29 ABCDE 1 A_WeaponReady(WRF_NOSECONDARY)
        goto ReadyActual

      ReloadAmmoShephard:
        SW27 T 0 A_JumpIfInventory("HLPythonCounter",0,"ReloadFinishShephard")
        SW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        SW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        SW27 T 0 A_JumpIfInventory("Shell",1,1)
        goto ReloadFinishShephard
        SW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        SW27 T 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        SW27 T 0 A_TakeInventory("Shell",1)
        SW27 T 0 A_GiveInventory("HLPythonCounter")
        loop

      // Desert Eagle
      // Gordon Freeman
      ReadyActualDeagle:
        0P00 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualDeagleReloadable")
      ReadyActualDeagleNonReloadable:
        0P00 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualDeagleNonReloadableShephard")
        0P00 A 2 A_WeaponReady
        goto ReadyActualJump

      ReadyActualDeagleReloadable:
        0P00 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualDeagleReloadableShephard")
        0P00 A 2 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActualJump

      ReadyActualJumpDeagle:
        0P00 A 0 A_Jump(1,"ReadyActualIdle1Deagle","ReadyActualIdle2Deagle","ReadyActualIdle3Deagle","ReadyActualIdle4Deagle","ReadyActualIdle5Deagle")
        goto ReadyActualAmmoCheck

      ReadyActualIdle1Deagle:
        0P00 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle1DeagleReloadable")
      ReadyActualIdle1DeagleNonReloadable:
        0P00 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle1DeagleNonReloadableShephard")
        0P00 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P01 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P02 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle1DeagleReloadable:
        0P00 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle1DeagleReloadableShephard")
        0P00 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P01 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P02 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle2Deagle:
        0P03 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle2DeagleReloadable")
      ReadyActualIdle2DeagleNonReloadable:
        0P03 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle2DeagleNonReloadableShephard")
        0P03 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P04 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P05 ABCDEFGH 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle2DeagleReloadable:
        0P03 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle2DeagleReloadableShephard")
        0P03 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P04 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P05 ABCDEFGH 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle3Deagle:
        0P06 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle3DeagleReloadable")
      ReadyActualIdle3DeagleNonReloadable:
        0P06 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle3DeagleNonReloadableShephard")
        0P06 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P07 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle3DeagleReloadable:
        0P06 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle3DeagleReloadableShephard")
        0P06 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P07 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle4Deagle:
        0P08 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle4DeagleReloadable")
      ReadyActualIdle4DeagleNonReloadable:
        0P08 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle4DeagleNonReloadableShephard")
        0P08 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P09 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P10 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle4DeagleReloadable:
        0P08 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle4DeagleReloadableShephard")
        0P08 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P09 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P10 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle5Deagle:
        0P11 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReadyActualIdle5DeagleReloadable")
      ReadyActualIdle5DeagleNonReloadable:
        0P11 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle5DeagleNonReloadableShephard")
        0P11 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P12 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        0P13 ABCDEFGH 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle5DeagleReloadable:
        0P11 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyActualIdle5DeagleReloadableShephard")
        0P11 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P12 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        0P13 ABCDEFGH 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualAmmoCheckDeagle:
        0P00 A 0 A_JumpIfInventory("SamsaraReloadMode",2,1)
        goto ReadyActual
        0P00 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"ReadyActual")
        0P00 A 0 A_JumpIfInventory("HLDeagleCounter",1,"ReadyActual")
        goto ReloadCheck

      ReadyDeagle:
        0P20 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReadyDeagleShephard")
        0P20 ABCDEFG 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        0P20 H 0 ACS_NamedExecuteAlways("HalfLifeLaserSight", 0, 1)
        0P20 H 0 A_JumpIfInventory("HLDeagleLaserMemory",1,1)
        goto ReadyFinishDeagle
        0P20 H 0 A_GiveInventory("SamsaraHalfLifeDesertEagleLaserEnabler")
        goto ReadyFinishDeagle

      ReadyFinishDeagle:
        0P20 HIJKLMN 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        goto ReadyActual

      FireDeagle:
        0P14 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"FireDeagleReloadable")
      FireDeagleNonReloadable:
        0P14 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"FireWaterCheckDeagle")
        0P14 A 0 A_JumpIfInventory("Shell",1,"FireWaterCheckDeagle")
        goto FireDryDeagle

      FireDeagleReloadable:
        0P14 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"FireWaterCheckDeagle")
        0P14 A 0 A_JumpIfInventory("HLDeagleCounter",1,"FireWaterCheckDeagle")
        goto FireDryDeagle

      FireWaterCheckDeagle:
        0P14 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"FireDryDeagle")
        goto FireStartDeagle

      FireDryDeagle:
        0P00 A 0 A_PlaySound("halflife/weaponempty",CHAN_6)
        0P00 A 0 A_ClearReFire
        0P00 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"FireDryDeagleShephard")
        0P00 A 4 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      HoldDeagle:
        0P14 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"HoldDeagleReloadable")
      HoldDeagleNonReloadable:
        0P14 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"HoldWaterCheckDeagle")
        0P14 A 0 A_JumpIfInventory("Shell",1,"HoldWaterCheckDeagle")
        goto HoldDryAmmolessDeagle

      HoldDeagleReloadable:
        0P14 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"HoldWaterCheckDeagle")
        0P14 A 0 A_JumpIfInventory("HLDeagleCounter",1,"HoldWaterCheckDeagle")
        goto HoldDryAmmolessDeagle

      HoldWaterCheckDeagle:
        0P14 A 0 A_JumpIfInventory("SamsaraCurrentWaterLevel",0,"HoldDryDeagle")
        goto FireStartDeagle

      HoldDryDeagle:
        0P14 K 0 A_PlaySound("halflife/weaponempty",CHAN_6)
        0P14 K 0 A_ClearReFire
        0P14 K 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"HoldDryDeagleShephard")
        0P14 KLMN 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 OPQRS 1 A_WeaponReady(WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      HoldDryAmmolessDeagle:
        0P15 K 0 A_PlaySound("halflife/weaponempty",CHAN_6)
        0P15 K 0 A_ClearReFire
        0P15 K 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"HoldDryAmmolessDeagleShephard")
        0P15 KLMN 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 OPQRS 1 A_WeaponReady(WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      FireStartDeagle: // laser is not hidden when firing this time
        0P14 A 0 A_AlertMonsters
        0P14 A 0 A_FireCustomMissile("HLBrassShellCaser",0,false)
      FireStartLastShotCalcDeagle:
        0P14 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"FireStartLastShotCalcDeagleReloadable")
      FireStartLastShotCalcDeagleNonReloadable:
        0P14 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"FireContinueDeagle")
        0P14 A 0 A_JumpIfInventory("Shell",2,"FireContinueDeagle")
        goto FireContinueLastDeagle

      FireStartLastShotCalcDeagleReloadable:
        0P14 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"FireContinueDeagle")
        0P14 A 0 A_JumpIfInventory("HLDeagleCounter",2,"FireContinueDeagle")
        goto FireContinueLastDeagle

      FireContinueDeagle:
        0P14 A 0 A_GiveInventory("SamsaraHalfLifeDesertEagleAttackHandler")
        0P14 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"FireContinueDeagleShephard")
        0P14 AB 1 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 CDEFGHIJ 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 K 0 A_JumpIfInventory("HLDeagleLaserActivated",1,"FireFinishDeagleAccurate")
      FireFinishDeagleInaccurate:
        0P14 K 0 A_ReFire 0P14 K 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 L 0 A_ReFire 0P14 L 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 M 0 A_ReFire 0P14 M 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 N 0 A_ReFire 0P14 N 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 O 0 A_ReFire 0P14 O 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 P 0 A_ReFire 0P14 P 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 Q 0 A_ReFire 0P14 Q 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 R 0 A_ReFire 0P14 R 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P14 S 0 A_ReFire 0P14 S 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      FireFinishDeagleAccurate:
        0P14 K 0 A_ClearReFire
        0P14 KLMNOPQRS 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      FireContinueLastDeagle:
        0P15 A 0 A_GiveInventory("SamsaraHalfLifeDesertEagleAttackHandler")
        0P15 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"FireContinueLastDeagleShephard")
        0P15 AB 1 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 CDEFGHIJ 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 K 0 A_JumpIfInventory("HLDeagleLaserActivated",1,"FireFinishLastDeagleAccurate")
      FireFinishLastDeagleInaccurate:
        0P15 K 0 A_ReFire 0P15 K 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 L 0 A_ReFire 0P15 L 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 M 0 A_ReFire 0P15 M 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 N 0 A_ReFire 0P15 N 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 O 0 A_ReFire 0P15 O 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 P 0 A_ReFire 0P15 P 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 Q 0 A_ReFire 0P15 Q 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 R 0 A_ReFire 0P15 R 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        0P15 S 0 A_ReFire 0P15 S 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      FireFinishLastDeagleAccurate:
        0P15 K 0 A_ClearReFire
        0P15 KLMNOPQRS 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      AltFire:
        0P00 A 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        0P00 A 0 A_JumpIfInventory("HLDeagleLaserActivated",1,"AltFireDeactivate")
      AltFireActivate:
        0P00 A 0 A_GiveInventory("HLDeagleLaserMemory")
        0P00 A 0 A_GiveInventory("SamsaraHalfLifeDesertEagleLaserEnabler")
        goto AltFireFinish

      AltFireDeactivate:
        0P00 A 0 A_TakeInventory("HLDeagleLaserMemory")
        0P00 A 0 A_GiveInventory("SamsaraHalfLifeDesertEagleLaserDisabler")
        goto AltFireFinish

      AltFireFinish:
        0P00 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"AltFireFinishShephard")
        0P00 A 8 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      ReloadCheckDeagle:
        0P00 A 0 A_JumpIfInventory("HLDeagleCounter",0,"ReadyActual")
        0P00 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        0P00 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"ReloadStartDeagle")
        0P00 A 0 A_JumpIfInventory("Shell",1,"ReloadStartDeagle")
        goto ReadyActual

      ReloadStartDeagle:
        TNT1 A 0 A_GiveInventory("SamsaraHalfLifeLaserSightHidden")
        TNT1 A 0 A_PlaySound("HLDeagle/Reload")
        TNT1 A 0 A_JumpIfInventory("HLDeagleCounter",1,1)
        goto ReloadStartAmmolessDeagle
        0P18 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReloadStartDeagleShephard")
        0P18 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
        0P19 ABCDEFGHIJK 1 A_WeaponReady(WRF_NOFIRE)
        0P19 L 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReloadAmmoDeagle")
      ReloadFinishDeagle:
        0P19 LM 1 A_WeaponReady
        0P19 N 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        0P19 NO 1 A_WeaponReady
        goto ReadyActual

      ReloadAmmoDeagle:
        0P19 L 0 A_JumpIfInventory("HLDeagleCounter",0,"ReloadFinishDeagle")
        0P19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        0P19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        0P19 L 0 A_JumpIfInventory("Shell",1,1)
        goto ReloadFinishDeagle
        0P19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        0P19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        0P19 L 0 A_TakeInventory("Shell",1)
        0P19 L 0 A_GiveInventory("HLDeagleCounter")
        loop

      ReloadStartAmmolessDeagle:
        0P16 A 0 A_JumpIfInventory("HalfLifeOpposingForce",1,"ReloadStartAmmolessDeagleShephard")
        0P16 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
        0P17 ABCDEFGHIJK 1 A_WeaponReady(WRF_NOFIRE)
        0P17 L 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReloadAmmoAmmolessDeagle")
      ReloadFinishAmmolessDeagle:
        0P17 LM 1 A_WeaponReady
        0P17 N 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        0P17 NO 1 A_WeaponReady
        goto ReadyActual

      ReloadAmmoAmmolessDeagle:
        0P17 L 0 A_JumpIfInventory("HLDeagleCounter",0,"ReloadFinishAmmolessDeagle")
        0P17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        0P17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        0P17 L 0 A_JumpIfInventory("Shell",1,1)
        goto ReloadFinishAmmolessDeagle
        0P17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        0P17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        0P17 L 0 A_TakeInventory("Shell",1)
        0P17 L 0 A_GiveInventory("HLDeagleCounter")
        loop

      // Adrian Shephard
      ReadyActualDeagleNonReloadableShephard:
        OP00 A 2 A_WeaponReady
        goto ReadyActualJump

      ReadyActualDeagleReloadableShephard:
        OP00 A 2 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActualJump

      ReadyActualIdle1DeagleNonReloadableShephard:
        OP00 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP01 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP02 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle1DeagleReloadableShephard:
        OP00 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP01 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP02 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle2DeagleNonReloadableShephard:
        OP03 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP04 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP05 ABCDEFGH 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle2DeagleReloadableShephard:
        OP03 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP04 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP05 ABCDEFGH 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle3DeagleNonReloadableShephard:
        OP06 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP07 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle3DeagleReloadableShephard:
        OP06 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP07 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle4DeagleNonReloadableShephard:
        OP08 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP09 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP10 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle4DeagleReloadableShephard:
        OP08 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP09 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP10 ABCDEFGHIJKLMNOPQRSTUVW 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyActualIdle5DeagleNonReloadableShephard:
        OP11 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP12 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady
        OP13 ABCDEFGH 1 A_WeaponReady
        goto ReadyActual

      ReadyActualIdle5DeagleReloadableShephard:
        OP11 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP12 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_ALLOWRELOAD)
        OP13 ABCDEFGH 1 A_WeaponReady(WRF_ALLOWRELOAD)
        goto ReadyActual

      ReadyDeagleShephard:
        OP20 ABCDEFG 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        OP20 H 0 ACS_NamedExecuteAlways("HalfLifeLaserSight", 0, 1)
        OP20 H 0 A_JumpIfInventory("HLDeagleLaserMemory",1,1)
        goto ReadyFinishDeagleShephard
        OP20 H 0 A_GiveInventory("SamsaraHalfLifeDesertEagleLaserEnabler")
        goto ReadyFinishDeagleShephard

      ReadyFinishDeagleShephard:
        OP20 HIJKLMN 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
        goto ReadyActual

      FireDryDeagleShephard:
        OP00 A 4 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      HoldDryDeagleShephard:
        OP14 KLMN 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 OPQRS 1 A_WeaponReady(WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      HoldDryAmmolessDeagleShephard:
        OP15 KLMN 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 OPQRS 1 A_WeaponReady(WRF_NOFIRE)
        goto ReadyActualAmmoCheck

      FireContinueDeagleShephard:
        OP14 AB 1 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 CDEFGHIJ 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 K 0 A_JumpIfInventory("HLDeagleLaserActivated",1,"FireFinishDeagleAccurateShephard")
      FireFinishDeagleInaccurateShephard:
        OP14 K 0 A_ReFire OP14 K 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 L 0 A_ReFire OP14 L 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 M 0 A_ReFire OP14 M 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 N 0 A_ReFire OP14 N 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 O 0 A_ReFire OP14 O 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 P 0 A_ReFire OP14 P 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 Q 0 A_ReFire OP14 Q 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 R 0 A_ReFire OP14 R 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP14 S 0 A_ReFire OP14 S 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      FireFinishDeagleAccurateShephard:
        OP14 K 0 A_ClearReFire
        OP14 KLMNOPQRS 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      FireContinueLastDeagleShephard:
        OP15 AB 1 Bright A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 CDEFGHIJ 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 K 0 A_JumpIfInventory("HLDeagleLaserActivated",1,"FireFinishLastDeagleAccurateShephard")
      FireFinishLastDeagleInaccurateShephard:
        OP15 K 0 A_ReFire OP15 K 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 L 0 A_ReFire OP15 L 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 M 0 A_ReFire OP15 M 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 N 0 A_ReFire OP15 N 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 O 0 A_ReFire OP15 O 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 P 0 A_ReFire OP15 P 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 Q 0 A_ReFire OP15 Q 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 R 0 A_ReFire OP15 R 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        OP15 S 0 A_ReFire OP15 S 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      FireFinishLastDeagleAccurateShephard:
        OP15 K 0 A_ClearReFire
        OP15 KLMNOPQRS 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      AltFireFinishShephard:
        OP00 A 8 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto ReadyActual

      ReloadStartDeagleShephard:
        OP18 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
        OP19 ABCDEFGHIJK 1 A_WeaponReady(WRF_NOFIRE)
        OP19 L 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReloadAmmoDeagleShephard")
      ReloadFinishDeagleShephard:
        OP19 LM 1 A_WeaponReady
        OP19 N 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        OP19 NO 1 A_WeaponReady
        goto ReadyActual

      ReloadAmmoDeagleShephard:
        OP19 L 0 A_JumpIfInventory("HLDeagleCounter",0,"ReloadFinishDeagleShephard")
        OP19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        OP19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        OP19 L 0 A_JumpIfInventory("Shell",1,1)
        goto ReloadFinishDeagleShephard
        OP19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        OP19 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        OP19 L 0 A_TakeInventory("Shell",1)
        OP19 L 0 A_GiveInventory("HLDeagleCounter")
        loop

      ReloadStartAmmolessDeagleShephard:
        OP16 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
        OP17 ABCDEFGHIJK 1 A_WeaponReady(WRF_NOFIRE)
        OP17 L 0 A_JumpIfInventory("SamsaraReloadMode",2,"ReloadAmmoAmmolessDeagleShephard")
      ReloadFinishAmmolessDeagleShephard:
        OP17 LM 1 A_WeaponReady
        OP17 N 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        OP17 NO 1 A_WeaponReady
        goto ReadyActual

      ReloadAmmoAmmolessDeagleShephard:
        OP17 L 0 A_JumpIfInventory("HLDeagleCounter",0,"ReloadFinishAmmolessDeagleShephard")
        OP17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        OP17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        OP17 L 0 A_JumpIfInventory("Shell",1,1)
        goto ReloadFinishAmmolessDeagleShephard
        OP17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,2)
        OP17 L 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,2)
        OP17 L 0 A_TakeInventory("Shell",1)
        OP17 L 0 A_GiveInventory("HLDeagleCounter")
        loop
    }
}

// .357 Python

actor SamsaraHalfLife357MagnumAttackHandler : Trigger
{
    States
    {
      // Ammo checking/taking stuff
      Pickup:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"PickupReloadable")
      PickupNonReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"PickupAttack")
        TNT1 A 0 A_JumpIfInventory("Shell",1,1)
        stop
        TNT1 A 0 A_TakeInventory("Shell",1)
        goto PickupAttack

      PickupReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"PickupAttack")
        TNT1 A 0 A_JumpIfInventory("HLPythonCounter",1,1)
        stop
        TNT1 A 0 A_TakeInventory("HLPythonCounter",1)
        TNT1 A 0 A_GiveInventory("HLPythonRoundsUsed")
        goto PickupAttack

      // Attack stuff
      PickupAttack:
        TNT1 A 0 A_PlaySound("halflife/python_shoot",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackCoop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackCoop")
      PickupAttackDM:
        TNT1 A 0 A_FireCustomMissile("HLPythonBullet",frandom(-5.0,5.0)/10.0,false,5,3,0,frandom(-5.0,5.0)/10.0)
        goto PickupFinish

      PickupAttackCoop:
        TNT1 A 0 A_FireCustomMissile("HLPythonBulletCoop",frandom(-5.0,5.0)/10.0,false,5,3,0,frandom(-5.0,5.0)/10.0)
        goto PickupFinish

      // Finishing stuff
      PickupFinish:
        TNT1 A 0 ACS_NamedExecuteAlways("HalfLifeRecoil", 0, 2)
        stop
    }
}

actor HLPythonCounter : Ammo
{
    Inventory.MaxAmount 6
    Tag ".357 Python Cylinder"
    +IGNORESKILL
}

actor HLPythonRoundsUsed : Counter {}

actor HLPythonBullet : HLBullet
{
    +THRUGHOST
    Damage (0)
    States
    {
        Crash:
        Death:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",100),8,!XF_HURTSOURCE,0,8)
            Goto Super::Death
        XDeath:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",100),8,!XF_HURTSOURCE,0,8)
            Goto Super::XDeath
    }
}

actor HLPythonBulletCoop : HLBulletCoop
{
    +THRUGHOST
    Damage (0)
    States
    {
        Crash:
        Death:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",100),8,!XF_HURTSOURCE,0,8)
            Goto Super::Death
        XDeath:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",100),8,!XF_HURTSOURCE,0,8)
            Goto Super::XDeath
    }
}

actor HLPythonMuzzleFlash : HL9MMMuzzleFlash
{
    States
    {
        Spawn:
            TNT1 A 0
            HW29 I 1 Bright A_Warp(AAPTR_Master,cos(pitch)*30,7,35-(sin(pitch)*35),0,WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE)
            HW29 I 1 A_Warp(AAPTR_Master,cos(pitch)*30,7,35-(sin(pitch)*35),0,WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE)
            Stop
    }
}

// Desert Eagle

actor SamsaraHalfLifeDesertEagleAttackHandler : Trigger
{
    States
    {
      // Ammo checking/taking stuff
      Pickup:
        TNT1 A 0 A_JumpIfInventory("SamsaraReloadMode",2,"PickupReloadable")
      PickupNonReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",1,"PickupAttack")
        TNT1 A 0 A_JumpIfInventory("Shell",1,1)
        stop
        TNT1 A 0 A_TakeInventory("Shell",1)
        goto PickupAttack

      PickupReloadable:
        TNT1 A 0 A_JumpIfInventory("SamsaraHasInfiniteAmmo",0,"PickupAttack")
        TNT1 A 0 A_JumpIfInventory("HLDeagleCounter",1,1)
        stop
        TNT1 A 0 A_TakeInventory("HLDeagleCounter",1)
        goto PickupAttack

      // Attack stuff
      PickupAttack:
        TNT1 A 0 A_PlaySound("Otis/Shoot",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("HLDeagleLaserActivated",1,"PickupAttackAccurate")
      // Inaccurate (laser off)
      PickupAttackInaccurate:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackInaccurateCoop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackInaccurateCoop")
      PickupAttackInaccurateDM:
        TNT1 A 0 A_FireCustomMissile("HLDeagleBullet",frandom(-5.0,5.0)/1.0,false,5,3,0,frandom(-5.0,5.0)/2.0)
        goto PickupFinish

      PickupAttackInaccurateCoop:
        TNT1 A 0 A_FireCustomMissile("HLDeagleBulletCoop",frandom(-5.0,5.0)/1.0,false,5,3,0,frandom(-5.0,5.0)/2.0)
        goto PickupFinish

      // Accurate (laser on)
      PickupAttackAccurate:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupAttackAccurateCoop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupAttackAccurateCoop")
      PickupAttackAccurateDM:
        TNT1 A 0 A_FireCustomMissile("HLDeagleBulletLaser",frandom(-5.0,5.0)/10.0,false,5,3,0,frandom(-5.0,5.0)/10.0)
        goto PickupFinish

      PickupAttackAccurateCoop:
        TNT1 A 0 A_FireCustomMissile("HLDeagleBulletLaserCoop",frandom(-5.0,5.0)/10.0,false,5,3,0,frandom(-5.0,5.0)/10.0)
        goto PickupFinish

      // Finishing stuff
      PickupFinish:
        TNT1 A 0 ACS_NamedExecuteAlways("HalfLifeRecoil", 0, 2)
        stop
    }
}

actor SamsaraHalfLifeDesertEagleLaserEnabler : Trigger
{
    States
    {
      Pickup:
        TNT1 A 0 A_TakeInventory("SamsaraHalfLifeLaserSightHidden")
        TNT1 A 0 A_GiveInventory("HLDeagleLaserActivated")
        TNT1 A 0 A_PlaySound("HLDeagle/SightOn",CHAN_6)
        stop
    }
}

actor SamsaraHalfLifeDesertEagleLaserDisabler : Trigger
{
    States
    {
      Pickup:
        TNT1 A 0 A_TakeInventory("HLDeagleLaserActivated")
        TNT1 A 0 A_PlaySound("HLDeagle/SightOff",CHAN_6)
        stop
    }
}

actor HLDeagleCounter : Ammo
{
    Inventory.MaxAmount 7
    Tag "Desert Eagle Magazine"
    +IGNORESKILL
}

actor HLDeagleBullet : HLBullet
{
    +THRUGHOST
    Damage (0)
    States
    {
        Crash:
        Death:
            TNT1 A 0 A_Explode(88,8,!XF_HURTSOURCE,0,8)
            Goto Super::Death
        XDeath:
            TNT1 A 0 A_Explode(88,8,!XF_HURTSOURCE,0,8)
            Goto Super::XDeath
    }
}

actor HLDeagleBulletCoop : HLBulletCoop
{
    +THRUGHOST
    Damage (0)
    States
    {
        Crash:
        Death:
            TNT1 A 0 A_Explode(88,8,!XF_HURTSOURCE,0,8)
            Goto Super::Death
        XDeath:
            TNT1 A 0 A_Explode(88,8,!XF_HURTSOURCE,0,8)
            Goto Super::XDeath
    }
}

actor HLDeagleBulletLaser : HLBullet
{
    +THRUGHOST
    Damage (0)
    States
    {
        Crash:
        Death:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",88),8,!XF_HURTSOURCE,0,8)
            Goto Super::Death
        XDeath:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",88),8,!XF_HURTSOURCE,0,8)
            Goto Super::XDeath
    }
}

actor HLDeagleBulletLaserCoop : HLBulletCoop
{
    +THRUGHOST
    Damage (0)
    States
    {
        Crash:
        Death:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",88),8,!XF_HURTSOURCE,0,8)
            Goto Super::Death
        XDeath:
            TNT1 A 0 A_Explode(CallACS("HalfLife_BulletDamage",88),8,!XF_HURTSOURCE,0,8)
            Goto Super::XDeath
    }
}

actor HLDeagleLaserDot
{
     RenderStyle Add
     +NOGRAVITY
     +DONTBLAST
     +DONTSPLASH
     +PUFFONACTORS
     +BLOODLESSIMPACT
     +ALWAYSPUFF
     +CLIENTSIDEONLY
     +FIXMAPTHINGPOS
     +FORCEXYBILLBOARD
     +NOTIMEFREEZE
     +NOTRIGGER
     Scale 0.5
     Radius 2
     Height 2
     States
     {
      Spawn:
        TNT1 A 0
        HW59 H 1
        stop
      }
}

actor HLDeagleLaserDotCoop : HLDeagleLaserDot { +MTHRUSPECIES }
