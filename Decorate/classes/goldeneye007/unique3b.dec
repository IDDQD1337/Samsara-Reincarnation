actor Goldeneye_WatchLaser : SamsaraGoldenEyeWeapon
{
    Weapon.SlotNumber 0
    Weapon.SelectionOrder 6
    Obituary "%o was killed by %k's watch laser."
    Tag "Watch (Laser)"
    States
    {
      Spawn:
        PIST A -1
        stop

      // Weapon
      Ready:
        TNT1 A 0 A_JumpIfInventory("BondWatchQueue",1,"WatchRaise")
        TNT1 A 0 A_JumpIfInventory("BondWatchToken",1,"WatchReady")
      ReadyStart:
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",0,"ReadyRight5")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",9,"ReadyRight4")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",8,"ReadyRight3")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",7,"ReadyRight2")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",6,"ReadyRight1")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",5,"ReadyCenter")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",4,"ReadyLeft1")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",3,"ReadyLeft2")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",2,"ReadyLeft3")
        TNT1 A 0 A_JumpIfInventory("BondGunAngle",1,"ReadyLeft4")
        goto ReadyCenter

      ReadyRight5:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE01 E 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE01 E 1 A_WeaponReady
        goto Ready

      ReadyRight4:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE01 D 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE01 D 1 A_WeaponReady
        goto Ready

      ReadyRight3:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE01 C 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE01 C 1 A_WeaponReady
        goto Ready

      ReadyRight2:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE01 B 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE01 B 1 A_WeaponReady
        goto Ready

      ReadyRight1:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE01 A 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE01 A 1 A_WeaponReady
        goto Ready

      ReadyCenter:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE00 A 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE00 A 1 A_WeaponReady
        goto Ready

      ReadyLeft1:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE00 B 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE00 B 1 A_WeaponReady
        goto Ready

      ReadyLeft2:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE00 C 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE00 C 1 A_WeaponReady
        goto Ready

      ReadyLeft3:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE00 D 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE00 D 1 A_WeaponReady
        goto Ready

      ReadyLeft4:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,3)
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchMagnet",1,2)
        GE00 E 1 A_WeaponReady(WRF_NOSECONDARY)
        goto Ready
        GE00 E 1 A_WeaponReady
        goto Ready

      Deselect:
        GE00 A 0 A_TakeInventory("BondFireDelay")
        GE00 A 0 A_TakeInventory("BondAlternateFire")
        GE00 A 0 A_TakeInventory("BondDualWieldToken")
        GE00 A 0 A_TakeInventory("BondAltToggle")
        GE00 A 0 A_TakeInventory("BondZoomToken")
        GE00 A 0 A_TakeInventory("BondZoomAmountModifyActive")
        GE00 A 0 A_TakeInventory("BondDualWieldSpamProtector")
        GE00 A 0 A_TakeInventory("BondDryFireSpamProtector1")
        GE00 A 0 A_TakeInventory("BondDryFireSpamProtector2")
        GE00 A 0 A_TakeInventory("BondAltActivationToken")
        GE00 A 1 A_Lower
        loop

      Select:
        GE00 A 0 A_GiveInventory("Goldeneye_UnarmedToken")
        GE00 A 0 A_TakeInventory("Goldeneye_PP7Token")
        GE00 A 0 A_TakeInventory("Goldeneye_KnifeToken")
        GE00 A 0 A_TakeInventory("Goldeneye_KF7Token")
        GE00 A 0 A_TakeInventory("Goldeneye_AutoShotgunToken")
        GE00 A 0 A_TakeInventory("Goldeneye_AR33Token")
        GE00 A 0 A_TakeInventory("Goldeneye_RocketLauncherToken")
        GE00 A 0 A_TakeInventory("Goldeneye_RCP90Token")
        GE00 A 0 A_TakeInventory("Goldeneye_LaserToken")
        GE00 A 0 A_TakeInventory("Goldeneye_GoldenGunToken")
        GE00 A 0 A_TakeInventory("Goldeneye_SniperToken")
        GE00 A 0 A_TakeInventory("Goldeneye_D5KToken")
        GE00 A 1 A_Raise
        loop

      Fire:
        GE02 A 0 A_GiveInventory("BondFiringToken")
        GE02 A 0 A_TakeInventory("BondGunAngleFiringSingle")
        GE02 A 0 A_AlertMonsters(128)
        GE02 A 0 A_JumpIfInventory("BondGunAngle",0,"FireRight5")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",9,"FireRight4")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",8,"FireRight3")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",7,"FireRight2")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",6,"FireRight1")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",5,"FireCenter")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",4,"FireLeft1")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",3,"FireLeft2")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",2,"FireLeft3")
        GE02 A 0 A_JumpIfInventory("BondGunAngle",1,"FireLeft4")
        goto FireCenter

      FireRight5:
        GE07 B 0 A_GiveInventory("BondGunAngleFiringSingle",10)
        GE07 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE07 D 0 A_GunFlash("WatchBeamRight5",GFF_NOEXTCHANGE)
        GE07 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE07 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE07 E 0 A_TakeInventory("BondFiringToken")
        GE07 E 0 A_ReFire(1)
        goto FireRight5Continue
        GE07 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireRight5Continue:
        GE07 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireRight4:
        GE08 B 0 A_GiveInventory("BondGunAngleFiringSingle",9)
        GE08 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE08 D 0 A_GunFlash("WatchBeamRight4",GFF_NOEXTCHANGE)
        GE08 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE08 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE08 E 0 A_TakeInventory("BondFiringToken")
        GE08 E 0 A_ReFire(1)
        goto FireRight4Continue
        GE08 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireRight4Continue:
        GE08 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireRight3:
        GE09 B 0 A_GiveInventory("BondGunAngleFiringSingle",8)
        GE09 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE09 D 0 A_GunFlash("WatchBeamRight3",GFF_NOEXTCHANGE)
        GE09 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE09 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE09 E 0 A_TakeInventory("BondFiringToken")
        GE09 E 0 A_ReFire(1)
        goto FireRight3Continue
        GE09 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireRight3Continue:
        GE09 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireRight2:
        GE10 B 0 A_GiveInventory("BondGunAngleFiringSingle",7)
        GE10 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE10 D 0 A_GunFlash("WatchBeamRight2",GFF_NOEXTCHANGE)
        GE10 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE10 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE10 E 0 A_TakeInventory("BondFiringToken")
        GE10 E 0 A_ReFire(1)
        goto FireRight2Continue
        GE10 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireRight2Continue:
        GE10 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireRight1:
        GE11 B 0 A_GiveInventory("BondGunAngleFiringSingle",6)
        GE11 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE11 D 0 A_GunFlash("WatchBeamRight1",GFF_NOEXTCHANGE)
        GE11 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE11 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE11 E 0 A_TakeInventory("BondFiringToken")
        GE11 E 0 A_ReFire(1)
        goto FireRight1Continue
        GE11 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireRight1Continue:
        GE11 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireCenter:
        GE02 B 0 A_GiveInventory("BondGunAngleFiringSingle",5)
        GE02 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE02 D 0 A_GunFlash("WatchBeamCenter",GFF_NOEXTCHANGE)
        GE02 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE02 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE02 E 0 A_TakeInventory("BondFiringToken")
        GE02 E 0 A_ReFire(1)
        goto FireCenterContinue
        GE02 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireCenterContinue:
        GE02 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLeft1:
        GE06 B 0 A_GiveInventory("BondGunAngleFiringSingle",4)
        GE06 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE06 D 0 A_GunFlash("WatchBeamLeft1",GFF_NOEXTCHANGE)
        GE06 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE06 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE06 E 0 A_TakeInventory("BondFiringToken")
        GE06 E 0 A_ReFire(1)
        goto FireLeft1Continue
        GE06 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLeft1Continue:
        GE06 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLeft2:
        GE05 B 0 A_GiveInventory("BondGunAngleFiringSingle",3)
        GE05 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE05 D 0 A_GunFlash("WatchBeamLeft2",GFF_NOEXTCHANGE)
        GE05 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE05 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE05 E 0 A_TakeInventory("BondFiringToken")
        GE05 E 0 A_ReFire(1)
        goto FireLeft2Continue
        GE05 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLeft2Continue:
        GE05 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLeft3:
        GE04 B 0 A_GiveInventory("BondGunAngleFiringSingle",2)
        GE04 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE04 D 0 A_GunFlash("WatchBeamLeft3",GFF_NOEXTCHANGE)
        GE04 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE04 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE04 E 0 A_TakeInventory("BondFiringToken")
        GE04 E 0 A_ReFire(1)
        goto FireLeft3Continue
        GE04 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLeft3Continue:
        GE04 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLeft4:
        GE03 B 0 A_GiveInventory("BondGunAngleFiringSingle")
        GE03 BC 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE03 D 0 A_GunFlash("WatchBeamLeft4",GFF_NOEXTCHANGE)
        GE03 D 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE03 DE 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE03 E 0 A_TakeInventory("BondFiringToken")
        GE03 E 0 A_ReFire(1)
        goto FireLeft4Continue
        GE03 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLeft4Continue:
        GE03 EFGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      WatchBeamRight5:
        GE19 AAAAA 1 Bright
        stop

      WatchBeamRight4:
        GE20 AAAAA 1 Bright
        stop

      WatchBeamRight3:
        GE21 AAAAA 1 Bright
        stop

      WatchBeamRight2:
        GE22 AAAAA 1 Bright
        stop

      WatchBeamRight1:
        GE23 AAAAA 1 Bright
        stop

      WatchBeamCenter:
        GE14 AAAAA 1 Bright
        stop

      WatchBeamLeft1:
        GE18 AAAAA 1 Bright
        stop

      WatchBeamLeft2:
        GE17 AAAAA 1 Bright
        stop

      WatchBeamLeft3:
        GE16 AAAAA 1 Bright
        stop

      WatchBeamLeft4:
        GE15 AAAAA 1 Bright
        stop

      FireLoop:
        GE02 E 0 A_GiveInventory("BondFiringToken")
        GE02 E 0 A_TakeInventory("BondGunAngleFiringSingle")
        GE02 E 0 A_AlertMonsters(128)
        GE02 E 0 A_JumpIfInventory("BondGunAngle",0,"FireLoopRight5")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",9,"FireLoopRight4")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",8,"FireLoopRight3")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",7,"FireLoopRight2")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",6,"FireLoopRight1")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",5,"FireLoopCenter")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",4,"FireLoopLeft1")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",3,"FireLoopLeft2")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",2,"FireLoopLeft3")
        GE02 E 0 A_JumpIfInventory("BondGunAngle",1,"FireLoopLeft4")
        goto FireLoopCenter

      FireLoopRight5:
        GE07 E 0 A_GiveInventory("BondGunAngleFiringSingle",10)
        GE07 E 0 A_GunFlash("WatchBeamLoopStartRight5",GFF_NOEXTCHANGE)
        GE07 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE07 E 0 A_GunFlash("WatchBeamLoopRight5",GFF_NOEXTCHANGE)
        GE07 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE07 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE07 E 0 A_TakeInventory("BondFiringToken")
        GE07 E 0 A_ReFire(1)
        goto FireLoopRight5Continue
        GE07 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopRight5Continue:
        GE07 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE07 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopRight4:
        GE08 E 0 A_GiveInventory("BondGunAngleFiringSingle",9)
        GE08 E 0 A_GunFlash("WatchBeamLoopStartRight4",GFF_NOEXTCHANGE)
        GE08 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE08 E 0 A_GunFlash("WatchBeamLoopRight4",GFF_NOEXTCHANGE)
        GE08 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE08 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE08 E 0 A_TakeInventory("BondFiringToken")
        GE08 E 0 A_ReFire(1)
        goto FireLoopRight4Continue
        GE08 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopRight4Continue:
        GE08 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE08 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopRight3:
        GE09 E 0 A_GiveInventory("BondGunAngleFiringSingle",8)
        GE09 E 0 A_GunFlash("WatchBeamLoopStartRight3",GFF_NOEXTCHANGE)
        GE09 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE09 E 0 A_GunFlash("WatchBeamLoopRight3",GFF_NOEXTCHANGE)
        GE09 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE09 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE09 E 0 A_TakeInventory("BondFiringToken")
        GE09 E 0 A_ReFire(1)
        goto FireLoopRight3Continue
        GE09 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopRight3Continue:
        GE09 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE09 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopRight2:
        GE10 E 0 A_GiveInventory("BondGunAngleFiringSingle",7)
        GE10 E 0 A_GunFlash("WatchBeamLoopStartRight2",GFF_NOEXTCHANGE)
        GE10 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE10 E 0 A_GunFlash("WatchBeamLoopRight2",GFF_NOEXTCHANGE)
        GE10 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE10 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE10 E 0 A_TakeInventory("BondFiringToken")
        GE10 E 0 A_ReFire(1)
        goto FireLoopRight2Continue
        GE10 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopRight2Continue:
        GE10 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE10 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopRight1:
        GE11 E 0 A_GiveInventory("BondGunAngleFiringSingle",6)
        GE11 E 0 A_GunFlash("WatchBeamLoopStartRight1",GFF_NOEXTCHANGE)
        GE11 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE11 E 0 A_GunFlash("WatchBeamLoopRight1",GFF_NOEXTCHANGE)
        GE11 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE11 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE11 E 0 A_TakeInventory("BondFiringToken")
        GE11 E 0 A_ReFire(1)
        goto FireLoopRight1Continue
        GE11 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopRight1Continue:
        GE11 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE11 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopCenter:
        GE02 E 0 A_GiveInventory("BondGunAngleFiringSingle",5)
        GE02 E 0 A_GunFlash("WatchBeamLoopStartCenter",GFF_NOEXTCHANGE)
        GE02 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE02 E 0 A_GunFlash("WatchBeamLoopCenter",GFF_NOEXTCHANGE)
        GE02 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE02 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE02 E 0 A_TakeInventory("BondFiringToken")
        GE02 E 0 A_ReFire(1)
        goto FireLoopCenterContinue
        GE02 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopCenterContinue:
        GE02 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE02 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopLeft1:
        GE06 E 0 A_GiveInventory("BondGunAngleFiringSingle",4)
        GE06 E 0 A_GunFlash("WatchBeamLoopStartLeft1",GFF_NOEXTCHANGE)
        GE06 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE06 E 0 A_GunFlash("WatchBeamLoopLeft1",GFF_NOEXTCHANGE)
        GE06 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE06 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE06 E 0 A_TakeInventory("BondFiringToken")
        GE06 E 0 A_ReFire(1)
        goto FireLoopLeft1Continue
        GE06 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopLeft1Continue:
        GE06 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE06 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopLeft2:
        GE05 E 0 A_GiveInventory("BondGunAngleFiringSingle",3)
        GE05 E 0 A_GunFlash("WatchBeamLoopStartLeft2",GFF_NOEXTCHANGE)
        GE05 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE05 E 0 A_GunFlash("WatchBeamLoopLeft2",GFF_NOEXTCHANGE)
        GE05 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE05 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE05 E 0 A_TakeInventory("BondFiringToken")
        GE05 E 0 A_ReFire(1)
        goto FireLoopLeft2Continue
        GE05 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopLeft2Continue:
        GE05 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE05 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopLeft3:
        GE04 E 0 A_GiveInventory("BondGunAngleFiringSingle",2)
        GE04 E 0 A_GunFlash("WatchBeamLoopStartLeft3",GFF_NOEXTCHANGE)
        GE04 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE04 E 0 A_GunFlash("WatchBeamLoopLeft3",GFF_NOEXTCHANGE)
        GE04 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE04 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE04 E 0 A_TakeInventory("BondFiringToken")
        GE04 E 0 A_ReFire(1)
        goto FireLoopLeft3Continue
        GE04 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopLeft3Continue:
        GE04 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE04 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      FireLoopLeft4:
        GE03 E 0 A_GiveInventory("BondGunAngleFiringSingle")
        GE03 E 0 A_GunFlash("WatchBeamLoopStartLeft4",GFF_NOEXTCHANGE)
        GE03 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE03 E 0 A_GunFlash("WatchBeamLoopLeft4",GFF_NOEXTCHANGE)
        GE03 E 0 A_GiveInventory("SamsaraGoldenEyeWatchLaserAttackHandler")
        GE03 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE03 E 0 A_TakeInventory("BondFiringToken")
        GE03 E 0 A_ReFire(1)
        goto FireLoopLeft4Continue
        GE03 E 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireLoop

      FireLoopLeft4Continue:
        GE03 E 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        GE03 FGHIJK 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)
        goto FireFinish

      WatchBeamLoopStartRight5:
        GE19 A 2 Bright
        stop

      WatchBeamLoopStartRight4:
        GE20 A 2 Bright
        stop

      WatchBeamLoopStartRight3:
        GE21 A 2 Bright
        stop

      WatchBeamLoopStartRight2:
        GE22 A 2 Bright
        stop

      WatchBeamLoopStartRight1:
        GE23 A 2 Bright
        stop

      WatchBeamLoopStartCenter:
        GE14 A 2 Bright
        stop

      WatchBeamLoopStartLeft1:
        GE18 A 2 Bright
        stop

      WatchBeamLoopStartLeft2:
        GE17 A 2 Bright
        stop

      WatchBeamLoopStartLeft3:
        GE16 A 2 Bright
        stop

      WatchBeamLoopStartLeft4:
        GE15 A 2 Bright
        stop

      WatchBeamLoopRight5:
        GE19 AAAA 1 Bright
        stop

      WatchBeamLoopRight4:
        GE20 AAAA 1 Bright
        stop

      WatchBeamLoopRight3:
        GE21 AAAA 1 Bright
        stop

      WatchBeamLoopRight2:
        GE22 AAAA 1 Bright
        stop

      WatchBeamLoopRight1:
        GE23 AAAA 1 Bright
        stop

      WatchBeamLoopCenter:
        GE14 AAAA 1 Bright
        stop

      WatchBeamLoopLeft1:
        GE18 AAAA 1 Bright
        stop

      WatchBeamLoopLeft2:
        GE17 AAAA 1 Bright
        stop

      WatchBeamLoopLeft3:
        GE16 AAAA 1 Bright
        stop

      WatchBeamLoopLeft4:
        GE15 AAAA 1 Bright
        stop

      FireFinish:
        TNT1 A 0 A_TakeInventory("BondFiringToken")
        goto Ready

      AltFire:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_WatchDetonator",1,2)
        TNT1 A 0 A_SelectWeapon("Goldeneye_WatchMagnet")
        goto Deselect
        TNT1 A 0 A_SelectWeapon("Goldeneye_WatchDetonator")
        goto Deselect

      // Watch
      WatchLower:
        GE13 T 0 A_TakeInventory("BondWatchActivate")
        GE13 T 0 A_GiveInventory("BondWatchUIDeinit")
      WatchLowerStart:
        GE13 T 0 ACS_NamedExecuteAlways("BondWatchLookUpAndDown")
        GE13 T 12 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE|WRF_DISABLESWITCH)
        GE13 SRQPONMLKJIHGFEDCBA 2 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE|WRF_DISABLESWITCH)
        GE27 IHGFEDCBA 1 A_WeaponReady(WRF_NOFIRE|WRF_DISABLESWITCH)
        goto WatchLowerFinish

      WatchRaise:
        GE27 A 0 A_ZoomFactor(1)
        GE27 A 0 A_TakeInventory("BondAltToggle")
        GE27 A 0 A_TakeInventory("BondZoomToken")
        GE27 A 0 A_TakeInventory("BondZoomAmountModifyActive")
        GE27 A 0 A_JumpIfInventory("BondWatchToken",1,"WatchLower")
        GE27 A 0 A_GiveInventory("BondWatchActivate")
        GE27 ABCDEFGHI 1 A_WeaponReady(WRF_NOFIRE|WRF_DISABLESWITCH)
        goto WatchRaiseStart
    }
}

// Attack handler

actor SamsaraGoldenEyeWatchLaserAttackHandler : Trigger
{
    States
    {
      // Attack stuff
      Pickup:
        TNT1 A 0 A_PlaySound("Goldeneye/WatchLaser",CHAN_WEAPON)
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",0,"PickupRight5")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",9,"PickupRight4")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",8,"PickupRight3")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",7,"PickupRight2")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",6,"PickupRight1")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",5,"PickupCenter")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",4,"PickupLeft1")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",3,"PickupLeft2")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",2,"PickupLeft3")
        TNT1 A 0 A_JumpIfInventory("BondGunAngleFiringSingle",1,"PickupLeft4")
        goto PickupCenter

      PickupRight5:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupRight5Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupRight5Coop")
      PickupRight5DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",-10,false,0,16)
        stop

      PickupRight5Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",-10,false,0,16)
        stop

      PickupRight4:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupRight4Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupRight4Coop")
      PickupRight4DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",-8,false,0,16)
        stop

      PickupRight4Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",-8,false,0,16)
        stop

      PickupRight3:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupRight3Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupRight3Coop")
      PickupRight3DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",-6,false,0,16)
        stop

      PickupRight3Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",-6,false,0,16)
        stop

      PickupRight2:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupRight2Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupRight2Coop")
      PickupRight2DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",-4,false,0,16)
        stop

      PickupRight2Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",-4,false,0,16)
        stop

      PickupRight1:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupRight1Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupRight1Coop")
      PickupRight1DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",-2,false,0,16)
        stop

      PickupRight1Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",-2,false,0,16)
        stop

      PickupCenter:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupCenterCoop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupCenterCoop")
      PickupCenterDM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",0,false,0,16)
        stop

      PickupCenterCoop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",0,false,0,16)
        stop

      PickupLeft1:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupLeft1Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupLeft1Coop")
      PickupLeft1DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",3,false,0,16)
        stop

      PickupLeft1Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",3,false,0,16)
        stop

      PickupLeft2:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupLeft2Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupLeft2Coop")
      PickupLeft2DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",7,false,0,16)
        stop

      PickupLeft2Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",7,false,0,16)
        stop

      PickupLeft3:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupLeft3Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupLeft3Coop")
      PickupLeft3DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",11,false,0,16)
        stop

      PickupLeft3Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",11,false,0,16)
        stop

      PickupLeft4:
        TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"PickupLeft4Coop")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"PickupLeft4Coop")
      PickupLeft4DM:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRay",15,false,0,16)
        stop

      PickupLeft4Coop:
        TNT1 A 0 A_FireCustomMissile("Goldeneye_InvisibleRayCoop",15,false,0,16)
        stop
    }
}

actor Goldeneye_LaserRay : Goldeneye_BulletTracer
{
    Speed 0
    Damage (20)
    RenderStyle "Translucent"
    States
    {
      Death:
        TNT1 A 1
        stop

      XDeath:
        TNT1 A 0 A_SetUserVar("user_damage",20)
        TNT1 A 0 A_Explode(CallACS("BondHitBox", user_damage),8,0,false,8)
        TNT1 A 0 A_SpawnItemEx("Goldeneye_BulletImpact",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
        goto Death
    }
}

actor Goldeneye_InvisibleRay : Goldeneye_BulletTracerThruGhost
{
    Speed 128
    Damage (20)
    States
    {
      Spawn:
        TNT1 A 0
        stop

      Death:
      Crash:
        TNT1 AAAAAAAA 0 A_SpawnItemEx("Goldeneye_Debris",random(-1,1),random(-1,1),random(-1,1),random(-1,1),random(-1,1),random(-1,1),random(-360,360),SXF_NOCHECKPOSITION)
      DeathFinish:
        TNT1 A 0 A_PlaySound("Goldeneye/Zap")
        TNT1 A 1 A_SpawnItemEx("Goldeneye_BulletImpact",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
        stop

      XDeath:
        TNT1 A 0 A_SetUserVar("user_damage",10)
        TNT1 A 0 A_Explode(CallACS("BondHitBox", user_damage),8,0,false,8)
        goto DeathFinish
    }
}

actor Goldeneye_InvisibleRayCoop : Goldeneye_InvisibleRay
{
    Species "Player"
    +THRUSPECIES
}
