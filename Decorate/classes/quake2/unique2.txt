Actor Q2IonRipper : Q2Weapon
{
	Tag "Ion Ripper"
	Inventory.PickupMessage "Ion Ripper"
	Weapon.UpSound "Q2Weapons/IonActive"
	Weapon.AmmoGive 50
	Weapon.AmmoType Cell
	Weapon.AmmoUse 2
	Weapon.SlotNumber 9
	Inventory.RestrictedTo "Bitterman"	
	States
	{
	Spawn:
		Q2WP A -1
		Stop
	Select:
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_TakeInventory(Q2WeaponIndex)
		TNT1 A 0 A_GiveInventory(Q2WeaponIndex,11)
		TNT1 A 0 A_PlaySound("Q2Weapons/IonIdle",CHAN_5,0.5,1)
		ION0 ABCDE 4
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(CHAN_5)
		TNT1 A 0 A_PlaySound("Q2Weapons/IonAway",CHAN_5)
		ION0 U 2
		ION1 IJKL 3
		Goto InstantDeselect
	InstantDeselect:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
	Ready:
		TNT1 A 0 A_Jump(24,2)
		ION0 H 1 A_WeaponReady
		Loop
		ION0 "HIJKLMNOPQRSTUVWXYZ[\]" 5 A_WeaponReady
		ION1 ABCDEFGH 5 A_WeaponReady
		Goto Ready+1
	Fire:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	SilentFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIfInventory(PowerSilencer,1,"SilentCoopFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang_Coop,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	SilentCoopFire:
		TNT1 A 0 A_PlaySound("Q2Weapons/IonFire",CHAN_WEAPON,0.25,0,3)
		TNT1 A 0 A_FireCustomMissile(Q2WeaponFlash,0,0)
		TNT1 A 0 A_FireCustomMissile(Q2IonBoomerang_Coop,0,1,8,4)
		ION0 FGF 4
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("SamsaraRecoilIsDisabled", 1, "FlashNoRecoil")
		TNT1 A 1 A_Light1
		TNT1 A 0 A_SetPitch(Pitch-0.005)
		TNT1 A 1
		TNT1 A 0 A_SetPitch(Pitch+0.005)
		Goto LightDone
	FlashNoRecoil:
		TNT1 A 2 A_Light1
		Goto LightDone
	}
}
Actor Q2IonBoomerang 
{
	Radius 4
	Height 2
	Speed 16
	Damage (50)
	DeathSound "Q2Weapons/IonExplode"
	BounceSound "Q2Weapons/IonHit"
	+BLOODSPLATTER
	+NOGRAVITY
	Projectile
	Decal BlasterScorch
	DamageType "BittermanDamage"
	BounceType "Hexen"
	BounceCount 5
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-7,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-6,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-5,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-4,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-3,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-2,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",-1,2)
		TNT1 A 0 A_SpawnItem("BlasterTrailSpawner",0,2)
		NULL A 1 Bright A_PlaySound("Q2Weapons/LaserFly",CHAN_VOICE,0.5,1)
		Loop
	Death:
		TNT1 A 1
		Stop
	Crash:
	XDeath:
		TNT1 A 5
		Stop
	}
}

Actor Q2IonBoomerang_Coop : Q2IonBoomerang { Species "Player" +THRUSPECIES }
