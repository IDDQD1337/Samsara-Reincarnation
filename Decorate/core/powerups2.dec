actor PartialInvisibility2 :  PartialInvisibility replaces PartialInvisibility
{
    states
    {
      Pickup:
        TNT1 A 1 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 1 A_JumpIfInventory("HexenClass",1,"PickupHexen")
        TNT1 A 1 A_JumpIfInventory("CorvusClass",1,"PickupHeretic")
        TNT1 A 1 A_JumpIfInventory("QuakeClass",1,"PickupQuake")
		TNT1 A 1 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 1 A_JumpIfInventory("Doom64GuyClass",1,"PickupDoom64")		
		TNT1 A 1 A_JumpIfInventory("KatarnClass",1,"PickupKatarn")		
		TNT1 A 1 A_JumpIfInventory("WitchavenClass",1,"PickupWitchaven")
		TNT1 A 1 A_JumpIfInventory("JonClass",1,"PickupJon")	
		TNT1 A 1 A_JumpIfInventory("BittermanClass",1,"PickupBitterman")
        TNT1 A 0 A_PlaySound("invisibilityget")
        TNT1 A 1 A_GiveInventory("BlurSphere")
        stop
	  PickupStrife:
        TNT1 A 0 A_JumpIfInventory("PortShadowArmor",0,"PickupHereticFail")
        TNT1 A 0 A_PlaySound("strife/itemget")
        TNT1 A 1 A_GiveInventory("PortShadowArmor")
        stop		
	  PickupDoom64:
        TNT1 A 0 A_PlaySound("invisibilityget")
        TNT1 A 1 A_GiveInventory("PowerTranslucency")
        stop	  
      PickupKatarn:
		TNT1 A 0 A_PlaySound("invisibilityget")
		TNT1 A 1 A_GiveInventory("PowerTranslucency")
		stop
	  PickupWitchaven:
		TNT1 A 0 A_PlaySound("gpickup/invis")
		TNT1 A 1 A_GiveInventory("BlurSphere")
		stop	
	  PickupJon:
		TNT1 A 0 A_PlaySound("Jon/FancyItemPick")
		TNT1 A 1 A_GiveInventory("EyeOfSiaItem_EX")
		stop
	  PickupBitterman:
		TNT1 A 0 A_PlaySound("Q2Misc/Pickup")
		TNT1 A 0 A_GiveInventory("Q2Silencer")
		TNT1 A 1 A_GiveInventory("BlurSphere")
		stop	
    }
}

actor PortShadowArmor : PowerupGiver
{
	+FLOORCLIP
	+VISIBILITYPULSE
	+INVENTORY.INVBAR
	+INVENTORY.UNDROPPABLE
	RenderStyle Translucent
	Inventory.MaxAmount 2
	Powerup.Type "Invisibility"
	Inventory.Icon "I_SHD1"
	Inventory.UseSound "strife/itempickup"
	Inventory.PickupSound "strife/itemget"
	Inventory.PickupMessage "Picked up the Shadow Armor."
	States
	{
	Spawn:
		SHD1 A -1 Bright
		Stop
	}
}

actor EyeOfSiaItem_EX : PowerupGiver
{
	+INVENTORY.INVBAR
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 3
	Powerup.Type Ghost
	Inventory.Icon "_EX3E0"
	Inventory.UseSound "Jon/itemuse"
	Inventory.PickupMessage "You found the Eye Of Sia!"
}

actor InvulnPowerup2 : InvulnPowerup replaces InvulnPowerup
{
    states
    {
      Pickup:
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen")
        TNT1 A 1 A_JumpIfInventory("CorvusClass",1,"PickupHeretic")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake")
		TNT1 A 0 A_JumpIfInventory("RottClass", 1, "PickupRott")	  
        TNT1 A 1 A_JumpIfInventory("Doom64GuyClass",1,"PickupDoom64")	
		TNT1 A 1 A_JumpIfInventory("KatarnClass",1,"PickupKatarn")		
		TNT1 A 1 A_JumpIfInventory("WitchavenClass",1,"PickupWitchaven")
		TNT1 A 0 A_JumpIfInventory("JonClass", 1, "PickupJon")		
		TNT1 A 0 A_JumpIfInventory("POGreedClass", 1, "PickupIPOG")
		TNT1 A 1 A_JumpIfInventory("BittermanClass",1,"PickupBitterman")
        TNT1 A 0 A_PlaySound("invulnget")
        TNT1 A 1 A_GiveInventory("PowerFakeInvulnerable")
        stop
	  PickupRott:
		TNT1 A 0 A_JumpIfInventory("DogProtection", 1, "PickupFail")
		TNT1 A 0 A_JumpIfInventory("GodProtection", 1, "PickupFail")
		TNT1 A 0 A_Jump(128,"PickupRott2")
		TNT1 A 0 A_PlaySound("gen/godmode")
		TNT1 A 0 A_GiveInventory("God Hand", 1)
		TNT1 A 0 A_GiveInventory("GodProtection")
		TNT1 A 0 A_Selectweapon("God Hand")
		Stop
	  PickupRott2:
		TNT1 A 0 A_PlaySound("gen/dogmode")
		TNT1 A 0 A_GiveInventory("Doggie", 1)
		TNT1 A 0 A_GiveInventory("DogProtection")
		TNT1 A 0 ACS_NamedExecuteWithResult("RottDogModeHandler")	
		TNT1 A 0 A_GiveInventory("DogMode")
		TNT1 A 0 A_Selectweapon("Doggie")
		Stop
      PickupDoom64:
        TNT1 A 0 A_PlaySound("invulnget")
        TNT1 A 1 A_GiveInventory("PowerFakeInvulnerable64")
        stop
	  PickupKatarn:
		TNT1 A 0 A_PlaySound("invulnget")
		TNT1 A 1 A_GiveInventory("PowerFakeInvulnerableKatarn")
		stop		
	  PickupWitchaven:
		TNT1 A 0 A_PlaySound("gpickup/invul")
		TNT1 A 1 A_GiveInventory("PowerFakeInvulnerable")
		stop
	  PickupJon:
		TNT1 A 0 A_PlaySound("Jon/SpecialItemPick")
		TNT1 A 1 A_GiveInventory("DivineScarab_Ex")
		stop
	  PickupIPOG:
	    TNT1 A 0 A_PlaySound("greed/pickup")
		TNT1 A 1 A_GiveInventory("IPOGReversoPill")
		stop
	  PickupBitterman:
		TNT1 A 0 A_PlaySound("Q2Misc/Pickup")
		TNT1 A 0 A_Jump(192,"PickupBitterman2","PickupBitterman3","PickupBitterman4")
		TNT1 A 1 A_GiveInventory("Q2Invulnerability")
		stop	
	  PickupBitterman2:
	    TNT1 A 1 A_GiveInventory("Q2DoubleDamage")
		stop
	  PickupBitterman3:
	    TNT1 A 1 A_GiveInventory("Q2QuadDamage")
		stop
	  PickupBitterman4:
	    TNT1 A 1 A_GiveInventory("Q2DualFireDamage")
		stop
    }
}

Actor DivineScarab_Ex : PowerupGiver
{
	+FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    +INVENTORY.HUBPOWER	
    Inventory.MaxAmount 2
    Inventory.Icon "_EX3F0"
    Inventory.UseSound "Jon/itemuse"
    Inventory.PickupMessage "You found a Divine Scarab!"
    Powerup.Type FakeInvulnerable
	States
	{
		Spawn:
			NULL A -1
			Stop
	}
}

ACTOR PowerFakeInvulnerable2 : PowerFakeInvulnerable replaces PowerFakeInvulnerable
{
  DamageFactor "PunchDagger", 0.0
  DamageFactor "StrifePistol", 0.0
  DamageFactor "ElectricBolt", 0.0
  DamageFactor "PoisonBolt", 0.0
  DamageFactor "MiniExplosive", 0.0
  DamageFactor "StrifeExplosive", 0.0
  DamageFactor "PhosFire", 0.0  
  Damagefactor "RottExplosive", 0.0
  DamageFactor "RottFire", 0.0
  DamageFactor "RottBullet", 0.0
  DamageFactor "BlakePlasma", 0.0
  DamageFactor "BlakeBullet", 0.0
  DamageFactor "Dynamite", 0.0
  DamageFactor "LifeLeech", 0.0
  DamageFactor "Tesla", 0.0
  DamageFactor "CalebBullet", 0.0
  DamageFactor "CalebNapalm", 0.0
  DamageFactor "CalebFire", 0.0  
  DamageFactor "C7MineBoom", 0.0
  DamageFactor "EradCoopGreenFire", 0.0  
  DamageFactor "EradCoopExplosive2", 0.0  
  DamageFactor "RMR-BigPlasma", 0.0		
  DamageFactor "RMR-CyanPlasma", 0.0  
  DamageFactor "RMR-YellowPlasma", 0.0  
  DamageFactor "RMR-YellowPlasma2", 0.0    
  DamageFactor "RMR-GreenPlasma", 0.0  
  DamageFactor "RMR-Bullet", 0.0  
  DamageFactor "RMR-DiscoBall", 0.0  
  DamageFactor "PGBullet", 0.0
  DamageFactor "PGPlasma", 0.0
  DamageFactor "PGLaser", 0.0
  DamageFactor "PGFire", 0.0
  DamageFactor "PGExplosive", 0.0  
  DamageFactor "Disruptoruniversaldamageshit4", 0.0
  DamageFactor "Disruptoruniversaldamageshit3", 0.0
  DamageFactor "Disruptoruniversaldamageshit2",	0.0
  DamageFactor "Disruptoruniversaldamageshit1", 0.0
  DamageFactor "DisruptorWall", 0.0
  DamageFactor "WTMelee", 0.0
  DamageFactor "WTRanged", 0.0
  DamageFactor "WTRangedFire", 0.0
  DamageFactor "WTMeleeIce", 0.0
  DamageFactor "WTRangedIce", 0.0
  DamageFactor "Nuke", 0.0
  DamageFactor "HLSqueak", 0.0
  DamageFactor "HLExplosive", 0.0
  DamageFactor "HLRPGExplosive", 0.0
  DamageFactor "HLLaser", 0.0
  DamageFactor "HLBarnacle", 0.0
  DamageFactor "HLBullet", 0.0  
}

actor PowerFakeInvulnerable64: PowerFakeInvulnerable { Powerup.Color "FF FF FF", 0.35 }
actor PowerFakeInvulnerableKatarn : PowerFakeInvulnerable { Powerup.Color InverseMap }

Actor BioSuit2 : CustomInventory replaces BioSuit
{
    RenderStyle Add
    Alpha 0.95
    +CountItem
    +FLOATBOB
    +INVENTORY.PICKUPFLASH
    +Inventory.AlwaysPickup
    +Inventory.AutoActivate
    +COUNTITEM
	Inventory.PickupMessage "$SAMSARA_POWERUP_RADSUIT"
	Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	  Spawn:
			RDST A 0 BRIGHT
			RDST A -1 BRIGHT ACS_ExecuteAlways(212, 0, 4, 100, 95)
			stop
	  Pickup:
			TNT1 A 0 A_JumpIfInventory("RottClass", 1, "PickupRott")
	        TNT1 A 1 A_JumpIfInventory("StrifeClass", 1, "PickupStrife")
	        TNT1 A 0 A_JumpIfInventory("Doom64GuyClass", 1, "PickupDoom64")
			TNT1 A 0 A_JumpIfInventory("KatarnClass",1,"PickupKatarn")
			TNT1 A 1 A_JumpIfInventory("BittermanClass",1,"PickupBitterman")
			TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
			TNT1 A 0 A_GiveInventory("BioSuitPowerup")
			Stop
	  PickupRott:
			TNT1 A 0 A_PlaySound("gen/asbestos")
			TNT1 A 0 A_GiveInventory("AsbestosArmor", 1)
			TNT1 A 0 A_GiveInventory("AsbestosIronFeet", 1)
			TNT1 A 0 A_TakeInventory("BulletProofVest", 1)
			TNT1 A 0 ACS_NamedExecuteAlways("RottGasMask",0,0,0,0)
			Stop
	  PickupStrife:
			TNT1 A 0 A_JumpIfInventory("PortEnviSuit", 0, "PickupFail")
			TNT1 A 0 A_PlaySound("strife/itemget")
			TNT1 A 1 A_GiveInventory("PortEnviSuit")
			stop
      PickupDoom64:
			TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
			TNT1 A 0 A_GiveInventory("BioSuitPowerup64")
			stop
	  PickupKatarn:
			TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
			TNT1 A 0 A_GiveInventory("BioSuitPowerupKatarn")
			stop
	  PickupBitterman:
			TNT1 A 0 A_PlaySound("Q2Misc/Pickup")
			TNT1 A 0 A_GiveInventory("Q2EnvironmentSuit")
			stop	
	  PickupFail:
			RDST A 1 BRIGHT
			fail
	}
}

ACTOR BioSuitPowerup : Infrared { -COUNTITEM Powerup.Type "IronFeet" Powerup.Duration -60 Powerup.Color "Green", 0.125 }
ACTOR BioSuitPowerupKatarn : Infrared { -COUNTITEM Powerup.Type "IronFeet" Powerup.Duration -60 Powerup.Color "Green", 0.00 }
ACTOR BioSuitPowerup64 : Infrared { -COUNTITEM Powerup.Type "IronFeet" Powerup.Duration -60 Powerup.Color "Green", 0.15 }

actor PortEnviSuit : PowerupGiver
{
	+FLOORCLIP
	+INVENTORY.INVBAR
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 5
	Powerup.Type "IronFeet"
	Inventory.Icon "I_MASK"
	Inventory.UseSound "strife/itempickup"
	Inventory.PickupSound "strife/itemget"
	Inventory.PickupMessage "You picked up the Environmental Suit."
	States
	{
	Spawn:
		MASK A -1
		Stop
	}
}

actor Visor2 : Visor replaces Visor
{
    States
    {
      Pickup:
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen")
        TNT1 A 1 A_JumpIfInventory("CorvusClass",1,"PickupHeretic")
		TNT1 A 0 A_JumpIfInventory("CalebClass", 1, "PickupCaleb")
		TNT1 A 0 A_JumpIfInventory("RottClass", 1, "PickupRott")		
		TNT1 A 0 A_JumpIfInventory("JonClass", 1, "PickupJon")		
        TNT1 A 0 A_PlaySound("lettherebelight")
        TNT1 A 1 A_GiveInventory("Infrared")
        stop
	  PickupCaleb:
		TNT1 A 0 A_Playsound("Caleb/Powerup")
		TNT1 A 0 A_GiveInventory("BeastVision")
		Stop
	  PickupRott:
		TNT1 A 0 A_PlaySound("gen/vest")
        TNT1 A 1 A_GiveInventory("Infrared")		
		TNT1 A 0 A_GiveInventory("BulletProofVest")
		TNT1 A 0 A_TakeInventory("AsbestosArmor", 1)
		TNT1 A 0 A_TakeInventory("AsbestosIronFeet", 1)
		Stop
	  PickupJon:
		TNT1 A 0 A_PlaySound("Jon/NoramItemPick")
        TNT1 A 1 A_GiveInventory("LighterofGumercindo_EX")		
		Stop		
    }
}

Actor LighterofGumercindo_EX : PowerupGiver
{    
	+FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    Inventory.MaxAmount 6
    Inventory.Icon "_EX3D0"
    Inventory.UseSound "Jon/itemuse"
    Inventory.PickupMessage "You picked up a Lighter of Gumercindo!"
    Powerup.Type Torch
	States
	{
		Spawn:
			NULL A -1
			Stop
	}
}