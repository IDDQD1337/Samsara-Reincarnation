// Regular Powerups
Actor PartialInvisibility : CustomInventory replaces BlurSphere
{
	RenderStyle Add
	Alpha 0.75
	+FLOATBOB
    +VISIBILITYPULSE
    +INVENTORY.PICKUPFLASH
    +INVENTORY.BIGPOWERUP
    +COUNTITEM
	+INVENTORY.QUIET
    Inventory.PickupAnnouncerEntry "partialinvisibility"
    //Inventory.PickupMessage "$SAMSARA_POWERUP_INVIS"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		NVSI A 0 NoDelay ACS_NamedExecuteWithResult("Samsara_SwitchableObject",2)
		NVSI A 35 BRIGHT ACS_NamedExecuteAlways("SamsaraClientDecorate", 0, 4, 100, 75)
		wait
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoomguy")
		TNT1 A 0 A_JumpIfInventory("CorvusClass",1,"PickupCorvus")
		TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupGhost")
		TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
		TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake")
		TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
		TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupWitchaven")
		TNT1 A 0 A_JumpIfInventory("HalfLifeClass",1,"PickupTranslucent")
		TNT1 A 0 A_JumpIfInventory("JonClass",1,"PickupJon")
		TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupBitterman")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
		TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupTranslucent")
		TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupTranslucent")
		TNT1 A 0 A_JumpIfInventory("UnrealClass",1,"PickupTranslucent")
		TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
		TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSarge")
		TNT1 A 0 A_JumpIfInventory("DescentClass",1,"PickupTranslucent")
		TNT1 A 0 A_JumpIfInventory("DeusExClass",1,"PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
		
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invisibilityget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityNormalGiver")
		stop
	PickupTranslucent:	// Also used for 3D classes
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invisibilityget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityTranslucentGiver")
		stop
	PickupGhost:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invisibilityget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityGhostGiver")
		stop
	PickupDoomguy:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,2)
		TNT1 A 0 A_JumpIfInventory("DoomClassMode",1,"PickupTranslucent")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupCorvus:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 46, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("heretic/itemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortGhostly")
		stop
	PickupDuke:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 47, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("duke/itemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("ItemHoloDuke",3)
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
        TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
		TNT1 A 0 A_GiveInventory("SamsaraPowerInvisibilityShadowGiver")
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityShadowGiver")
		stop
	PickupQuake:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 65, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDecorate",0,25,0,0)	//TNT1 A 0 A_PlaySoundEx("quake/invisannouncer","soundslot7",0,2)
		TNT1 A 0 A_GiveInventory("QuakeInvisTimer", 1050)
        TNT1 A 1
		stop
	PickupStrife:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 48, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
        TNT1 A 0 A_PlaySound("strife/itemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortShadowArmor")
		stop
	PickupWitchaven:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 49, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("gpickup/phial", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("WTInvisibilityPhial")
		stop
	PickupJon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 50, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Jon/FancyItemPick", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("EyeOfSiaItem_EX")
		stop
	PickupBitterman:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 51, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Q2Misc/Pickup", CHAN_ITEM)
		TNT1 A 0 A_Jump(128, "PickupBitterman2")
		TNT1 A 1 A_GiveInventory("Q2Silencer")
		stop
	PickupBitterman2:
		TNT1 A 1 A_GiveInventory("Q2DualFireDamage")
		stop	  
	PickupHexen2:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen2/artifactpickup", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortGhostly2")
		stop
	PickupRTCW:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invisibilityget", CHAN_ITEM)
		TNT1 A 0 A_TakeInventory("RTCW_Detection")
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityTranslucentGiver")
		stop
	PickupSarge:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Quake3/Items/Invisibility", CHAN_6)
		TNT1 A 1 A_GiveInventory("Q3InvisibilityCloak",1)
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 45, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate",23)
		TNT1 A 0 A_PlaySound("invisibilityget", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 100)
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "PickupDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "PickupDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "PickupDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "PickupDeusExEnviro1")
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityTranslucentGiver")
		stop
	PickupDeusExEnviro1:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityDXEnviro1Giver")
		stop
	PickupDeusExEnviro2:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityDXEnviro2Giver")
		stop
	PickupDeusExEnviro3:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityDXEnviro3Giver")
		stop
	PickupDeusExEnviro4:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvisibilityDXEnviro4Giver")
		stop
	PickupFail:
        NVSI A 1 BRIGHT
        fail
	}
}

Actor SamsaraPowerInvisibilityNormal : PowerInvisibility { +SHADOW Powerup.Duration -60 Powerup.Strength 80 Powerup.Mode "Fuzzy" }
Actor SamsaraPowerInvisibilityTranslucent : PowerInvisibility { +SHADOW Powerup.Duration -60 Powerup.Strength 80 Powerup.Mode "Translucent" }
Actor SamsaraPowerInvisibilityGhost : PowerGhost { +GHOST Powerup.Duration -60 Powerup.Strength 60 Powerup.Mode "None" }
Actor SamsaraPowerInvisibilityShadow : PowerShadow { Powerup.Duration -55 Powerup.Strength 75 Powerup.Mode "Cumulative" }

Actor SamsaraPowerInvisibilityNormalGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityNormal
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvisibilityTranslucentGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityTranslucent
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvisibilityGhostGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityGhost
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvisibilityShadowGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityShadow
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

actor PortGhostly : PowerupGiver
{
    tag "Shadowsphere"
    inventory.maxamount 16
	inventory.interhubamount 16
    inventory.usesound "heretic/itemuse"
    +inventory.undroppable
    +inventory.hubpower
    Inventory.Icon "ARTINVSI"
	Inventory.RestrictedTo "CorvusPlayer"
    Powerup.Type SamsaraPowerInvisibilityGhost
}

actor QuakeInvisTimer: Counter {}

actor PortShadowArmor : PowerupGiver
{
	+FLOORCLIP
	+VISIBILITYPULSE
	+INVENTORY.INVBAR
	+INVENTORY.UNDROPPABLE
	RenderStyle Translucent
	Inventory.MaxAmount 2
	inventory.interhubamount 2
	Powerup.Type Shadow
	Inventory.Icon "I_SHDO"
	Inventory.UseSound "strife/itempickup"
	Inventory.PickupSound "strife/itemget"
	Inventory.PickupMessage "Picked up the Shadow Armor."
	Inventory.RestrictedTo "StrifeguyPlayer"  
	Tag "Shadow Armor"
	States
	{
	Spawn:
		SHD1 A -1 Bright
		Stop
	}
}

actor WTInvisibilityPhial : CustomInventory
{
	Tag "Invisibility Potion"
    inventory.maxamount 10
	inventory.interhubamount 10
    inventory.icon "WIN0F0"
    inventory.usesound "gplayer/drink"
	inventory.pickupmessage "You got an invisibility potion!"
	inventory.pickupsound "gpickup/phial"
	Inventory.RestrictedTo "GrondovalPlayer"
	//+INVENTORY.KEEPDEPLETED
	+INVENTORY.INVBAR
	+INVENTORY.UNDROPPABLE
	-PICKUP
	scale 0.5
	states
	{
		Spawn:
			WIN0 E 12
			WIN0 E 0 A_ChangeFlag("PICKUP",1)
			WIN0 E -1 bright
			stop
		Use:
			WIN0 E 0 A_GiveInventory("WTInvisibility",1)
			stop
		FailPotion:
			WIN0 E 0
			fail
	}
}

actor WTInvisibility : PowerInvisibility { +SHADOW Powerup.Duration -30 Powerup.Strength 80 Powerup.Mode "Fuzzy" }

actor EyeOfSiaItem_EX : PowerupGiver
{
	+INVENTORY.INVBAR
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 3
	inventory.interhubamount 3
	Powerup.Type SamsaraPowerInvisibilityGhost
	Inventory.Icon "_EX3E0"
	Inventory.UseSound "Jon/itemuse"
	Inventory.PickupMessage "You found the Eye Of Sia!"
	Inventory.RestrictedTo "PSPlayer"
	Tag "Eye of Sia"
}

actor PortGhostly2 : PowerupGiver
{
    tag "Shadowsphere"
    inventory.maxamount 16
	inventory.interhubamount 16
    inventory.usesound "hexen2/artiuse"
    +inventory.undroppable
    +inventory.hubpower
    Inventory.Icon "H2INVT08"
	Inventory.RestrictedTo "Demoness"
    Powerup.Type SamsaraPowerInvisibilityGhost
}

Actor SamsaraPowerInvisibilityDXEnviro1 : PowerInvisibility { +SHADOW Powerup.Duration -75 Powerup.Strength 80 Powerup.Mode "Translucent" }
Actor SamsaraPowerInvisibilityDXEnviro2 : PowerInvisibility { +SHADOW Powerup.Duration -90 Powerup.Strength 80 Powerup.Mode "Translucent" }
Actor SamsaraPowerInvisibilityDXEnviro3 : PowerInvisibility { +SHADOW Powerup.Duration -105 Powerup.Strength 80 Powerup.Mode "Translucent" }
Actor SamsaraPowerInvisibilityDXEnviro4 : PowerInvisibility { +SHADOW Powerup.Duration -120 Powerup.Strength 80 Powerup.Mode "Translucent" }

Actor SamsaraPowerInvisibilityDXEnviro1Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityDXEnviro1
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvisibilityDXEnviro2Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityDXEnviro2
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvisibilityDXEnviro3Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityDXEnviro3
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvisibilityDXEnviro4Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvisibilityDXEnviro4
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

/*
actor InvisTrail
{
    Renderstyle Add
    Alpha 0.35
    Scale 0.95
    -Solid
    +Noclip
    +Nogravity
    +Nointeraction
    +CLIENTSIDEONLY
    States
    {
      Spawn:
        NVSI A 2 A_FadeOut(0.125)
        Loop
    }
}
*/

Actor InvulnPowerup : CustomInventory replaces InvulnerabilitySphere
{
	RenderStyle Add
	Alpha 0.95
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +INVENTORY.BIGPOWERUP
    +COUNTITEM
	+INVENTORY.QUIET
    Inventory.PickupAnnouncerEntry "invulnerability"
    //Inventory.PickupMessage "$SAMSARA_POWERUP_INVULN"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		NVLN A 0
        TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",28,0,0) == 1, "NoInvuln")
        NVLN A 35 BRIGHT ACS_NamedExecuteAlways("SamsaraClientDecorate", 0, 4, 100, 95)
		wait
	Pickup:
	PickupInvuln:
		TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupInvulnDoomguy")
		TNT1 A 0 A_JumpIfInventory("CorvusClass",1,"PickupInvulnCorvus")
		TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupInvulnHexen")
		TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupInvulnDuke")
		TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupInvulnMarathon")
		TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupInvulnQuake")
		TNT1 A 0 A_JumpIfInventory("RottClass", 1, "PickupInvulnRott")
		TNT1 A 0 A_JumpIfInventory("POGreedClass", 1, "PickupInvulnIPOG")
		TNT1 A 0 A_JumpIfInventory("JonClass",1,"PickupInvulnJon")
		TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupInvulnBitterman")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupInvulnHexen2")
		TNT1 A 0 A_JumpIfInventory("CatacombClass", 1, "PickupInvulnCatacomb")
		TNT1 A 0 A_JumpIfInventory("Q3Class", 1, "PickupInvulnSarge")
		TNT1 A 0 A_JumpIfInventory("DeusExClass",1,"PickupInvulnDeusEx")
		TNT1 A -1 A_Jump(256,"PickupInvulnNormal")
		wait
	PickupInvulnNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invulnget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableNormalGiver")
		stop
	PickupInvulnDoomguy:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,2)
		TNT1 A 0 A_JumpIfInventory("DoomClassMode",1,"PickupInvulnDoomguy64")
		TNT1 A -1 A_Jump(256,"PickupInvulnNormal")
		wait
	PickupInvulnDoomguy64:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invulnget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableDoom64Giver")
		stop
	PickupInvulnCorvus:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 53, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("heretic/itemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortRingInvuln")
		stop
	PickupInvulnHexen:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 54, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
        TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen/artiget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortIconDefender")
		stop
	PickupInvulnDuke:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invulnget", CHAN_ITEM)
        TNT1 A 0 A_JumpIfInventory("DukeBallgag", 1, 6)
		TNT1 A 0 A_TakeInventory("DukeTauntCooldown")
		TNT1 A 0 A_StopSound(CHAN_7)
        TNT1 A 0 A_GiveInventory("DukeTauntCooldown", 5) // was 15 despite the max being 5
		TNT1 A 0 ACS_NamedExecuteAlways("DukeTauntCooldown")
        TNT1 A 0 A_PlaySoundEx("duke/invuln", "soundslot7", 0, 0)
        TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableGoldMapGiver")
		stop
	PickupInvulnMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
		TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableNormalGiver")
		stop
	PickupInvulnQuake:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 66, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_GiveInventory("QuakePentTimer", 1050)
		stop
	PickupInvulnRott:
		TNT1 A 0 A_JumpIfInventory("DogProtection", 1, "PickupFail")
		TNT1 A 0 A_JumpIfInventory("GodProtection", 1, "PickupFail")
		TNT1 A 0 A_Jump(128,"PickupInvulnRott2")
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 55, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("gen/godmode", CHAN_ITEM)
		TNT1 A 0 A_GiveInventory("God Hand", 1)
		TNT1 A 0 A_GiveInventory("GodProtection")
		TNT1 A 0 A_Selectweapon("God Hand")
		stop
	PickupInvulnRott2:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 55, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("gen/dogmode", CHAN_ITEM)
		TNT1 A 0 A_GiveInventory("Doggie", 1)
		TNT1 A 0 A_GiveInventory("DogProtection")
		TNT1 A 0 ACS_NamedExecuteWithResult("RottDogModeHandler")	
		TNT1 A 0 A_GiveInventory("DogMode")
		TNT1 A 0 A_Selectweapon("Doggie")
		stop
	PickupInvulnIPOG:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 56, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("greed/pickup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("IPOGReversoPill")
		stop
	PickupInvulnJon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 57, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Jon/SpecialItemPick", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("DivineScarab_Ex")
		stop
	PickupInvulnBitterman:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Q2Misc/Pickup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("Q2Invulnerability")
		stop
	PickupInvulnHexen2:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 54, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
        TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen2/artifactpickup", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortIconDefender2")
		stop
	PickupInvulnCatacomb:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 58, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Catacomb/Hourglass", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("Catacomb_Hourglass", 1)
		stop
	PickupInvulnSarge:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Quake3/Items/QuadDamage", CHAN_6)
		TNT1 A 1 A_GiveInventory("Q3QuadDamageFactor", 1)
		stop
	PickupInvulnDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 52, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("invulnget", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 250)
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "PickupInvulnDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "PickupInvulnDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "PickupInvulnDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "PickupInvulnDeusExEnviro1")
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableNormalGiver")
		stop
	PickupInvulnDeusExEnviro1:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableDXEnviro1Giver")
		stop
	PickupInvulnDeusExEnviro2:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableDXEnviro2Giver")
		stop
	PickupInvulnDeusExEnviro3:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableDXEnviro3Giver")
		stop
	PickupInvulnDeusExEnviro4:
		TNT1 A 1 A_GiveInventory("SamsaraPowerInvulnerableDXEnviro4Giver")
		stop
	PickupFail:
        NVLN A 1 BRIGHT
        fail
	NoInvuln:
        TNT1 A 1
        stop
	}
}

Actor SamsaraPowerInvulnerableNormal : PowerProtection
{
	Powerup.Duration -30
	Powerup.Color InverseMap
	damagefactor "normal", 0.0
	damagefactor "Pistol", 0.0
	DamageFactor "DoomFist", 0.0
	damagefactor "ZorchPistol", 0.0
	damagefactor "Wraithverge", 0.0
	damagefactor "zorch", 0.0
	damagefactor "fire", 0.0
	damagefactor "MarathonFire", 0.0
	damagefactor "MarathonPlasmaFire", 0.0
	damagefactor "ice", 0.0
	damagefactor "slime", 0.0
	damagefactor "bfg", 0.0
	damagefactor "bfgspray", 0.0
	damagefactor "disintegrate", 0.0
	damagefactor "electric", 0.0
	DamageFactor "BFG", 0.0
	DamageFactor "BFGSpray", 0.0
	DamageFactor "Poison", 0.0
	DamageFactor "PoisonCloud", 0.0
	DamageFactor "Mace", 0.0
	DamageFactor "DragonClaw", 0.0
	DamageFactor "WolfenFlamethrower", 0.0
	DamageFactor "DukeDamage", 0.0
	DamageFactor "DukeExplosive", 0.0
	DamageFactor "DukeSpectral", 0.0
	DamageFactor "MightyBoot", 0.0
	DamageFactor "DukeIce", 0.0
	DamageFactor "DukePistol", 0.0
	DamageFactor "MarathonPistol", 0.0
	DamageFactor "Explosive", 0.0
	DamageFactor "DoomPlasma", 0.0
	DamageFactor "CorvusCrossbow", 0.0
	DamageFactor "CorvusHellstaff", 0.0
	DamageFactor "CorvusHellstaffTomed", 0.0
	DamageFactor "MarathonPlasma", 0.0
	DamageFactor "BJSpear", 0.0
	DamageFactor "DoomCacodemon", 0.0
	DamageFactor "DoomHellNoble", 0.0
	DamageFactor "DoomSpiderPlasma", 0.0
	DamageFactor "DoomTheseGuysAreTheBest", 0.0
	DamageFactor "HereNitrogolem", 0.0
	DamageFactor "HereAxeGreen", 0.0
	DamageFactor "HereAxeRed", 0.0
	DamageFactor "Wizard", 0.0
	DamageFactor "HereLichWind", 0.0
	DamageFactor "HereDsparil", 0.0
	DamageFactor "HexBishop", 0.0
	DamageFactor "HexSlaughtaur", 0.0
	DamageFactor "HexGreenFire", 0.0
	DamageFactor "HexStalkerShot", 0.0
	DamageFactor "HexHeresiarchPurple", 0.0
	DamageFactor "QuakePistol", 0.0
	DamageFactor "NotQuadded", 0.0
	DamageFactor "SpectralNoQuad", 0.0

	DamageFactor "MarathonFusion", 1.0
	DamageFactor "Kamikaze", 1.0
	DamageFactor "ZorchKamikaze", 1.0
	DamageFactor "Suicide", 1.0
	DamageFactor "NotSuicide", 0.0		// Used for monsters with suicide attacks
	DamageFactor "Telefrag", 1.0

	DamageFactor "PunchDagger", 0.0
	DamageFactor "StrifePistol", 0.0
	DamageFactor "ElectricBolt", 0.0
	DamageFactor "PoisonBolt", 0.0
	DamageFactor "MiniExplosive", 0.0
	DamageFactor "StrifeExplosive", 0.0
	DamageFactor "PhosFire", 0.0  
	DamageFactor "RottExplosive", 0.0
	DamageFactor "RottFire", 0.0
	DamageFactor "RottBullet", 0.0
	DamageFactor "BlakePlasma", 0.0
	DamageFactor "BlakeBullet", 0.0
	DamageFactor "Dynamite", 0.0
	DamageFactor "LifeLeech", 0.0
	DamageFactor "Tesla", 0.0
	DamageFactor "CalebBullet", 0.0
	DamageFactor "CalebNapalm", 0.0
	DamageFactor "CalebFire", 0.0  
	DamageFactor "C7MineBoom", 0.0
	DamageFactor "EradCoopGreenFire", 0.0  
	DamageFactor "EradCoopExplosive2", 0.0  
	DamageFactor "RMR-BigPlasma", 0.0		
	DamageFactor "RMR-CyanPlasma", 0.0  
	DamageFactor "RMR-YellowPlasma", 0.0  
	DamageFactor "RMR-YellowPlasma2", 0.0    
	DamageFactor "RMR-GreenPlasma", 0.0  
	DamageFactor "RMR-Bullet", 0.0  
	DamageFactor "RMR-DiscoBall", 0.0  
	DamageFactor "PGBullet", 0.0
	DamageFactor "PGPlasma", 0.0
	DamageFactor "PGLaser", 0.0
	DamageFactor "PGFire", 0.0
	DamageFactor "PGExplosive", 0.0  
	DamageFactor "Disruptoruniversaldamageshit4", 0.0
	DamageFactor "Disruptoruniversaldamageshit3", 0.0
	DamageFactor "Disruptoruniversaldamageshit2",	0.0
	DamageFactor "Disruptoruniversaldamageshit1", 0.0
	DamageFactor "DisruptorWall", 0.0
	DamageFactor "WTMelee", 0.0
	DamageFactor "WTRanged", 0.0
	DamageFactor "WTRangedFire", 0.0
	DamageFactor "WTMeleeIce", 0.0
	DamageFactor "WTRangedIce", 0.0
	DamageFactor "Nuke", 0.0
	DamageFactor "HLSqueak", 0.0
	DamageFactor "HLExplosive", 0.0
	DamageFactor "HLRPGExplosive", 0.0
	DamageFactor "HLLaser", 0.0
	DamageFactor "HLBarnacle", 0.0
	DamageFactor "HLBullet", 0.0  
}

Actor SamsaraPowerInvulnerableNormalGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableNormal
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvulnerableDoom64 : SamsaraPowerInvulnerableNormal { Powerup.Color "FF FF FF", 0.35 }

Actor SamsaraPowerInvulnerableDoom64Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableDoom64
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvulnerableGoldMap : SamsaraPowerInvulnerableNormal { Powerup.Color GoldMap }

Actor SamsaraPowerInvulnerableGoldMapGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableGoldMap
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvulnerableGrey : SamsaraPowerInvulnerableNormal { Powerup.Color Grey, 0.1 }

Actor SamsaraPowerInvulnerableGreyGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableGrey
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor PortRingInvuln : PowerupGiver
{
    tag "Ring of Invulnerability"
    +INVENTORY.UNDROPPABLE
    +inventory.hubpower
    Inventory.MaxAmount 16
	inventory.interhubamount 16
    Inventory.Icon "ARTIINVU"
    Powerup.Type SamsaraPowerInvulnerableGoldMap
    inventory.usesound "heretic/itemuse"
	Inventory.RestrictedTo "CorvusPlayer"
}

Actor QuakePentagram : SamsaraPowerInvulnerableNormal
{
    Powerup.Duration 0x7FFFFFFF
    Powerup.Color "FF 20 00", 0.15
}

Actor QuakePentTimer: Counter { inventory.interhubamount 0 }

Actor DivineScarab_Ex : PowerupGiver
{
	+FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    +INVENTORY.HUBPOWER	
    Inventory.MaxAmount 2
	inventory.interhubamount 2
    Inventory.Icon "_EX3F0"
    Inventory.UseSound "Jon/itemuse"
    Inventory.PickupMessage "You found a Divine Scarab!"
	Inventory.RestrictedTo "PSPlayer"
    Powerup.Type SamsaraPowerInvulnerableNormal
	Tag "Divine Scarab"
	States
	{
		Spawn:
			NULL A -1
			Stop
	}
}

Actor PortIconDefender : PowerupGiver
{
    tag "Icon of the Defender"
    +INVENTORY.UNDROPPABLE
    +inventory.hubpower
    Inventory.MaxAmount 16
	inventory.interhubamount 16
    Inventory.Icon "ARTIDFND"
    Powerup.Type SamsaraPowerInvulnerableGrey
    inventory.usesound "hexen/artiuse"
	Inventory.RestrictedTo "HexenPlayer"
}

Actor PortIconDefender2 : PowerupGiver
{
    tag "Icon of the Defender"
    +INVENTORY.UNDROPPABLE
    +inventory.hubpower
    Inventory.MaxAmount 16
	inventory.interhubamount 16
    Inventory.Icon "H2INVT07"
    Powerup.Type SamsaraPowerInvulnerableGrey
    inventory.usesound "hexen2/artiuse"
	Inventory.RestrictedTo "Demoness"
}

Actor SamsaraPowerInvulnerableDXEnviro1 : SamsaraPowerInvulnerableNormal { Powerup.Duration -37 }
Actor SamsaraPowerInvulnerableDXEnviro2 : SamsaraPowerInvulnerableNormal { Powerup.Duration -45 }
Actor SamsaraPowerInvulnerableDXEnviro3 : SamsaraPowerInvulnerableNormal { Powerup.Duration -53 }
Actor SamsaraPowerInvulnerableDXEnviro4 : SamsaraPowerInvulnerableNormal { Powerup.Duration -60 }

Actor SamsaraPowerInvulnerableDXEnviro1Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableDXEnviro1
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvulnerableDXEnviro2Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableDXEnviro2
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvulnerableDXEnviro3Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableDXEnviro3
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerInvulnerableDXEnviro4Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerInvulnerableDXEnviro4
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

/*
actor InvulnTrail
{
    Renderstyle Add
    Alpha 0.4
    Scale 0.95
    -Solid
    +Noclip
    +Nogravity
    +Nointeraction
    +CLIENTSIDEONLY
    States
    {
      Spawn:
        NVLN A 2 A_FadeOut(0.125)
        Loop
    }
}
*/

Actor BioSuit : CustomInventory replaces RadSuit
{
	RenderStyle Add
	Alpha 0.95
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
    //Inventory.PickupMessage "$SAMSARA_POWERUP_RADSUIT"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		RDST A 0 BRIGHT
		RDST A 35 BRIGHT ACS_NamedExecuteAlways("SamsaraClientDecorate", 0, 4, 100, 95)
		wait
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoomguy")
		TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("RottClass", 1, "PickupRott")
		TNT1 A 0 A_JumpIfInventory("KatarnClass", 1, "PickupKatarn")
		TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupWitchaven")
		TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSarge")
		TNT1 A 0 A_JumpIfInventory("DeusExClass",1,"PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetNormalGiver")
		stop
	PickupDoomguy:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,2)
		TNT1 A 0 A_JumpIfInventory("DoomClassMode",1,"PickupDoomguy64")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupDoomguy64:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetDoom64Giver")
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
		TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetNormalGiver")
		stop
	PickupRott:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("gen/asbestos", CHAN_ITEM)
		TNT1 A 0 A_GiveInventory("AsbestosArmor", 1)
		TNT1 A 0 A_GiveInventory("AsbestosIronFeet", 1)
		TNT1 A 0 A_TakeInventory("BulletProofVest", 1)
		TNT1 A 0 ACS_NamedExecuteAlways("RottGasMask",0,0,0,0)
		stop
	PickupKatarn:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetKatarnGiver")
		stop
	PickupWitchaven:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
        TNT1 A 0 A_GiveInventory("SamsaraPowerIronFeetNormalGiver")
		TNT1 A 1 A_GiveInventory("WTFireProofPhial")
		stop
	PickupSarge:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Quake3/Items/BioSuit", CHAN_6)
		TNT1 A 0 A_GiveInventory("Q3BattleSuitProtection", 1)
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 59, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("antisterileget", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 200)
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "PickupDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "PickupDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "PickupDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "PickupDeusExEnviro1")
		TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetNormalGiver")
		stop
	PickupDeusExEnviro1:
		TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetDXEnviro1Giver")
		stop
	PickupDeusExEnviro2:
		TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetDXEnviro2Giver")
		stop
	PickupDeusExEnviro3:
		TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetDXEnviro3Giver")
		stop
	PickupDeusExEnviro4:
		TNT1 A 1 A_GiveInventory("SamsaraPowerIronFeetDXEnviro4Giver")
		stop
	PickupFail:
        RDST A 1 BRIGHT
        fail
	}
}

Actor SamsaraPowerIronFeetNormal : PowerIronFeet { Powerup.Duration -60 Powerup.Color "Green", 0.125 }
Actor SamsaraPowerIronFeetDoom64 : PowerIronFeet { Powerup.Duration -60 Powerup.Color "Green", 0.15 }
Actor SamsaraPowerIronFeetKatarn : PowerIronFeet { Powerup.Duration -60 Powerup.Color "Green", 0.0 }

Actor SamsaraPowerIronFeetNormalGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetNormal
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerIronFeetDoom64Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetDoom64
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerIronFeetKatarnGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetKatarn
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor PortEnviSuit : PowerupGiver	// Unused; it was kind of a dumb idea to make the radiation suit an inventory item anyway
{
	+FLOORCLIP
	+INVENTORY.INVBAR
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 5
	inventory.interhubamount 5
	Powerup.Type "IronFeet"
	Inventory.Icon "I_GASM"
	Inventory.UseSound "strife/itempickup"
	Inventory.PickupSound "strife/itemget"
	Inventory.PickupMessage "You picked up the Environmental Suit."
	Inventory.RestrictedTo "StrifeguyPlayer"  
	Tag "Environmental Suit"
	States
	{
	Spawn:
		MASK A -1
		Stop
	}
}

Actor WTFireProofPhial : CustomInventory
{
	Tag "Fire Immunity Potion"
    inventory.maxamount 10
	inventory.interhubamount 10
    inventory.icon "WIN0D0"
    inventory.usesound "gplayer/drink"
	inventory.pickupmessage "You got a fire immunity potion!"
	inventory.pickupsound "gpickup/phial"
	Inventory.RestrictedTo "GrondovalPlayer"
	//+INVENTORY.KEEPDEPLETED
	+INVENTORY.UNDROPPABLE
	+INVENTORY.INVBAR
	-PICKUP
	scale 0.5
	states
	{
		Spawn:
			WIN0 C 12
			WIN0 C 0 A_ChangeFlag("PICKUP",1)
			WIN0 C -1 bright
			stop
		Use:
			WIN0 C 0 A_GiveInventory("WTFireProof",1)
			stop
		FailPotion:
			WIN0 C 0
			fail
	}
}

Actor WTFireProof : PowerProtection 
{ 
	Powerup.Duration -30 
	Powerup.Color "OrangeRed", 0.25
	DamageFactor "Fire", 0.0
	DamageFactor "MarathonFire", 0.0
	DamageFactor "MarathonPlasmaFire", 0.0
	DamageFactor "WolfenFlamethrower", 0.0
	DamageFactor "TotenkopfFire", 0.0
	DamageFactor "CalebFire", 0.0
	DamageFactor "LifeLeech", 0.0
	DamageFactor "FireExplosive", 0.0
	DamageFactor "Hexen2Fire", 0.0
	DamageFactor "DoomDamageTypeFire", 0.0
	DamageFactor "DoomDamageTypeFireExplosive", 0.0
	DamageFactor "RottFire", 0.0
	DamageFactor "WTRangedFire", 0.0
	DamageFactor "DeusExFlamed", 0.0
	DamageFactor "PSFire", 0.0
	DamageFactor "SWFlame", 0.0
	DamageFactor "PGFire", 0.0
	DamageFactor "PainkillerFire", 0.0
	DamageFactor "QuakeFire", 0.0
	DamageFactor "RTCWFire", 0.0
	DamageFactor "HexGreenFire", 0.0
	DamageFactor "PhosFire", 0.0
	DamageFactor "PhosFireCoop", 0.0
	DamageFactor "EradGreenFire", 0.0
	DamageFactor "EradCoopGreenFire", 0.0
	DamageFactor "SWFlame", 0.0
	DamageFactor "SWFlame2", 0.0
	DamageFactor "SWFlame2Coop", 0.0
	DamageFactor "SWFlame3", 0.0
}

Actor SamsaraPowerIronFeetDXEnviro1 : PowerIronFeet { Powerup.Duration -75 Powerup.Color "Green", 0.125 }
Actor SamsaraPowerIronFeetDXEnviro2 : PowerIronFeet { Powerup.Duration -90 Powerup.Color "Green", 0.125 }
Actor SamsaraPowerIronFeetDXEnviro3 : PowerIronFeet { Powerup.Duration -105 Powerup.Color "Green", 0.125 }
Actor SamsaraPowerIronFeetDXEnviro4 : PowerIronFeet { Powerup.Duration -120 Powerup.Color "Green", 0.125 }

Actor SamsaraPowerIronFeetDXEnviro1Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetDXEnviro1
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerIronFeetDXEnviro2Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetDXEnviro2
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerIronFeetDXEnviro3Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetDXEnviro3
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerIronFeetDXEnviro4Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerIronFeetDXEnviro4
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

/*
actor BioTrail
{
    Renderstyle Add
    Alpha 0.4
    Scale 0.95
    -Solid
    +Noclip
    +Nogravity
    +Nointeraction
    +CLIENTSIDEONLY
    States
    {
      Spawn:
        RDST A 2 A_FadeOut(0.125)
        Loop
    }
}
*/

Actor Visor : CustomInventory replaces Infrared
{
	RenderStyle Add
	Alpha 0.85
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
	+INVENTORY.QUIET
    //Inventory.PickupMessage "$SAMSARA_POWERUP_INFRARED"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
        VISR A 0 NoDelay ACS_NamedExecuteWithResult("Samsara_SwitchableObject",1)
	Spawn2:
        VISR A 20 Bright ACS_NamedExecuteAlways("SamsaraClientDecorate", 0, 4, 100, 85)
        VISR A 20
        loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("CorvusClass",1,"PickupHeretic")
		TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen")
		TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
		TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("RottClass", 1, "PickupRott")
		TNT1 A 0 A_JumpIfInventory("CalebClass", 1, "PickupCaleb")
		TNT1 A 0 A_JumpIfInventory("JonClass", 1, "PickupJon")
		TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
		TNT1 A 0 A_JumpIfInventory("Q3Class", 1, "PickupSarge")
		TNT1 A 0 A_JumpIfInventory("DeusExClass",1,"PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 60, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("lettherebelight", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpNormalGiver")
		stop
	PickupHeretic:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 61, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
        TNT1 A 0 A_PlaySound("heretic/itemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortTorch")
		stop
	PickupHexen:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 61, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
        TNT1 A 0 A_PlaySound("hexen/artiget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortTorch2")
		stop
	PickupDuke:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 62, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
        TNT1 A 0 A_PlaySound("Duke/itemget", CHAN_ITEM)
        TNT1 A 0 A_GiveInventory("DukePortNiVi")
        TNT1 A 1 A_GiveInventory("DukeVisionFuel",100)
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 60, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
		TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpBlueMapGiver")
		stop
	PickupRott:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 60, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("gen/vest", CHAN_ITEM)
        TNT1 A 0 A_GiveInventory("Infrared")		
		TNT1 A 0 A_GiveInventory("BulletProofVest")
		TNT1 A 0 A_TakeInventory("AsbestosArmor", 1)
		TNT1 A 1 A_TakeInventory("AsbestosIronFeet", 1)
		stop
	PickupCaleb:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 63, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Caleb/Powerup", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("BeastVision")
		stop
	PickupJon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 64, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Jon/NoramItemPick", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("LighterofGumercindo_EX")
		stop
	PickupHexen2:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 61, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
        TNT1 A 0 A_PlaySound("hexen2/artifactpickup", CHAN_ITEM)
        TNT1 A 1 A_GiveInventory("PortTorch3")
		stop
	PickupSarge:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 60, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("Quake3/Items/Haste", CHAN_6)
		TNT1 A 1 A_GiveInventory("Q3HasteTurbo",1)
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 60, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate",23)
		TNT1 A 0 A_PlaySound("lettherebelight", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 150)
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "PickupDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "PickupDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "PickupDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "PickupDeusExEnviro1")
		TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpNormalGiver")
		stop
	PickupDeusExEnviro1:
		TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpDXEnviro1Giver")
		stop
	PickupDeusExEnviro2:
		TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpDXEnviro2Giver")
		stop
	PickupDeusExEnviro3:
		TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpDXEnviro3Giver")
		stop
	PickupDeusExEnviro4:
		TNT1 A 1 A_GiveInventory("SamsaraPowerLightAmpDXEnviro4Giver")
		stop
	PickupFail:
        VISR A 1 BRIGHT
        fail
	}
}

Actor SamsaraPowerLightAmpNormal : PowerLightAmp { Powerup.Duration -120 }
Actor SamsaraPowerLightAmpBlueMap : PowerLightAmp { Powerup.Duration -120 Powerup.Color BlueMap }
Actor SamsaraPowerLightAmpTorch : PowerTorch { }

Actor SamsaraPowerLightAmpNormalGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpNormal
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerLightAmpBlueMapGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpBlueMap
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerLightAmpTorchGiver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpTorch
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor LighterofGumercindo_EX : PowerupGiver
{    
	+FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    Inventory.MaxAmount 6
	inventory.interhubamount 6
    Inventory.Icon "_EX3D0"
    Inventory.UseSound "Jon/itemuse"
    Inventory.PickupMessage "You picked up a Lighter of Gumercindo!"
	Inventory.RestrictedTo "PSPlayer"
    Powerup.Type Torch
	Tag "Lighter of Gumercindo"
	States
	{
		Spawn:
			NULL A -1
			Stop
	}
}

Actor PortTorch : PowerupGiver
{
    tag "Torch"
    +FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    Inventory.MaxAmount 16
	inventory.interhubamount 16
    Inventory.Icon ARTITRCH
    Inventory.UseSound "heretic/itemuse"
    Inventory.PickupMessage "You picked up a Torch!"
	Inventory.RestrictedTo "CorvusPlayer"
    Powerup.Type Torch
    States
    {
      Spawn:
        TRCH ABC 3 Bright
        Loop
    }
}

Actor PortTorch2 : PowerupGiver
{
    tag "Torch"
    +FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    Inventory.MaxAmount 16
	inventory.interhubamount 16
    Inventory.Icon ARTITRCH
    Inventory.UseSound "hexen/artiuse"
    Inventory.PickupMessage "You picked up a Torch!"
	Inventory.RestrictedTo "HexenPlayer"
    Powerup.Type Torch
    States
    {
      Spawn:
        TRCH ABC 3 Bright
        Loop
    }
}

Actor PortTorch3 : PowerupGiver
{
    tag "Torch"
    +FLOATBOB
    +INVENTORY.UNDROPPABLE
    +INVENTORY.PICKUPFLASH
    Inventory.MaxAmount 16
	inventory.interhubamount 16
    Inventory.Icon "H2INVT03"
    Inventory.UseSound "hexen2/artiuse"
    Inventory.PickupMessage "You picked up a Torch!"
	Inventory.RestrictedTo "Demoness"
    Powerup.Type Torch
}

Actor SamsaraPowerLightAmpDXEnviro1 : PowerLightAmp { Powerup.Duration -150 }
Actor SamsaraPowerLightAmpDXEnviro2 : PowerLightAmp { Powerup.Duration -180 }
Actor SamsaraPowerLightAmpDXEnviro3 : PowerLightAmp { Powerup.Duration -210 }
Actor SamsaraPowerLightAmpDXEnviro4 : PowerLightAmp { Powerup.Duration -240 }

Actor SamsaraPowerLightAmpDXEnviro1Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpDXEnviro1
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerLightAmpDXEnviro2Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpDXEnviro2
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerLightAmpDXEnviro3Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpDXEnviro3
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

Actor SamsaraPowerLightAmpDXEnviro4Giver : PowerupGiver
{
	Inventory.MaxAmount 0
	Powerup.Type SamsaraPowerLightAmpDXEnviro4
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A 2
		loop
	}
}

/*
actor VisorTrail
{
    Renderstyle Add
    Alpha 0.4
    Scale 0.95
    -Solid
    +Noclip
    +Nogravity
    +Nointeraction
    +CLIENTSIDEONLY
    States
    {
      Spawn:
        VISR A 2 A_FadeOut(0.125)
        Loop
    }
}
*/

Actor SamsaraAllMap : AllMap replaces AllMap
{
    RenderStyle Add
    Alpha 0.85
	Scale 0.3
    +Floatbob
    +INVENTORY.PICKUPFLASH	
	//+INVENTORY.QUIET
	Inventory.PickupMessage "You found a map of the area!"
    Inventory.PickupSound "igotamap"
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ACS_NamedExecuteWithResult("Samsara_SwitchableObject",0)
	Spawn2:
		AMAP A 20 Bright //A_SpawnItemEx("VisorTrail", 0, 0, 2.5, 0, 0, 0, 0, 128)
		AMAP A 20
		loop	
	Pickup:
		TNT1 A 1
		TNT1 A 1 A_GiveInventory("AllMap")
		stop	
	}
}

// Heretic Powerups
Actor HereticLesserTome : CustomInventory replaces ArtiTomeOfPower
{
	Scale 0.3
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
	Inventory.PickupAnnouncerEntry "Strength"
    //Inventory.PickupMessage "$SAMSARA_POWERUP_DAMAGE"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		CPRT AAAAABCDEFEDCB 5 BRIGHT
		loop
	Pickup:
		TNT1 A -1 A_Jump(256,"CheckNormal")
		wait
	CheckNormal:
		TNT1 A 0 A_JumpIfInventory("SamsaraHereticLesserTomeItem", 0, "PickupFail")
		goto PickupActual
	PickupActual:
		TNT1 A 0 A_JumpIfInventory("MarathonClass", 0, "PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 0, "PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 93, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("tome/lesser", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticLesserTomeItem")
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 93, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
        TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticLesserTomeItem")
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 93, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("tome/lesser", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 150)
		TNT1 A 1 A_GiveInventory("SamsaraHereticLesserTomeItem")
		stop
	PickupFail:
        CPRT A 1 BRIGHT
        fail
	}
}

Actor SamsaraPowerLesserTome : PowerDamage { Powerup.Color Red 0.1 DamageFactor "Normal", 2.0 Powerup.Duration -30 }
Actor SamsaraPowerLesserTomeDXEnviro1 : PowerDamage { Powerup.Color Red 0.1 DamageFactor "Normal", 2.0 Powerup.Duration -37 }
Actor SamsaraPowerLesserTomeDXEnviro2 : PowerDamage { Powerup.Color Red 0.1 DamageFactor "Normal", 2.0 Powerup.Duration -45 }
Actor SamsaraPowerLesserTomeDXEnviro3 : PowerDamage { Powerup.Color Red 0.1 DamageFactor "Normal", 2.0 Powerup.Duration -53 }
Actor SamsaraPowerLesserTomeDXEnviro4 : PowerDamage { Powerup.Color Red 0.1 DamageFactor "Normal", 2.0 Powerup.Duration -60 }

Actor SamsaraHereticLesserTomeItem : CustomInventory
{
	+INVBAR
	+FLOATBOB
	+NOGRAVITY
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 16
	inventory.interhubamount 16
	Inventory.Icon ARTICPR1
	Inventory.PickupMessage "$SAMSARA_POWERUP_DAMAGE"
	Tag "Strength"
	States
	{
	Spawn:
		TNT1 A 2
		Loop
	Use:
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 1, "UseDeusEx")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerLesserTome", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerLesserTome", 1)
		stop
	UseDeusEx:
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "UseDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "UseDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "UseDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "UseDeusExEnviro1")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerLesserTome", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerLesserTome", 1)
		stop
	UseDeusExEnviro1:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerLesserTomeDXEnviro1", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerLesserTomeDXEnviro1", 1)
		stop
	UseDeusExEnviro2:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerLesserTomeDXEnviro2", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerLesserTomeDXEnviro2", 1)
		stop
	UseDeusExEnviro3:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerLesserTomeDXEnviro3", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerLesserTomeDXEnviro3", 1)
		stop
	UseDeusExEnviro4:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerLesserTomeDXEnviro4", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerLesserTomeDXEnviro4", 1)
		stop
	UseFail:
		TNT1 A 0
		Fail
	}
}

Actor HereticTeleportPickup : CustomInventory replaces ArtiTeleport
{
	Scale 0.33
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
	+INVENTORY.HUBPOWER
    //Inventory.PickupMessage "$SAMSARA_POWERUP_TELEPORTSELF"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		SICN B -1 BRIGHT
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("CorvusClass", 1, "CheckCorvus")
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "CheckHexen")
		TNT1 A -1 A_Jump(256,"CheckNormal")
		wait
	CheckNormal:
		TNT1 A 0 A_JumpIfInventory("SamsaraHereticTeleportPickupItem", 0, "PickupFail")
		goto PickupActual
	CheckCorvus:
		TNT1 A 0 A_JumpIfInventory("SamsaraHereticTeleportPickupItemCorvus", 0, "PickupFail")
		goto PickupActual
	CheckHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraHereticTeleportPickupItemParias", 0, "PickupFail")
		goto PickupActual
	PickupActual:
		TNT1 A 0 A_JumpIfInventory("CorvusClass", 1, "PickupCorvus")
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "PickupHexen")
		TNT1 A 0 A_JumpIfInventory("MarathonClass", 0, "PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 0, "PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 96, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("teleportpickup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticTeleportPickupItem")
		stop
	PickupCorvus:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 96, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("heretic/itemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticTeleportPickupItemCorvus")
		stop
	PickupHexen:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 96, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen/artiget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticTeleportPickupItemParias")
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 96, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
        TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticTeleportPickupItem")
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 96, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("teleportpickup", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 150)
		TNT1 A 1 A_GiveInventory("SamsaraHereticTeleportPickupItem")
		stop
	PickupFail:
        SICN B 1 BRIGHT
        fail
	}
}

Actor SamsaraHereticTeleportPickupItem : ArtiTeleport
{
	Inventory.ForbiddenTo "CorvusPlayer", "HexenPlayer"
	Tag "Teleportation"
	+INVENTORY.UNDROPPABLE
	Inventory.Icon "ARTITEL1"
	Inventory.MaxAmount 16
	Inventory.InterHubAmount 16
}

Actor SamsaraHereticTeleportPickupItemCorvus : ArtiTeleport
{
	Inventory.RestrictedTo "CorvusPlayer"
	Tag "Chaos Device"
	+INVENTORY.UNDROPPABLE
	Inventory.Icon "ARTITEL2"
	Inventory.MaxAmount 16
	Inventory.InterHubAmount 16
}

Actor SamsaraHereticTeleportPickupItemParias : ArtiTeleport
{
	Inventory.RestrictedTo "HexenPlayer"
	Tag "Chaos Device"
	+INVENTORY.UNDROPPABLE
	Inventory.Icon "ARTITEL3"
	Inventory.MaxAmount 16
	Inventory.InterHubAmount 16
}

Actor HereticFlightPickup : CustomInventory replaces ArtiFly
{
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
	+INVENTORY.HUBPOWER
	Renderstyle Add
	Alpha 0.95
	Scale 0.75
    //Inventory.PickupMessage "$SAMSARA_POWERUP_FLIGHT"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		AMAP B 0 BRIGHT
		AMAP B 35 BRIGHT ACS_NamedExecuteAlways("SamsaraClientDecorate", 0, 4, 100, 95)
		wait
	Pickup:
		TNT1 A 0 A_JumpIfInventory("CorvusClass", 1, "CheckRaven")
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "CheckRaven")
		TNT1 A -1 A_Jump(256,"CheckNormal")
		wait
	CheckNormal:
		TNT1 A 0 A_JumpIfInventory("SamsaraHereticFlightPickupItem", 0, "PickupFail")
		goto PickupActual
	CheckRaven:
		TNT1 A 0 A_JumpIfInventory("SamsaraHereticFlightPickupItemRaven", 0, "PickupFail")
		goto PickupActual
	PickupActual:
		TNT1 A 0 A_JumpIfInventory("CorvusClass", 1, "PickupCorvus")
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "PickupHexen")
		TNT1 A 0 A_JumpIfInventory("MarathonClass", 0, "PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 0, "PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 95, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("flightpickup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticFlightPickupItem")
		stop
	PickupCorvus:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 95, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("heretic/itemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticFlightPickupItemRaven")
		stop
	PickupHexen:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 95, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen/artiget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticFlightPickupItemRaven")
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 95, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
        TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHereticFlightPickupItem")
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 95, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("flightpickup", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 200)
		TNT1 A 1 A_GiveInventory("SamsaraHereticFlightPickupItem")
		stop
	PickupFail:
        AMAP B 1 BRIGHT
        fail
	}
}

Actor SamsaraPowerFly : PowerFlight { +INVENTORY.HUBPOWER Inventory.Icon "TNT1A0" Powerup.Color Yellow 0.1 Powerup.Duration -60 }
Actor SamsaraPowerFlyDXEnviro1 : PowerFlight { +INVENTORY.HUBPOWER Inventory.Icon "TNT1A0" Powerup.Color Yellow 0.1 Powerup.Duration -75 }
Actor SamsaraPowerFlyDXEnviro2 : PowerFlight { +INVENTORY.HUBPOWER Inventory.Icon "TNT1A0" Powerup.Color Yellow 0.1 Powerup.Duration -90 }
Actor SamsaraPowerFlyDXEnviro3 : PowerFlight { +INVENTORY.HUBPOWER Inventory.Icon "TNT1A0" Powerup.Color Yellow 0.1 Powerup.Duration -105 }
Actor SamsaraPowerFlyDXEnviro4 : PowerFlight { +INVENTORY.HUBPOWER Inventory.Icon "TNT1A0" Powerup.Color Yellow 0.1 Powerup.Duration -120 }
Actor SamsaraPowerFlyForHexen : PowerFlight { +INVENTORY.HUBPOWER Inventory.Icon "TNT1A0" Powerup.Duration 0x7FFFFFFD }

Actor SamsaraHereticFlightPickupItem : CustomInventory
{
	+INVBAR
	+FLOATBOB
	+NOGRAVITY
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 16
	inventory.interhubamount 16
	Inventory.Icon ARTISOR1
	Inventory.PickupMessage "$SAMSARA_POWERUP_FLIGHT"
	Inventory.ForbiddenTo "CorvusPlayer", "HexenPlayer"
	Tag "Flight"
	States
	{
	Spawn:
		TNT1 A 2
		Loop
	Use:
		TNT1 A 0 A_JumpIfInventory("DukeClass", 1, "UseDuke")
		TNT1 A 0 A_JumpIfInventory("RMRClass", 1, "UseRMR")
		TNT1 A 0 A_JumpIfInventory("WitchavenClass", 1, "UseWitchaven")
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 1, "UseDeusEx")
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",49) == 8, "UseForHexen")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFly", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFly", 1)
		stop
	// Online games need this because for some reason, the powerup won't
	// last forever in Hexen netgames like it's supposed to.
	UseForHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyForHexen", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyForHexen", 1)
		stop
	UseDuke:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",49) == 8, "UseDukeForHexen")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFly", 1, "UseFail")
		TNT1 A 0 A_TakeInventory("DukeFlying", 1)
		TNT1 A 0 A_TakeInventory("DukePetjack", 1)
		TNT1 A 0 A_GiveInventory("SamsaraPowerFly", 1)
		stop
	UseDukeForHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyForHexen", 1, "UseFail")
		TNT1 A 0 A_TakeInventory("DukeFlying", 1)
		TNT1 A 0 A_TakeInventory("DukePetjack", 1)
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyForHexen", 1)
		stop
	UseRMR:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",49) == 8, "UseRMRForHexen")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFly", 1, "UseFail")
		TNT1 A 0 A_TakeInventory("RMRFlyAbility")
		TNT1 A 0 A_TakeInventory("RMRFlyAbility_2")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFly", 1)
		stop
	UseRMRForHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyForHexen", 1, "UseFail")
		TNT1 A 0 A_TakeInventory("RMRFlyAbility")
		TNT1 A 0 A_TakeInventory("RMRFlyAbility_2")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyForHexen", 1)
		stop
	UseWitchaven:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",49) == 8, "UseWitchavenForHexen")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFly", 1, "UseFail")
		TNT1 A 0 A_TakeInventory("WTSpellFlyHack")
		TNT1 A 0 A_TakeInventory("WTSpellFly")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFly", 1)
		stop
	UseWitchavenForHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyForHexen", 1, "UseFail")
		TNT1 A 0 A_TakeInventory("WTSpellFlyHack")
		TNT1 A 0 A_TakeInventory("WTSpellFly")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyForHexen", 1)
		stop
	UseDeusEx:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",49) == 8, "UseDeusExForHexen")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "UseDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "UseDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "UseDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "UseDeusExEnviro1")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFly", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFly", 1)
		stop
	UseDeusExEnviro1:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyDXEnviro1", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyDXEnviro1", 1)
		stop
	UseDeusExEnviro2:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyDXEnviro2", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyDXEnviro2", 1)
		stop
	UseDeusExEnviro3:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyDXEnviro3", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyDXEnviro3", 1)
		stop
	UseDeusExEnviro4:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyDXEnviro4", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyDXEnviro4", 1)
		stop
	UseDeusExForHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyForHexen", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyForHexen", 1)
		stop
	UseFail:
		TNT1 A 0
		Fail
	}
}

Actor SamsaraPowerFlyRaven : PowerFlight { Game Raven +INVENTORY.HUBPOWER Inventory.Icon "HERFLY0" Powerup.Duration -60 }
Actor SamsaraPowerFlyRavenForHexen : PowerFlight { Game Raven +INVENTORY.HUBPOWER Inventory.Icon "HERFLY0" Powerup.Duration 0x7FFFFFFD }

Actor SamsaraHereticFlightPickupItemRaven : CustomInventory
{
	+INVBAR
	+FLOATBOB
	+NOGRAVITY
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 16
	inventory.interhubamount 16
	Inventory.Icon ARTISOR2
	Inventory.PickupMessage "$SAMSARA_POWERUP_FLIGHT"
	Inventory.RestrictedTo "CorvusPlayer", "HexenPlayer"
	Tag "Wings of Wrath"
	States
	{
	Spawn:
		TNT1 A 2
		Loop
	Use:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate",49) == 8, "UseForHexen")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyRaven", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyRaven", 1)
		stop
	UseForHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerFlyRavenForHexen", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerFlyRavenForHexen", 1)
		stop
	UseFail:
		TNT1 A 0
		Fail
	}
}

// Hexen Powerups
Actor HexenBootsPickup : CustomInventory replaces ArtiSpeedBoots
{
	Scale 0.3
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
	+INVENTORY.HUBPOWER
	Inventory.PickupAnnouncerEntry "Haste"
    //Inventory.PickupMessage "$SAMSARA_POWERUP_SPEED"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		CPRT MMMMMNOPQRQPON 5
		loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "CheckHexen")
		TNT1 A -1 A_Jump(256,"CheckNormal")
		wait
	CheckNormal:
		TNT1 A 0 A_JumpIfInventory("SamsaraHexenBootsPickupItem", 0, "PickupFail")
		goto PickupActual
	CheckHexen:
		TNT1 A 0 A_JumpIfInventory("SamsaraHexenBootsPickupItemParias", 0, "PickupFail")
		goto PickupActual
	PickupActual:
		TNT1 A 0 A_JumpIfInventory("HexenClass", 0, "PickupHexen")
		TNT1 A 0 A_JumpIfInventory("MarathonClass", 0, "PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 0, "PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 97, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexenbootspickup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHexenBootsPickupItem")
		stop
	PickupHexen:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 97, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen/artiget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHexenBootsPickupItemParias")
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 97, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
        TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHexenBootsPickupItem")
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 97, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexenbootspickup", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 200)
		TNT1 A 1 A_GiveInventory("SamsaraHexenBootsPickupItem")
		stop
	PickupFail:
        CPRT G 1 BRIGHT
        fail
	}
}

Actor SamsaraPowerHexenBoots : PowerSpeed { Inventory.Icon "TNT1A0" Powerup.Color Blue 0.1 Speed 1.5 Powerup.Duration -45 }
Actor SamsaraPowerHexenBootsDXEnviro1 : PowerSpeed { Inventory.Icon "TNT1A0" Powerup.Color Blue 0.1 Speed 1.5 Powerup.Duration -56 }
Actor SamsaraPowerHexenBootsDXEnviro2 : PowerSpeed { Inventory.Icon "TNT1A0" Powerup.Color Blue 0.1 Speed 1.5 Powerup.Duration -68 }
Actor SamsaraPowerHexenBootsDXEnviro3 : PowerSpeed { Inventory.Icon "TNT1A0" Powerup.Color Blue 0.1 Speed 1.5 Powerup.Duration -79 }
Actor SamsaraPowerHexenBootsDXEnviro4 : PowerSpeed { Inventory.Icon "TNT1A0" Powerup.Color Blue 0.1 Speed 1.5 Powerup.Duration -90 }

Actor SamsaraHexenBootsPickupItem : CustomInventory
{
	+INVBAR
	+FLOATBOB
	+NOGRAVITY
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	+INVENTORY.HUBPOWER
	Inventory.MaxAmount 16
	inventory.interhubamount 16
	Inventory.Icon ARTICPR3
	Inventory.PickupMessage "$SAMSARA_POWERUP_SPEED"
	Inventory.ForbiddenTo "HexenPlayer"
	Tag "Haste"
	States
	{
	Spawn:
		TNT1 A 2
		Loop
	Use:
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 1, "UseDeusEx")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBoots", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBoots", 1)
		stop
	UseDeusEx:
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 4, "UseDeusExEnviro4")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 3, "UseDeusExEnviro3")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 2, "UseDeusExEnviro2")
		TNT1 A 0 A_JumpIfInventory("DeusEx_EnviroSkill", 1, "UseDeusExEnviro1")
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBoots", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBoots", 1)
		stop
	UseDeusExEnviro1:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBootsDXEnviro1", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBootsDXEnviro1", 1)
		stop
	UseDeusExEnviro2:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBootsDXEnviro2", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBootsDXEnviro2", 1)
		stop
	UseDeusExEnviro3:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBootsDXEnviro3", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBootsDXEnviro3", 1)
		stop
	UseDeusExEnviro4:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBootsDXEnviro4", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBootsDXEnviro4", 1)
		stop
	UseFail:
		TNT1 A 0
		Fail
	}
}

Actor SamsaraPowerHexenBootsParias : PowerSpeed { Inventory.Icon "HXSPD0" Speed 1.5 Powerup.Duration -45 }

Actor SamsaraHexenBootsPickupItemParias : CustomInventory
{
	+INVBAR
	+FLOATBOB
	+NOGRAVITY
	+INVENTORY.PICKUPFLASH
	+INVENTORY.UNDROPPABLE
	Inventory.MaxAmount 16
	inventory.interhubamount 16
	Inventory.Icon ARTISPD
	Inventory.PickupMessage "$SAMSARA_POWERUP_SPEED"
	Inventory.RestrictedTo "HexenPlayer"
	Tag "Boots of Speed"
	States
	{
	Spawn:
		TNT1 A 2
		Loop
	Use:
		TNT1 A 0 A_JumpIfInventory("SamsaraPowerHexenBootsParias", 1, "UseFail")
		TNT1 A 0 A_GiveInventory("SamsaraPowerHexenBootsParias", 1)
		stop
	UseFail:
		TNT1 A 0
		Fail
	}
}

Actor HexenTeleportPickup : CustomInventory replaces ArtiTeleportOther
{
	Scale 0.33
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
	+INVENTORY.HUBPOWER
    //Inventory.PickupMessage "$SAMSARA_POWERUP_TELEPORTOTHER"
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		SICN A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("CorvusClass", 1, "CheckRaven")
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "CheckRaven")
		TNT1 A -1 A_Jump(256,"CheckNormal")
		wait
	CheckNormal:
		TNT1 A 0 A_JumpIfInventory("SamsaraHexenTeleportPickupItem", 0, "PickupFail")
		goto PickupActual
	CheckRaven:
		TNT1 A 0 A_JumpIfInventory("SamsaraHexenTeleportPickupItemRaven", 0, "PickupFail")
		goto PickupActual
	PickupActual:
		TNT1 A 0 A_JumpIfInventory("CorvusClass", 1, "PickupRaven")
		TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "PickupRaven")
		TNT1 A 0 A_JumpIfInventory("MarathonClass", 0, "PickupMarathon")
		TNT1 A 0 A_JumpIfInventory("DeusExClass", 0, "PickupDeusEx")
		TNT1 A -1 A_Jump(256,"PickupNormal")
		wait
	PickupNormal:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 98, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("teleportpickup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHexenTeleportPickupItem")
		stop
	PickupRaven:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 98, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("hexen/artiget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHexenTeleportPickupItemRaven")
		stop
	PickupMarathon:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 98, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("Green",0.5,6)
        TNT1 A 0 A_PlaySound("marathon/bigitemget", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("SamsaraHexenTeleportPickupItem")
		stop
	PickupDeusEx:
		TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 98, 0, 0)
		TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,2)
		TNT1 A 0 A_SetBlend("d7ba45", 0.3, 4)
		TNT1 A 0 A_PlaySound("teleportpickup", CHAN_ITEM)
		TNT1 A 0 ACS_NamedExecuteWithResult("DeusEx_Decorate", 26, 150)
		TNT1 A 1 A_GiveInventory("SamsaraHexenTeleportPickupItem")
		stop
	PickupFail:
        SICN A 1 BRIGHT
        fail
	}
}

Actor SamsaraHexenTeleportPickupItem : ArtiTeleportOther
{
	Inventory.ForbiddenTo "CorvusPlayer", "HexenPlayer"
	Tag "Banishment"
	+INVENTORY.UNDROPPABLE
	Inventory.Icon "ARTIBAN1"
	Inventory.MaxAmount 16
	Inventory.InterHubAmount 16
}

Actor SamsaraHexenTeleportPickupItemRaven : ArtiTeleportOther
{
	Inventory.RestrictedTo "CorvusPlayer", "HexenPlayer"
	Tag "Banishment Device"
	+INVENTORY.UNDROPPABLE
	Inventory.Icon "ARTIBAN2"
	Inventory.MaxAmount 16
	Inventory.InterHubAmount 16
}

// Skulltag Powerups
/*
	Zandronum's random powerup item has the player get an item that corrosponds to the
	sprite, so if they picked up a random powerup that switched to the Megasphere's
	sprite, than they will get the megasphere. In order to keep things simple internally,
	Samsara has the player get a randomly chosen powerup, even if they picked it up 48 tics later.
	This removes the strategization that can come from waiting for a desired powerup, but it
	makes things way easier to handle for programming, especially with future updates.
*/

Actor RandomPowerup : CustomInventory 5039 //replaces RandomPowerup
{
	Game Doom
	SpawnID 176
	RenderStyle Add
	Alpha 0.95
	Scale 0.75
	+NOGRAVITY
	+FLOATBOB
    +INVENTORY.PICKUPFLASH
    +COUNTITEM
	+INVENTORY.QUIET
    Inventory.PickupSound "nosoundforyoubitch"
	States
	{
	Spawn:
		STPQ A 0
		STPQ A 35 BRIGHT ACS_NamedExecuteAlways("SamsaraClientDecorate", 0, 4, 100, 75)
		wait
	Pickup:
		TNT1 A -1 A_Jump(256, "PickupMegasphere", "PickupSoulsphere", "PickupGuardsphere", "PickupPartialInvisibility", "PickupTimeFreezeSphere", "PickupInvisibilitySphere", "PickupDoomsphere", "PickupTurbosphere")
		wait
	PickupMegasphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupMegaPack", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupSoulsphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupSuperHealth", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupGuardsphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupGuardsphere", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupPartialInvisibility:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupPartialInvisibility", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupTimeFreezeSphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupTimeFreezeSphere", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupInvisibilitySphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupInvisibilitySphere", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupDoomsphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupDoomsphere", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupTurbosphere:
		TNT1 A 0 A_SpawnItemEx("SamsaraRandomPowerupTurbosphere", 0, 0, 0, 0, 0, 0, 0)
		STPQ A 2 BRIGHT
		stop
	PickupFail:
        STPQ A 1 BRIGHT
        fail
	}
}

Actor SamsaraRandomPowerupMegaPack : MegaPack
{
	-COUNTITEM
	States
	{
	Spawn:
		TNT1 A 2
		loop
	PickupFail:
        TNT1 A 1
        fail
	}
}

Actor SamsaraRandomPowerupSuperHealth : SuperHealth
{
	-COUNTITEM
	States
	{
	Spawn:
		TNT1 A 2
		loop
	PickupFail:
        TNT1 A 1
        fail
	}
}

Actor SamsaraRandomPowerupPartialInvisibility : PartialInvisibility
{
	-COUNTITEM
	States
	{
	Spawn:
		TNT1 A 2
		loop
	PickupFail:
        TNT1 A 1
        fail
	}
}


// Skulltag powerups will have to be manually
// copied over due to errors involving GZDoom
Actor SamsaraRandomPowerupGuardsphere : CustomInventory
{
	-COUNTITEM
	+NOGRAVITY
	Inventory.MaxAmount 0
	Inventory.PickupMessage "$PICKUP_GUARDSPHERE"
	Inventory.PickupSound "nosoundforyoubitch"
	Inventory.PickupAnnouncerEntry "guardsphere"
	States
	{
	Spawn:
		TNT1 A 2
		Loop

	Pickup:
		TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupDoomStr")
		TNT1 A 1 A_JumpIfInventory("CorvusClass", 1, "PickupHeretic")
		TNT1 A 0 A_PlaySound("misc/p_pkup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("PowerQuarterDamage")
		TNT1 A 1 A_GiveInventory("PowerGuardsphereColor")
		Stop

	PickupDoomStr:
		TNT1 A 0 A_PlaySound("misc/p_pkup", CHAN_ITEM)
		TNT1 A 0 A_GiveInventory("PowerQuarterDamage")
		TNT1 A 0 A_GiveInventory("PowerGuardsphereColorStr")
		Stop

	PickupHeretic:
		TNT1 A 0 A_JumpIfInventory("GuardsphereHeretic", 0, "PickupFail")
		TNT1 A 0 A_PlaySound("heretic/itemget")
		TNT1 A 1 A_GiveInventory("GuardsphereHeretic")
		Stop

	PickupFail:
		TNT1 A 1
		Fail
	}
}

Actor SamsaraRandomPowerupTimeFreezeSphere : CustomInventory
{
	-COUNTITEM
	Inventory.PickupMessage "$PICKUP_TIMEFREEZER"
	Inventory.PickupAnnouncerEntry "timefreeze"
	RenderStyle Normal
	Alpha 1
	-BIGPOWERUP
	-FLOATBOB
	+NOGRAVITY
	-PICKUPFLASH
	States
	{
	Spawn:
		TNT1 A 2
		Loop

	Pickup:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("SamsaraDecorate", 38), "PickupInvuln")
	PickupTimeFreeze:
		TNT1 A 0 A_JumpIfInventory("CorvusClass",1,"PickupTimeFreezeHeretic")
		TNT1 A 0 A_PlaySound("misc/p_pkup",CHAN_ITEM)
		TNT1 A 0 A_GiveInventory("PowerTimeFreezer")
		TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupTimeFreezeDoomStr")
		TNT1 A 0 A_GiveInventory("PowerTimeFreezerColor")
		Stop

	PickupTimeFreezeDoomStr:
		TNT1 A 0 A_GiveInventory("PowerTimeFreezerColorStr")
		Stop

	PickupTimeFreezeHeretic:
		TNT1 A 0 A_JumpIfInventory("TimeFreezeSphereHeretic",0,"PickupFail")
		TNT1 A 0 A_PlaySound("heretic/itemget")
		TNT1 A 0 A_GiveInventory("TimeFreezeSphereHeretic")
		Stop

	PickupFail:
		TNT1 A 1
		Fail
	}
}

Actor SamsaraRandomPowerupInvisibilitySphere : CustomInventory
{
	-COUNTITEM
	+NOGRAVITY
	+VISIBILITYPULSE
	Inventory.MaxAmount 0
	RenderStyle Translucent
	Inventory.PickupMessage "$PICKUP_INVISIBILITY"
	Inventory.PickupSound "nosoundforyoubitch"
	Inventory.PickupAnnouncerEntry "invisibility"
	States
	{
	Spawn:
		TNT1 A 2
		Loop

	Pickup:
		TNT1 A 1 A_JumpIfInventory("CorvusClass", 1, "PickupHeretic")
		TNT1 A 1 A_JumpIfInventory("HexenClass", 1, "PickupHexen")
		TNT1 A 1 A_JumpIfInventory("MarathonClass", 1, "PickupMarathon")
		TNT1 A 1 A_JumpIfInventory("QuakeClass", 1, "PickupQuake")
		TNT1 A 0 A_PlaySound("misc/p_pkup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("PowerTranslucency")
		Stop

	PickupHeretic:
		TNT1 A 0 A_JumpIfInventory("InvisibilitySphereHeretic", 0, "PickupHereticFail")
		TNT1 A 0 A_PlaySound("heretic/itemget")
		TNT1 A 1 A_GiveInventory("InvisibilitySphereHeretic")
		Stop

	PickupHereticFail:
		SINV A 1 bright
		Fail

	PickupHexen:
		TNT1 A 0 A_PlaySound("misc/p_pkup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("PowerGhost")
		Stop

	PickupMarathon:
		TNT1 A 0 A_SetBlend("Green",0.5,6)
		TNT1 A 0 A_PlaySound("marathon/bigitemget")
		TNT1 A 1 A_GiveInventory("PowerShadow")
		TNT1 A 1 A_GiveInventory("PowerShadow")
		Stop

	PickupQuake:
		TNT1 A 0 A_GiveInventory("QuakeInvisTimer", 1050)
		Stop
	}
}

Actor SamsaraRandomPowerupDoomSphere : CustomInventory
{
	-COUNTITEM
	+NOGRAVITY
	Inventory.MaxAmount 0
	Inventory.PickupMessage "$PICKUP_DOOMSPHERE"
	Inventory.PickupSound "nosoundforyoubitch"
	Inventory.PickupAnnouncerEntry "doomsphere"
	States
	{
	Spawn:
		TNT1 A 2
		Loop

	Pickup:
		TNT1 A 1 A_JumpIfInventory("CorvusClass", 1, "PickupHeretic")
		TNT1 A 0 A_PlaySound("misc/p_pkup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("PowerQuadDamage")
		TNT1 A 1 A_GiveInventory("PowerDoomsphereColor")
		Stop

	PickupHeretic:
		TNT1 A 0 A_JumpIfInventory("DoomsphereHeretic", 0, "PickupFail")
		TNT1 A 0 A_PlaySound("heretic/itemget")
		TNT1 A 1 A_GiveInventory("DoomsphereHeretic")
		Stop

	PickupFail:
		TNT1 A 1
		Fail
	}
}

Actor SamsaraRandomPowerupTurbosphere : CustomInventory
{
	-COUNTITEM
	+NOGRAVITY
	Inventory.MaxAmount 0
	Inventory.PickupMessage "$PICKUP_TURBOSPHERE"
	Inventory.PickupSound "nosoundforyoubitch"
	Inventory.PickupAnnouncerEntry "turbosphere"
	States
	{
	Spawn:
		TNT1 A 2
		Loop

	Pickup:
		TNT1 A 1 A_JumpIfInventory("CorvusClass", 1, "PickupHeretic")
		TNT1 A 0 A_PlaySound("misc/p_pkup", CHAN_ITEM)
		TNT1 A 1 A_GiveInventory("PowerTurbo")
		Stop

	PickupHeretic:
		TNT1 A 0 A_JumpIfInventory("TurbosphereHeretic", 0, "PickupFail")
		TNT1 A 0 A_PlaySound("heretic/itemget")
		TNT1 A 1 A_GiveInventory("TurbosphereHeretic")
		Stop

	PickupFail:
		TNT1 A 1
		Fail
	}
}